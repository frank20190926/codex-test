<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宁德海上光伏结构监测系统</title>
    <!-- 引入本地 Tailwind CDN 脚本（离线保存版本） -->
    <script src="宁德海上光伏结构监测系统_files/saved_resource"></script>
    <!-- 引入 Chart.js 及时间适配器 -->
    <script src="宁德海上光伏结构监测系统_files/chart.js"></script>
    <script src="宁德海上光伏结构监测系统_files/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="stylesheet" href="宁德海上光伏结构监测系统_files/flatpickr.min.css">
    <script src="宁德海上光伏结构监测系统_files/flatpickr"></script>
    <!-- 引入1024×768优化样式 -->
    <link rel="stylesheet" href="css/responsive-1024.css">

    <style>
        :root {
            --sidebar-width: 14rem;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
            background-color: #f0f2f5;
        }
        /* 自定义侧边栏滚动条样式 */
        .sidebar-scroll::-webkit-scrollbar {
            width: 4px;
        }
        .sidebar-scroll::-webkit-scrollbar-thumb {
            background-color: #4a5568;
            border-radius: 20px;
        }
        .sidebar-scroll::-webkit-scrollbar-track {
            background-color: transparent;
        }
        
        /* 侧边栏折叠样式 */
        #sidebar.collapsed {
            width: 64px !important;
        }

        #sidebar {
            width: var(--sidebar-width);
            transition: width 0.3s ease, padding 0.3s ease;
            overflow: hidden;
        }

        #layout-container.sidebar-collapsed #sidebar {
            width: 0;
            padding: 0;
        }

        /* 优化后的筛选界面样式 */
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .filter-group label {
            display: block;
            font-size: 0.75rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 4px;
        }
        
        .filter-input {
            height: 32px;
            font-size: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            padding: 0 8px;
            transition: all 0.15s ease;
        }
        
        .filter-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 1px #3b82f6;
        }
        
        .filter-button {
            height: 32px;
            font-size: 0.75rem;
            border-radius: 4px;
            padding: 0 12px;
            transition: all 0.15s ease;
            border: none;
            cursor: pointer;
        }
        
        .filter-button-primary {
            background-color: #3b82f6;
            color: white;
        }
        
        .filter-button-primary:hover {
            background-color: #2563eb;
        }
        
        .filter-button-secondary {
            background-color: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .filter-button-secondary:hover {
            background-color: #e5e7eb;
        }
        
        /* 简化表格分页样式 */
        .simple-pagination {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 16px;
            border-top: 1px solid #e5e7eb;
            font-size: 0.75rem;
            color: #6b7280;
        }
        
        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .pagination-button {
            padding: 4px 8px;
            border: 1px solid #d1d5db;
            background: white;
            color: #6b7280;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        
        .pagination-button:hover {
            background-color: #f9fafb;
        }
        
        .pagination-button.active {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        /* 统一主内容与面包屑间距 */
        #main-content {
            --content-gap: 12px;
            display: flex;
            flex-direction: column;
        }

        #breadcrumb {
            display: flex;
            gap: 6px;
            font-size: clamp(0.813rem, 1.6vw, 0.875rem);
            font-weight: 600;
            color: #0f172a;
            letter-spacing: normal;
            flex-wrap: wrap;
            min-width: 0;
            overflow: visible;
            max-width: 100%;
            width: 100%;
            align-items: center;
            line-height: 1.5;
        }

        #breadcrumb .crumb-separator {
            color: #9ca3af;
            flex-shrink: 0;
        }

        #breadcrumb .crumb-item {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            white-space: normal;
            max-width: 100%;
            overflow-wrap: anywhere;
            min-width: 0;
            flex-shrink: 1;
        }

        .menu-link.active {
            color: #fff !important;
            background-color: rgba(24, 144, 255, 0.2);
        }

        #sidebar details[open] > summary {
            background-color: rgba(24, 144, 255, 0.08);
            color: #fff;
        }

        /* 侧边栏折叠控制 */
        :root {
            --sidebar-width: 14rem;
        }

        #layout-container {
            display: flex;
            flex: 1;
            transition: all 0.3s ease;
        }

        #sidebar {
            width: var(--sidebar-width);
            flex: 0 0 var(--sidebar-width);
            transition: width 0.3s ease, padding 0.3s ease;
            overflow: hidden;
        }

        #sidebar nav {
            transition: opacity 0.3s ease;
        }

        #layout-container.sidebar-collapsed #sidebar {
            width: 0;
            flex: 0 0 0;
            padding: 0;
        }

        #layout-container.sidebar-collapsed #sidebar nav {
            opacity: 0;
            pointer-events: none;
        }

        #main-content {
            flex: 1;
            transition: all 0.3s ease;
        }

        /* 响应式优化 */
        @media (max-width: 768px) {
            .filter-grid {
                grid-template-columns: 1fr;
            }
            
            .simple-pagination {
                flex-direction: column;
                gap: 8px;
                align-items: stretch;
            }
            
            .pagination-controls {
                justify-content: center;
            }
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="flex flex-col h-screen bg-[#f0f2f5]">
        <!-- 顶部统一标题栏 -->
        <header class="h-16 bg-[#001529] text-white flex items-center justify-between px-6 shadow" id="topbar">
            <div class="flex items-center">
                <button id="menu-toggle" class="text-white focus:outline-none flex-shrink-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
                <h1 class="text-lg font-semibold ml-4 whitespace-nowrap" style="writing-mode: horizontal-tb; direction: ltr; display: inline-block; min-width: max-content;">宁德海上光伏结构监测系统</h1>
            </div>
            <div class="relative">
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-9 h-9 text-white bg-[#0f2540] rounded-full p-1 border border-white/30"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="10" r="4"></circle><path d="M12 14c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>
            </div>
        </header>
        <div class="flex flex-1 overflow-hidden" id="layout-container">
            <!-- 左侧导航栏 -->
            <aside class="sidebar bg-[#001529] text-gray-300 flex flex-col h-full transition-all duration-300" id="sidebar">
                <!-- 导航菜单 -->
                <nav class="flex-1 overflow-y-auto sidebar-scroll">
                <ul class="py-4 flex flex-col h-full" id="sidebar-menu">
                    <!-- 首页 -->
                    <li class="menu-item">
                        <details open>
                            <summary class="flex items-center px-6 py-3 cursor-pointer list-none">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-3"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                                首页
                                <span class="ml-auto transform transition-transform duration-200">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><path d="m6 9 6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <ul class="pl-12 bg-opacity-20 bg-black">
                                <li><a href="#" class="block py-2 menu-link" data-view="data-view" data-breadcrumb="首页 / 系统数据">系统数据</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="layout-view" data-breadcrumb="首页 / 系统布设">系统布设</a></li>
                            </ul>
                        </details>
                    </li>
                    <!-- 实时监测 -->
                    <li class="menu-item">
                        <details>
                            <summary class="flex items-center px-6 py-3 cursor-pointer list-none hover:bg-[#1890ff] hover:text-white transition-colors duration-200">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-3"><rect width="20" height="15" x="2" y="7" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline></svg>
                                实时监测
                                <span class="ml-auto transform transition-transform duration-200">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><path d="m6 9 6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <ul class="pl-12 bg-opacity-20 bg-black">
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="strain-view" data-breadcrumb="实时监测 / 应力应变">应力应变</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="dynamic-response-view" data-breadcrumb="实时监测 / 动态响应">动态响应</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="tilt-view" data-breadcrumb="实时监测 / 倾角监测">倾角监测</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="coating-view" data-breadcrumb="实时监测 / 涂层监测">涂层监测</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="stress-view" data-breadcrumb="实时监测 / 索力监测">索力监测</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="auscultation-view" data-breadcrumb="实时监测 / 听诊监测">听诊监测</a></li>
                            </ul>
                        </details>
                    </li>
                    <!-- 历史查询 -->
                    <li class="menu-item">
                        <details>
                            <summary class="flex items-center px-6 py-3 cursor-pointer list-none hover:bg-[#1890ff] hover:text-white transition-colors duration-200">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-3"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M12 8v4l2 2"></path></svg>
                                历史查询
                                <span class="ml-auto transform transition-transform duration-200">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><path d="m6 9 6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <ul class="pl-12 bg-opacity-20 bg-black">
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="history-strain-view" data-breadcrumb="历史查询 / 应力应变">应力应变</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="history-dynamic-view" data-breadcrumb="历史查询 / 动态响应">动态响应</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="history-inclination-view" data-breadcrumb="历史查询 / 倾角监测">倾角监测</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="history-coating-view" data-breadcrumb="历史查询 / 涂层监测">涂层监测</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="history-cable-force-view" data-breadcrumb="历史查询 / 索力监测">索力监测</a></li>
                                <li><a href="#" class="block py-2 hover:text-white menu-link" data-view="history-acoustic-view" data-breadcrumb="历史查询 / 听诊监测">听诊监测</a></li>
                            </ul>
                        </details>
                    </li>
                    <!-- 海陆数据传输 -->
                    <li class="menu-item">
                        <a href="#" class="flex items-center px-6 py-3 hover:bg-[#1890ff] hover:text-white transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-3"><path d="M2.5 17a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"></path><path d="M16 11l-2.1 3.9a1.2 1.2 0 0 1-2.1.2L8.2 9.8a1.2 1.2 0 0 0-2-.2L2 16"></path><path d="M22 22H2l2-10h16l2 10z"></path><path d="M16 6l-3.9 3.9a1.2 1.2 0 0 1-2 .2L8.2 5.8a1.2 1.2 0 0 0-2-.2L2 10"></path><path d="m13 6 3 6h6l-3-6h-6z"></path></svg>
                            海陆数据传输
                        </a>
                    </li>
                    <!-- 预警信息 -->
                    <li class="menu-item">
                        <a href="#" class="flex items-center px-6 py-3 hover:bg-[#1890ff] hover:text-white transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-3"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path></svg>
                            预警信息
                        </a>
                    </li>
                    <!-- 预警配置 -->
                    <li class="menu-item">
                        <a href="#" class="flex items-center px-6 py-3 hover:bg-[#1890ff] hover:text-white transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-3"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            预警配置
                        </a>
                    </li>
                    <!-- 传感器管理 -->
                    <li class="menu-item">
                        <a href="#" class="flex items-center px-6 py-3 hover:bg-[#1890ff] hover:text-white transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-3"><rect width="16" height="16" x="4" y="4" rx="2"></rect><rect width="6" height="6" x="9" y="9" rx="1"></rect><path d="M15 2v2"></path><path d="M15 20v2"></path><path d="M2 15h2"></path><path d="M2 9h2"></path><path d="M20 15h2"></path><path d="M20 9h2"></path><path d="M9 2v2"></path><path d="M9 20v2"></path></svg>
                            传感器管理
                        </a>
                    </li>
                     <!-- 用户管理 -->
                     <li class="mt-auto pt-2 border-t border-gray-700/60">
                        <a href="#" class="flex items-center px-6 py-3 hover:bg-[#1890ff] hover:text-white transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-3"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                            用户管理
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        
        <!-- 主内容区 -->
        <div class="flex-1 flex flex-col transition-all duration-300 overflow-y-auto" id="main-content">
            <div class="p-4">
                <div id="breadcrumb">
                    <span class="crumb-item">首页</span>
                    <span class="crumb-separator">/</span>
                    <span class="crumb-item">系统数据</span>
                </div>
            <!-- 视图: 历史查询 - 动态响应 -->
            <main id="history-dynamic-view" class="page-view hidden">
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <div class="border-b border-gray-200">
                        <nav class="flex flex-wrap gap-4" aria-label="Tabs" id="history-dynamic-tabs">
                            <a href="#" data-content="history-dynamic-rigid-data" class="history-dynamic-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">历史数据-刚性平台</a>
                            <a href="#" data-content="history-dynamic-rigid-chart" class="history-dynamic-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">传感器图表-刚性平台</a>
                            <a href="#" data-content="history-dynamic-flexible-data" class="history-dynamic-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">历史数据-柔性平台</a>
                            <a href="#" data-content="history-dynamic-flexible-chart" class="history-dynamic-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">传感器图表-柔性平台</a>
                        </nav>
                    </div>

                    <div id="history-dynamic-rigid-data" class="history-dynamic-section mt-6">
                        <div class="space-y-3">
                            <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                    <select id="history-dynamic-sensor-select-rigid" class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">传感器名称</option>
                                        <option>AS1</option>
                                        <option>AS2</option>
                                        <option>AS3</option>
                                        <option>AS4</option>
                                    </select>
                                    <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                        <button class="history-dynamic-axis px-3 py-1.5 text-xs text-white bg-blue-500 btn" data-platform="rigid" data-axis="x">X方向</button>
                                        <button class="history-dynamic-axis px-3 py-1.5 text-xs text-gray-600 hover:bg-gray-50 btn" data-platform="rigid" data-axis="y">Y方向</button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <input id="history-dynamic-range-min-rigid" type="text" placeholder="加速度(下限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <span class="text-gray-300">~</span>
                                        <input id="history-dynamic-range-max-rigid" type="text" placeholder="加速度(上限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    </div>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input id="history-dynamic-start-rigid" type="text" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" placeholder="开始时间" readonly="readonly">
                                        <span class="text-gray-300">~</span>
                                        <input id="history-dynamic-end-rigid" type="text" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" placeholder="结束时间" readonly="readonly">
                                        <div class="flex items-center gap-2 md:ml-2">
                                            <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                            <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                                <button class="history-dynamic-quick bg-blue-500 px-3 py-1.5 text-white btn" data-platform="rigid" data-context="table" data-range="hour">1小时</button>
                                                <button class="history-dynamic-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="rigid" data-context="table" data-range="half">半天</button>
                                                <button class="history-dynamic-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="rigid" data-context="table" data-range="day">1天</button>
                                                <button class="history-dynamic-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="rigid" data-context="table" data-range="week">1周</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-auto flex items-center gap-2">
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                    </div>
                                </div>
                                <div class="border-t border-gray-200 bg-white">
                                    <div class="overflow-x-auto">
                                        <div class="table-responsive"><table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50 text-xs font-medium uppercase tracking-wide text-gray-500">
                                                <tr>
                                                    <th class="px-6 py-3 text-left">传感器名称</th>
                                                    <th class="px-6 py-3 text-left">X方向加速度(g)</th>
                                                    <th class="px-6 py-3 text-left">Y方向加速度(g)</th>
                                                    <th class="px-6 py-3 text-left">采集时间</th>
                                                </tr>
                                            </thead>
                                            <tbody id="history-dynamic-table-rigid" class="divide-y divide-gray-100 bg-white text-sm text-gray-700">
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS1</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001167</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001722</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 10:00:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS2</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001258</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000660</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:55:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS3</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001682</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000339</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:50:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS4</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001668</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000626</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:45:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS1</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000105</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000078</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:40:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS2</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000645</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000919</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:35:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS3</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001146</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001265</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:30:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS4</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000836</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001010</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:25:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS1</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000467</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001188</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:20:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS2</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001717</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001785</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:15:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS3</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000099</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000548</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:10:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS4</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001577</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001126</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:05:41</td>
        </tr>
    </tbody>
                                        </table></div>
                                    </div>
                                    <div class="flex flex-wrap items-center justify-between gap-3 border-t border-gray-100 px-4 py-3 text-sm text-gray-600">
                                        <div>共 <span id="history-dynamic-total-rigid">0</span> 条记录</div>
                                        <div class="flex flex-wrap items-center gap-3">
                                            <div class="flex items-center gap-2">
                                                <span>每页</span>
                                                <select class="h-8 rounded border border-gray-300 px-2 text-sm focus:border-blue-500 focus:ring-blue-500/40">
                                                    <option>10条</option>
                                                    <option>20条</option>
                                                    <option>50条</option>
                                                </select>
                                            </div>
                                            <div class="flex items-center gap-1">
                                                <button class="h-8 rounded border border-gray-300 px-3 text-sm text-gray-600 hover:border-blue-500 hover:text-blue-600 btn">&lt;</button>
                                                <button class="h-8 rounded border border-blue-500 bg-blue-500 px-3 text-sm font-medium text-white btn">1</button>
                                                <button class="h-8 rounded border border-gray-300 px-3 text-sm text-gray-600 hover:border-blue-500 hover:text-blue-600 btn">2</button>
                                                <button class="h-8 rounded border border-gray-300 px-3 text-sm text-gray-600 hover:border-blue-500 hover:text-blue-600 btn">3</button>
                                                <button class="h-8 rounded border border-gray-300 px-3 text-sm text-gray-600 hover:border-blue-500 hover:text-blue-600 btn">5</button>
                                                <button class="h-8 rounded border border-gray-300 px-3 text-sm text-gray-600 hover:border-blue-500 hover:text-blue-600 btn">&gt;</button>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <span>跳至</span>
                                                <input type="text" value="1" class="h-8 w-12 rounded border border-gray-300 px-2 text-center text-sm focus:border-blue-500 focus:ring-blue-500/40">
                                                <span>页</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="history-dynamic-rigid-chart" class="history-dynamic-section hidden mt-6">
                        <div class="flex flex-col gap-6 lg:flex-row">
                            <aside class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm" data-dynamic-platform="rigid">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-sm font-semibold text-gray-700">传感器列表</h3>
                                    <button type="button" class="rounded-md p-1 text-blue-500 hover:text-blue-600 btn" data-dynamic-refresh="rigid">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.23 7.75A6 6 0 0 0 6.3 9.7m.32-3.71L6.3 9.7m0 0h3.75m7.65 4.55A6 6 0 0 1 10.9 18l-.18-.01M17.7 14.3l.35 3.71m0 0h-3.75"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="history-dynamic-chart-sensors-rigid" class="space-y-2 text-sm text-gray-700">
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="0" checked>
                                        AS1
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="1" checked>
                                        AS2
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="2" checked>
                                        AS3
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="3" checked>
                                        AS4
                                    </label>
                                </div>
                            </aside>
                            <div class="flex-1 space-y-3">
                                <div class="rounded-lg border border-gray-200 bg-gray-50 p-3">
                                    <div class="flex flex-wrap items-center gap-2 md:gap-3">
                                        <div class="flex items-center gap-2">
                                            <input id="history-dynamic-chart-start-rigid" type="text" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" placeholder="开始时间" readonly="readonly">
                                            <span class="text-gray-300">~</span>
                                            <input id="history-dynamic-chart-end-rigid" type="text" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" placeholder="结束时间" readonly="readonly">
                                        </div>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-blue-500 px-4 text-sm font-medium text-blue-500 hover:bg-blue-50 btn">重置</button>
                                        <div class="ml-auto flex items-center gap-2">
                                            <button class="h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn">小时</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">半天</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1天</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1周</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="rounded-lg bg-white p-4 shadow-sm inclination-chart-card">
                                    <h3 class="mb-2 font-semibold text-gray-700">X方向加速度(g)</h3>
                                    <div class="h-64 chart-container chart-large"><canvas id="history-dynamic-chart-rigid-x"></canvas></div>
                                </div>
                                <div class="rounded-lg bg-white p-4 shadow-sm inclination-chart-card">
                                    <h3 class="mb-2 font-semibold text-gray-700">Y方向加速度(g)</h3>
                                    <div class="h-64 chart-container chart-large"><canvas id="history-dynamic-chart-rigid-y"></canvas></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="history-dynamic-flexible-data" class="history-dynamic-section hidden mt-6">
                        <div class="space-y-3">
                            <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                    <select id="history-dynamic-sensor-select-flexible" class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">传感器名称</option>
                                        <option>AS5</option>
                                        <option>AS6</option>
                                        <option>AS7</option>
                                        <option>AS8</option>
                                    </select>
                                    <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                        <button class="history-dynamic-axis px-3 py-1.5 text-xs text-white bg-blue-500 btn" data-platform="flexible" data-axis="x">X方向</button>
                                        <button class="history-dynamic-axis px-3 py-1.5 text-xs text-gray-600 hover:bg-gray-50 btn" data-platform="flexible" data-axis="y">Y方向</button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <input id="history-dynamic-range-min-flexible" type="text" placeholder="加速度(下限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <span class="text-gray-300">~</span>
                                        <input id="history-dynamic-range-max-flexible" type="text" placeholder="加速度(上限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    </div>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input id="history-dynamic-start-flexible" type="text" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" placeholder="开始时间" readonly="readonly">
                                        <span class="text-gray-300">~</span>
                                        <input id="history-dynamic-end-flexible" type="text" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" placeholder="结束时间" readonly="readonly">
                                        <div class="flex items-center gap-2 md:ml-2">
                                            <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                            <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                                <button class="history-dynamic-quick bg-blue-500 px-3 py-1.5 text-white btn" data-platform="flexible" data-context="table" data-range="hour">1小时</button>
                                                <button class="history-dynamic-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="flexible" data-context="table" data-range="half">半天</button>
                                                <button class="history-dynamic-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="flexible" data-context="table" data-range="day">1天</button>
                                                <button class="history-dynamic-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="flexible" data-context="table" data-range="week">1周</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-auto flex items-center gap-2">
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                    </div>
                                </div>
                                <div class="border-t border-gray-100">
                                    <div class="table-responsive"><table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50 text-xs font-medium uppercase tracking-wide text-gray-500">
                                            <tr>
                                                <th class="px-6 py-3 text-left">传感器名称</th>
                                                <th class="px-6 py-3 text-left">X方向加速度(g)</th>
                                                <th class="px-6 py-3 text-left">Y方向加速度(g)</th>
                                                <th class="px-6 py-3 text-left">采集时间</th>
                                            </tr>
                                        </thead>
                                        <tbody id="history-dynamic-table-flexible" class="divide-y divide-gray-100 bg-white text-sm text-gray-700">
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS5</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000676</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001300</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 10:00:41</td>
        </tr>
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS6</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001299</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001415</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:55:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS7</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001024</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001372</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:50:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS8</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000862</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001216</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:45:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS5</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001961</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001365</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:40:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS6</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001894</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001848</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:35:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS7</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001323</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001908</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:30:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS8</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001355</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000773</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:25:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS5</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001961</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000641</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:20:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS6</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000370</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000208</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:15:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS7</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000017</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000371</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:10:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">AS8</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.000849</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001282</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:05:41</td>
        </tr>
    </tbody>
                                    </table></div>
                                    <div class="flex flex-wrap items-center justify-between gap-3 border-t border-gray-100 px-6 py-3 text-xs text-gray-500">
                                        <span>共 <span id="history-dynamic-total-flexible">0</span> 条记录</span>
                                        <div class="flex flex-wrap items-center gap-2">
                                            <label class="flex items-center gap-1">每页
                                                <select class="rounded border border-gray-300 px-2 py-1 text-xs">
                                                    <option>10 条</option>
                                                    <option>20 条</option>
                                                    <option>50 条</option>
                                                </select>
                                            </label>
                                            <div class="flex items-center overflow-hidden rounded border border-gray-300">
                                                <button class="px-2 py-1 text-gray-500 hover:bg-gray-50 btn">&lt;</button>
                                                <button class="bg-blue-500 px-3 py-1 text-white btn">1</button>
                                                <button class="px-3 py-1 text-gray-500 hover:bg-gray-50 btn">2</button>
                                                <span class="px-2 text-gray-400">...</span>
                                                <button class="px-3 py-1 text-gray-500 hover:bg-gray-50 btn">5</button>
                                                <button class="px-2 py-1 text-gray-500 hover:bg-gray-50 btn">&gt;</button>
                                            </div>
                                            <div class="flex items-center gap-1">
                                                <span>跳至</span>
                                                <input type="text" value="1" class="h-7 w-12 rounded border border-gray-300 px-2 text-center">
                                                <span>页</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="history-dynamic-flexible-chart" class="history-dynamic-section hidden mt-6">
                        <div class="flex flex-col gap-6 lg:flex-row">
                            <aside class="w-full space-y-3 rounded-lg border border-gray-200 bg-gray-50 p-4 lg:w-60" data-dynamic-platform="flexible">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm font-semibold text-gray-700">传感器列表</span>
                                    <button type="button" class="rounded-md p-1 text-blue-500 hover:text-blue-600 btn" data-dynamic-refresh="flexible">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.23 7.75A6 6 0 0 0 6.3 9.7m.32-3.71L6.3 9.7m0 0h3.75m7.65 4.55A6 6 0 0 1 10.9 18l-.18-.01M17.7 14.3l.35 3.71m0 0h-3.75"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="history-dynamic-chart-sensors-flexible" class="space-y-2 text-sm text-gray-700">
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="0" checked>
                                        AS5
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="1" checked>
                                        AS6
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="2" checked>
                                        AS7
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="3" checked>
                                        AS8
                                    </label>
                                </div>
                            </aside>
                            <div class="flex-1 space-y-3">
                                <div class="rounded-lg border border-gray-200 bg-gray-50 p-3">
                                    <div class="flex flex-wrap items-center gap-2 md:gap-3">
                                        <div class="flex items-center gap-2">
                                            <input id="history-dynamic-chart-start-flexible" type="text" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" placeholder="开始时间" readonly="readonly">
                                            <span class="text-gray-300">~</span>
                                            <input id="history-dynamic-chart-end-flexible" type="text" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" placeholder="结束时间" readonly="readonly">
                                        </div>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-blue-500 px-4 text-sm font-medium text-blue-500 hover:bg-blue-50 btn">重置</button>
                                        <div class="ml-auto flex items-center gap-2">
                                            <button class="h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn">小时</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">半天</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1天</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1周</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="rounded-lg bg-white p-4 shadow-sm inclination-chart-card">
                                    <h3 class="mb-2 font-semibold text-gray-700">X方向加速度(g)</h3>
                                    <div class="h-64 chart-container chart-large"><canvas id="history-dynamic-chart-flexible-x"></canvas></div>
                                </div>
                                <div class="rounded-lg bg-white p-4 shadow-sm inclination-chart-card">
                                    <h3 class="mb-2 font-semibold text-gray-700">Y方向加速度(g)</h3>
                                    <div class="h-64 chart-container chart-large"><canvas id="history-dynamic-chart-flexible-y"></canvas></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <!-- 视图: 历史查询 - 倾角监测 -->
            <main id="history-inclination-view" class="page-view hidden">
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <div class="flex justify-between items-center border-b border-gray-200">
                        <nav class="flex flex-wrap gap-4" aria-label="Tabs" id="history-inclination-tabs">
                            <a href="#" data-content="history-inclination-rigid-data" class="history-inclination-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">历史数据-刚性平台</a>
                            <a href="#" data-content="history-inclination-rigid-chart" class="history-inclination-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">传感器图表-刚性平台</a>
                            <a href="#" data-content="history-inclination-flexible-data" class="history-inclination-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">历史数据-柔性平台</a>
                            <a href="#" data-content="history-inclination-flexible-chart" class="history-inclination-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">传感器图表-柔性平台</a>
                        </nav>
                    </div>

                    <div id="history-inclination-rigid-data" class="history-inclination-section mt-6">
                        <div class="space-y-3">
                            <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                    <select class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">传感器名称</option>
                                        <option>GRY01</option>
                                        <option>GRY02</option>
                                        <option>GRY03</option>
                                        <option>GRY04</option>
                                    </select>
                                    <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                        <button class="history-inclination-axis px-3 py-1.5 text-xs text-white bg-blue-500 btn" data-platform="rigid" data-axis="x">X方向</button>
                                        <button class="history-inclination-axis px-3 py-1.5 text-xs text-gray-600 hover:bg-gray-50 btn" data-platform="rigid" data-axis="y">Y方向</button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <input type="number" placeholder="倾角值(下限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <span class="text-gray-300">~</span>
                                        <input type="number" placeholder="倾角值(上限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    </div>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        <span class="text-gray-300">~</span>
                                        <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        <div class="flex items-center gap-2 md:ml-2">
                                            <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                            <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                                <button class="px-3 py-1.5 text-sm text-white bg-blue-500 btn">1小时</button>
                                                <button class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 btn">半天</button>
                                                <button class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 btn">1天</button>
                                                <button class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 btn">1周</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-auto flex items-center gap-2">
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                    </div>
                                </div>
                                <div class="border-t border-gray-200 bg-white">
                                    <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50 text-xs font-medium uppercase tracking-wide text-gray-500">
                                            <tr>
                                                <th class="px-6 py-3 text-left">传感器名称</th>
                                                <th class="px-6 py-3 text-left">位置</th>
                                                <th class="px-6 py-3 text-left">X方向倾角值(°)</th>
                                                <th class="px-6 py-3 text-left">Y方向倾角值(°)</th>
                                                <th class="px-6 py-3 text-left">采集时间</th>
                                            </tr>
                                        </thead>
                                        <tbody id="history-inclination-table-rigid" class="divide-y divide-gray-100 bg-white text-sm text-gray-700">
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ1</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-东南角</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.008645</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.009833</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 10:00:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ2</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-西南角</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.004978</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.006082</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:55:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ3</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-东北角</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.007646</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.002164</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:50:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ4</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-西北角</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.004913</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.006531</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:45:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ1</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-东南角</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000722</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.001936</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:40:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ2</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-西南角</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.003155</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.005438</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:35:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ3</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-东北角</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.003908</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.000796</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:30:41</td>
        </tr>
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ4</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-西北角</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.007603</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.004945</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:25:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ1</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-东南角</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.002974</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.007168</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:20:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ2</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-西南角</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.008368</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.002063</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:15:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ3</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-东北角</td>
            <td class="px-6 py-3 text-sm text-gray-700">-0.008402</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.006784</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:10:41</td>
        </tr>
    
        <tr>
            <td class="px-6 py-3 text-sm text-gray-700">QJ4</td>
            <td class="px-6 py-3 text-sm text-gray-500">刚性平台-西北角</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.002997</td>
            <td class="px-6 py-3 text-sm text-gray-700">0.001906</td>
            <td class="px-6 py-3 text-sm text-gray-500">2025-09-25 09:05:41</td>
        </tr>
    </tbody>
                                    </table>
                                    </div>
                                    <div class="flex flex-wrap items-center justify-between gap-3 border-t border-gray-100 px-6 py-3 text-xs text-gray-500">
                                        <span>共 85 条记录</span>
                                        <div class="flex items-center gap-2">
                                            <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&lt;</button>
                                            <div class="flex items-center gap-1">
                                                <button class="h-7 w-7 rounded border border-blue-500 bg-blue-50 text-blue-500 btn">1</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">2</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">3</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">4</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">5</button>
                                            </div>
                                            <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&gt;</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="history-inclination-rigid-chart" class="history-inclination-section hidden mt-6">
                        <div class="flex flex-col gap-6 lg:flex-row">
                            <aside class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm" data-inclination-platform="rigid">
                                <div class="mb-4 flex items-center justify-between">
                                    <span class="text-sm font-semibold text-gray-700">传感器列表</span>
                                    <button type="button" class="inline-flex h-8 items-center rounded-md border border-blue-500 px-3 text-xs font-medium text-blue-500 hover:bg-blue-50 btn" data-inclination-refresh="rigid">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.23 7.75A6 6 0 0 0 6.3 9.7m.32-3.71L6.3 9.7m0 0h3.75m7.65 4.55A6 6 0 0 1 10.9 18l-.18-.01M17.7 14.3l.35 3.71m0 0h-3.75"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="space-y-2 text-sm text-gray-600">
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="0" checked>
                                        QJ1
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="1" checked>
                                        QJ2
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="2" checked>
                                        QJ3
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="3" checked>
                                        QJ4
                                    </label>
                                </div>
                            </aside>
                            <div class="flex-1 space-y-3">
                                <div class="rounded-lg border border-gray-200 bg-gray-50 p-3">
                                    <div class="flex flex-wrap items-center gap-2 md:gap-3">
                                        <div class="flex items-center gap-2">
                                            <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                            <span class="text-gray-400">-</span>
                                            <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        </div>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-blue-500 px-4 text-sm font-medium text-blue-500 hover:bg-blue-50 btn">重置</button>
                                        <div class="ml-auto flex items-center gap-2">
                                            <button class="h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn">小时</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">半天</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1天</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1周</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="rounded-lg bg-white p-4 shadow-sm">
                                    <h3 class="mb-2 font-semibold text-gray-700">X方向倾角值(°)</h3>
                                    <div class="h-64"><canvas id="history-inclination-chart-rigid-x"></canvas></div>
                                </div>
                                <div class="rounded-lg bg-white p-4 shadow-sm">
                                    <h3 class="mb-2 font-semibold text-gray-700">Y方向倾角值(°)</h3>
                                    <div class="h-64"><canvas id="history-inclination-chart-rigid-y"></canvas></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="history-inclination-flexible-data" class="history-inclination-section hidden mt-6">
                        <div class="space-y-3">
                            <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                    <select class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">传感器名称</option>
                                        <option>QJ1</option>
                                        <option>QJ2</option>
                                        <option>QJ3</option>
                                        <option>QJ4</option>
                                    </select>
                                    <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                        <button class="history-inclination-axis px-3 py-1.5 text-xs text-white bg-blue-500 btn" data-platform="flexible" data-axis="x">X方向</button>
                                        <button class="history-inclination-axis px-3 py-1.5 text-xs text-gray-600 hover:bg-gray-50 btn" data-platform="flexible" data-axis="y">Y方向</button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <input type="number" placeholder="倾角值(下限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <span class="text-gray-300">~</span>
                                        <input type="number" placeholder="倾角值(上限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    </div>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        <span class="text-gray-300">~</span>
                                        <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        <div class="flex items-center gap-2 md:ml-2">
                                            <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                            <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                                <button class="px-3 py-1.5 text-sm text-white bg-blue-500 btn">1小时</button>
                                                <button class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 btn">半天</button>
                                                <button class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 btn">1天</button>
                                                <button class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 btn">1周</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-auto flex items-center gap-2">
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                    </div>
                                </div>
                                <div class="border-t border-gray-100">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50 text-xs font-medium uppercase tracking-wide text-gray-500">
                                            <tr>
                                                <th class="px-6 py-3 text-left">传感器名称</th>
                                                <th class="px-6 py-3 text-left">位置</th>
                                                <th class="px-6 py-3 text-left">X方向倾角值(°)</th>
                                                <th class="px-6 py-3 text-left">Y方向倾角值(°)</th>
                                                <th class="px-6 py-3 text-left">采集时间</th>
                                            </tr>
                                        </thead>
                                        <tbody id="history-inclination-table-flexible" class="divide-y divide-gray-100 bg-white text-sm text-gray-700"></tbody>
                                    </table>
                                    <div class="flex flex-wrap items-center justify-between gap-3 border-t border-gray-100 px-6 py-3 text-xs text-gray-500">
                                        <span>共 92 条记录</span>
                                        <div class="flex items-center gap-2">
                                            <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&lt;</button>
                                            <div class="flex items-center gap-1">
                                                <button class="h-7 w-7 rounded border border-blue-500 bg-blue-50 text-blue-500 btn">1</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">2</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">3</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">4</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">5</button>
                                            </div>
                                            <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&gt;</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="history-inclination-flexible-chart" class="history-inclination-section hidden mt-6">
                        <div class="flex flex-col gap-6 lg:flex-row">
                            <aside class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm" data-inclination-platform="flexible">
                                <div class="mb-4 flex items-center justify-between">
                                    <span class="text-sm font-semibold text-gray-700">传感器列表</span>
                                    <button type="button" class="inline-flex h-8 items-center rounded-md border border-blue-500 px-3 text-xs font-medium text-blue-500 hover:bg-blue-50 btn" data-inclination-refresh="flexible">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.23 7.75A6 6 0 0 0 6.3 9.7m.32-3.71L6.3 9.7m0 0h3.75m7.65 4.55A6 6 0 0 1 10.9 18l-.18-.01M17.7 14.3l.35 3.71m0 0h-3.75"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="space-y-2 text-sm text-gray-600">
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="0" checked>
                                        QJ1
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="1" checked>
                                        QJ2
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="2" checked>
                                        QJ3
                                    </label>
                                    <label class="flex items-center gap-2">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="3" checked>
                                        QJ4
                                    </label>
                                </div>
                            </aside>
                            <div class="flex-1 space-y-4">
                                <div class="rounded-lg border border-gray-200 bg-gray-50 p-4">
                                    <div class="flex flex-wrap items-center gap-3">
                                        <div class="flex items-center gap-2">
                                            <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                            <span class="text-gray-400">-</span>
                                            <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        </div>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-blue-500 px-4 text-sm font-medium text-blue-500 hover:bg-blue-50 btn">重置</button>
                                        <div class="ml-auto flex items-center gap-2">
                                            <button class="h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn">小时</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">半天</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1天</button>
                                            <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1周</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="rounded-lg bg-white p-4 shadow-sm">
                                    <h3 class="mb-2 font-semibold text-gray-700">X方向倾角值(°)</h3>
                                    <div class="h-64"><canvas id="history-inclination-chart-flexible-x"></canvas></div>
                                </div>
                                <div class="rounded-lg bg-white p-4 shadow-sm">
                                    <h3 class="mb-2 font-semibold text-gray-700">Y方向倾角值(°)</h3>
                                    <div class="h-64"><canvas id="history-inclination-chart-flexible-y"></canvas></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <!-- 视图: 历史查询 - 涂层监测 -->
            <main id="history-coating-view" class="page-view hidden">
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <div class="flex justify-between items-center border-b border-gray-200">
                        <nav class="flex flex-wrap gap-4" aria-label="Tabs" id="history-coating-tabs">
                            <a href="#" data-content="history-coating-rigid-data" class="history-coating-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">历史数据-刚性平台</a>
                            <a href="#" data-content="history-coating-rigid-chart" class="history-coating-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">传感器图表-刚性平台</a>
                            <a href="#" data-content="history-coating-flexible-data" class="history-coating-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">历史数据-柔性平台</a>
                            <a href="#" data-content="history-coating-flexible-chart" class="history-coating-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">传感器图表-柔性平台</a>
                        </nav>
                    </div>

                    <div id="history-coating-rigid-data" class="history-coating-section mt-6">
                        <div class="space-y-3">
                            <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                    <select class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">传感器名称</option>
                                        <option>CS1</option>
                                        <option>CS2</option>
                                        <option>CS3</option>
                                        <option>CS4</option>
                                    </select>
                                    <select class="h-9 w-40 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">指标类型</option>
                                        <option value="max">电流密度最大值</option>
                                        <option value="min">电流密度最小值</option>
                                        <option value="avg">电流密度平均值</option>
                                        <option value="rate">腐蚀速率</option>
                                    </select>
                                    <div class="flex items-center gap-2">
                                        <input type="number" placeholder="数值下限" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <span class="text-gray-300">~</span>
                                        <input type="number" placeholder="数值上限" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    </div>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        <span class="text-gray-300">~</span>
                                        <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        <div class="flex items-center gap-2 md:ml-2">
                                            <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                            <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                                <button class="bg-blue-500 px-3 py-1.5 text-white btn">1小时</button>
                                                <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">半天</button>
                                                <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">1天</button>
                                                <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">1周</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-auto flex items-center gap-2">
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                    </div>
                                </div>
                                <div class="border-t border-gray-200">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">传感器名称</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">电流密度最大值(pA/cm²)</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">电流密度最小值(pA/cm²)</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">电流密度平均值(pA/cm²)</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">腐蚀速率(um/Y)</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">采集时间</th>
                                            </tr>
                                        </thead>
                                        <tbody id="history-coating-table-rigid" class="divide-y divide-gray-200 bg-white text-sm text-gray-700">
                                        </tbody>
                                    </table>
                                    <div class="flex flex-col gap-2 border-t border-gray-200 px-6 py-3 text-xs text-gray-500 md:flex-row md:items-center md:justify-between">
                                        <span>共 85 条记录</span>
                                        <div class="flex items-center gap-2">
                                            <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&lt;</button>
                                            <div class="flex items-center gap-1">
                                                <button class="h-7 w-7 rounded border border-blue-500 bg-blue-50 text-blue-500 btn">1</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">2</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">3</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">4</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">5</button>
                                            </div>
                                            <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&gt;</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="history-coating-rigid-chart" class="history-coating-section hidden mt-6">
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 flex flex-wrap items-center gap-3">
                            <div class="flex items-center gap-2">
                                <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                <span class="text-gray-400">-</span>
                                <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                            </div>
                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                            <div class="ml-auto flex items-center gap-2">
                                <button class="h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn">小时</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">半天</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1天</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1周</button>
                            </div>
                        </div>
                        <div class="mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4">
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 flex items-center text-sm font-semibold text-blue-600">电流密度最大值(pA/cm²)</h3>
                                <div class="h-56"><canvas id="history-coating-chart-rigid-max"></canvas></div>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 flex items-center text-sm font-semibold text-red-500">电流密度最小值(pA/cm²)</h3>
                                <div class="h-56"><canvas id="history-coating-chart-rigid-min"></canvas></div>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 flex items-center text-sm font-semibold text-green-500">电流密度平均值(pA/cm²)</h3>
                                <div class="h-56"><canvas id="history-coating-chart-rigid-avg"></canvas></div>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 flex items-center text-sm font-semibold text-orange-500">腐蚀速率(um/Y)</h3>
                                <div class="h-56"><canvas id="history-coating-chart-rigid-rate"></canvas></div>
                            </div>
                        </div>
                    </div>
                    <div id="history-coating-flexible-data" class="history-coating-section hidden mt-6">
                        <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                            <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                <select class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">传感器名称</option>
                                    <option>CS5</option>
                                    <option>CS6</option>
                                    <option>CS7</option>
                                    <option>CS8</option>
                                </select>
                                <select class="h-9 w-40 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">指标类型</option>
                                    <option value="max">电流密度最大值</option>
                                    <option value="min">电流密度最小值</option>
                                    <option value="avg">电流密度平均值</option>
                                    <option value="rate">腐蚀速率</option>
                                </select>
                                <div class="flex items-center gap-2">
                                    <input type="number" placeholder="数值下限" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <span class="text-gray-300">~</span>
                                    <input type="number" placeholder="数值上限" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="flex flex-wrap items-center gap-2">
                                    <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                    <span class="text-gray-300">~</span>
                                    <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                    <div class="flex items-center gap-2 md:ml-2">
                                        <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                        <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                            <button class="bg-blue-500 px-3 py-1.5 text-white btn">1小时</button>
                                            <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">半天</button>
                                            <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">1天</button>
                                            <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">1周</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="ml-auto flex items-center gap-2">
                                    <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                    <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                    <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                </div>
                            </div>
                            <div class="border-t border-gray-100">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50 text-xs font-medium uppercase tracking-wide text-gray-500">
                                        <tr>
                                            <th class="px-6 py-3 text-left">传感器名称</th>
                                            <th class="px-6 py-3 text-left">电流密度最大值(pA/cm²)</th>
                                            <th class="px-6 py-3 text-left">电流密度最小值(pA/cm²)</th>
                                            <th class="px-6 py-3 text-left">电流密度平均值(pA/cm²)</th>
                                            <th class="px-6 py-3 text-left">腐蚀速率(um/Y)</th>
                                            <th class="px-6 py-3 text-left">采集时间</th>
                                        </tr>
                                    </thead>
                                    <tbody id="history-coating-table-flexible" class="divide-y divide-gray-100 bg-white text-sm text-gray-700"></tbody>
                                </table>
                                <div class="flex flex-wrap items-center justify-between gap-3 border-t border-gray-100 px-6 py-3 text-xs text-gray-500">
                                    <span>共 0 条记录</span>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <label class="flex items-center gap-1">每页
                                            <select class="rounded border border-gray-300 px-2 py-1 text-xs">
                                                <option>10 条</option>
                                                <option>20 条</option>
                                                <option>50 条</option>
                                            </select>
                                        </label>
                                        <div class="flex items-center overflow-hidden rounded border border-gray-300">
                                            <button class="px-2 py-1 text-gray-500 hover:bg-gray-50 btn">&lt;</button>
                                            <button class="bg-blue-500 px-3 py-1 text-white btn">1</button>
                                            <button class="px-3 py-1 text-gray-500 hover:bg-gray-50 btn">2</button>
                                            <span class="px-2 text-gray-400">...</span>
                                            <button class="px-3 py-1 text-gray-500 hover:bg-gray-50 btn">5</button>
                                            <button class="px-2 py-1 text-gray-500 hover:bg-gray-50 btn">&gt;</button>
                                        </div>
                                        <div class="flex items-center gap-1">
                                            <span>跳至</span>
                                            <input type="text" value="1" class="h-7 w-12 rounded border border-gray-300 px-2 text-center">
                                            <span>页</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="history-coating-flexible-chart" class="history-coating-section hidden mt-6">
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 flex flex-wrap items-center gap-3">
                            <div class="flex items-center gap-2">
                                <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                <span class="text-gray-400">-</span>
                                <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                            </div>
                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                            <div class="ml-auto flex items-center gap-2">
                                <button class="h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn">小时</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">半天</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1天</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1周</button>
                            </div>
                        </div>
                        <div class="mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4">
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 flex items-center text-sm font-semibold text-blue-600">电流密度最大值(pA/cm²)</h3>
                                <div class="h-56"><canvas id="history-coating-chart-flexible-max"></canvas></div>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 flex items-center text-sm font-semibold text-red-500">电流密度最小值(pA/cm²)</h3>
                                <div class="h-56"><canvas id="history-coating-chart-flexible-min"></canvas></div>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 flex items-center text-sm font-semibold text-green-500">电流密度平均值(pA/cm²)</h3>
                                <div class="h-56"><canvas id="history-coating-chart-flexible-avg"></canvas></div>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 flex items-center text-sm font-semibold text-orange-500">腐蚀速率(um/Y)</h3>
                                <div class="h-56"><canvas id="history-coating-chart-flexible-rate"></canvas></div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <!-- 视图: 历史查询 - 索力监测 -->
            <main id="history-cable-force-view" class="page-view hidden">
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <div class="flex justify-between items-center border-b border-gray-200">
                        <nav class="flex space-x-8" aria-label="Tabs" id="history-cable-force-tabs">
                            <a href="#" data-content="history-cable-force-data" class="history-cable-force-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">历史数据</a>
                            <a href="#" data-content="history-cable-force-chart" class="history-cable-force-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">索力监测-图表</a>
                        </nav>
                    </div>

                    <div id="history-cable-force-data" class="history-cable-force-content mt-6">
                        <div class="space-y-4">
                            <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                    <select class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">传感器名称</option>
                                        <option>CF1</option>
                                        <option>CF2</option>
                                        <option>CF3</option>
                                        <option>CF4</option>
                                    </select>
                                    <div class="flex items-center gap-2">
                                        <input type="number" placeholder="索力值(下限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <span class="text-gray-300">~</span>
                                        <input type="number" placeholder="索力值(上限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    </div>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        <span class="text-gray-300">~</span>
                                        <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                        <div class="flex flex-wrap items-center gap-1 md:gap-2 md:flex-nowrap md:ml-3">
                                            <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                            <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                                <button class="bg-blue-500 px-3 py-1.5 text-white btn">1小时</button>
                                                <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">半天</button>
                                                <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">1天</button>
                                                <button class="px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn">1周</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-auto flex items-center gap-2">
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                        <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                        <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                    </div>
                                </div>
                                <div class="mt-4 overflow-hidden rounded-lg border border-gray-200">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">传感器名称</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">位置</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">索力值(kN)</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">频率(Hz)</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">采集时间</th>
                                            </tr>
                                        </thead>
                                        <tbody id="history-cable-force-table" class="divide-y divide-gray-200 bg-white text-sm text-gray-700">
                                        </tbody>
                                    </table>
                                    <div class="flex flex-col gap-2 border-t border-gray-200 px-6 py-3 text-xs text-gray-500 md:flex-row md:items-center md:justify-between">
                                        <span>共 85 条记录</span>
                                        <div class="flex items-center gap-2">
                                            <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&lt;</button>
                                            <div class="flex items-center gap-1">
                                                <button class="h-7 w-7 rounded border border-blue-500 bg-blue-50 text-blue-500 btn">1</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">2</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">3</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">4</button>
                                                <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">5</button>
                                            </div>
                                            <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&gt;</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="history-cable-force-chart" class="history-cable-force-content hidden mt-6">
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 flex flex-wrap items-center gap-3">
                            <div class="flex items-center gap-2">
                                <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                <span class="text-gray-400">-</span>
                                <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                            </div>
                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                            <div class="ml-auto flex items-center gap-2">
                                <button class="h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn">小时</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">半天</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1天</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1周</button>
                            </div>
                        </div>
                        <div class="mt-4 grid grid-cols-1 lg:grid-cols-[220px_1fr] gap-4">
                            <aside class="bg-white border border-gray-200 rounded-lg p-4 max-h-96 overflow-y-auto">
                                <h3 class="text-sm font-semibold text-gray-700 mb-3">传感器</h3>
                                <div class="space-y-2 text-sm text-gray-600" id="history-cable-force-sensor-list"></div>
                            </aside>
                            <div class="space-y-4">
                                <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                    <h3 class="mb-2 font-semibold text-gray-700">索力(kN)</h3>
                                    <div class="h-56"><canvas id="history-cable-force-chart-tension"></canvas></div>
                                </div>
                                <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                    <h3 id="history-cable-force-spectrum-title" class="mb-2 font-semibold text-gray-700">频谱图</h3>
                                    <div class="h-56"><canvas id="history-cable-force-chart-spectrum"></canvas></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- 视图: 历史查询 - 听诊监测 -->
            <main id="history-acoustic-view" class="page-view hidden">
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <div class="flex justify-between items-center border-b border-gray-200">
                        <nav class="flex space-x-8" aria-label="Tabs">
                            <a href="#" class="main-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600" data-tab="data">历史数据</a>
                            <a href="#" class="main-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="chart">传感器图表</a>
                        </nav>
                    </div>

                    <div id="history-acoustic-data-content" class="main-content mt-6">
                        <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                            <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                <select class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">传感器名称</option>
                                    <option>AS1</option>
                                    <option>AS2</option>
                                    <option>AS3</option>
                                    <option>AS4</option>
                                </select>
                                <div class="flex items-center gap-2">
                                    <input type="number" placeholder="声音强度下限" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <span class="text-gray-300">~</span>
                                    <input type="number" placeholder="声音强度上限" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="flex items-center gap-2">
                                    <input type="number" placeholder="主频下限" class="h-9 w-28 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <span class="text-gray-300">~</span>
                                    <input type="number" placeholder="主频上限" class="h-9 w-28 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="flex flex-wrap items-center gap-2">
                                    <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                    <span class="text-gray-300">~</span>
                                    <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                </div>
                                <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                    <button class="px-3 py-1.5 text-xs text-white bg-blue-500 btn">近1小时</button>
                                    <button class="px-3 py-1.5 text-xs text-gray-600 hover:bg-gray-50 btn">近1天</button>
                                    <button class="px-3 py-1.5 text-xs text-gray-600 hover:bg-gray-50 btn">近1周</button>
                                </div>
                                <div class="ml-auto flex items-center gap-2">
                                    <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                    <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                    <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                </div>
                            </div>
                            <div class="border-t border-gray-200">
                                <div class="table-responsive"><table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50 text-xs font-medium uppercase tracking-wide text-gray-500">
                                        <tr>
                                            <th class="px-6 py-3 text-left">传感器名称</th>
                                            <th class="px-6 py-3 text-left">声音强度(dB)</th>
                                            <th class="px-6 py-3 text-left">主频(Hz)</th>
                                            <th class="px-6 py-3 text-left">采集时间</th>
                                        </tr>
                                    </thead>
                                    <tbody id="history-acoustic-table-rigid" class="divide-y divide-gray-100 bg-white text-sm text-gray-700"></tbody>
                                </table></div>
                            </div>
                        </div>
                    </div>
                    <div id="history-acoustic-chart-content" class="main-content hidden mt-6">
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 flex flex-wrap items-center gap-3">
                            <div class="flex items-center gap-2">
                                <input type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                <span class="text-gray-400">-</span>
                                <input type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                            </div>
                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                            <div class="ml-auto flex items-center gap-2">
                                <button class="h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn">小时</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">半天</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1天</button>
                                <button class="h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">1周</button>
                            </div>
                        </div>
                        <div class="mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4">
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 font-semibold text-gray-700">声音强度(dB)</h3>
                                <div class="h-56"><canvas id="history-acoustic-chart-rigid-intensity"></canvas></div>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                <h3 class="mb-2 font-semibold text-gray-700">频率(Hz)</h3>
                                <div class="h-56"><canvas id="history-acoustic-chart-rigid-frequency"></canvas></div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </main>

                <!-- 视图: 系统数据 -->
                <main id="data-view" class="page-view">
                    <!-- 预警信息卡片 -->
                    <div id="warning-info-container" class="bg-white p-4 rounded-lg shadow-md mb-4">
                        <!-- 动态预警信息将在这里加载 -->
                    </div>
                    <!-- 应变值图表 -->
                    <div class="bg-white p-4 rounded-lg shadow-md mb-4">
                                                        <h3 class="font-semibold text-gray-700 mb-2">应变值(μɛ)</h3>
                        <div class="h-48"><canvas id="strainChart"></canvas></div>
                    </div>
                    <!-- 动态响应图表 -->
                    <div class="bg-white p-4 rounded-lg shadow-md mb-4">
                        <h3 class="font-semibold text-gray-700 mb-2">动态响应(g)</h3>
                        <div class="h-48"><canvas id="dynamicResponseChart"></canvas></div>
                    </div>
                    <!-- 涂层监测 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-700 mb-2">涂层监测 - 刚性平台</h3>
                            <div class="flex items-center justify-around py-2">
                                <div class="relative w-32 h-32">
                                    <svg class="w-full h-full" viewBox="0 0 120 120"><circle cx="60" cy="60" r="50" fill="none" stroke="#dcfce7" stroke-width="16"></circle><circle cx="60" cy="60" r="50" fill="none" stroke="#22c55e" stroke-width="16" stroke-linecap="round" stroke-dasharray="314" stroke-dashoffset="15" transform="rotate(-90 60 60)"></circle></svg>
                                    <div class="absolute inset-0 flex items-center justify-center"><span class="text-xl font-bold text-gray-800">等级1</span></div>
                                </div>
                                <div class="flex flex-col space-y-2 text-xs">
                                    <div class="flex items-center"><span class="w-6 h-4 bg-green-500 mr-2 rounded-sm"></span><span>等级1 涂层完好</span></div>
                                    <div class="flex items-center"><span class="w-6 h-4 bg-yellow-400 mr-2 rounded-sm"></span><span>等级2 基本完好</span></div>
                                    <div class="flex items-center"><span class="w-6 h-4 bg-cyan-400 mr-2 rounded-sm"></span><span>等级3 部分破损</span></div>
                                    <div class="flex items-center"><span class="w-6 h-4 bg-red-500 mr-2 rounded-sm"></span><span>等级4 严重破损</span></div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-700 mb-2">涂层监测 - 柔性平台</h3>
                            <div class="flex items-center justify-around py-2">
                                <div class="relative w-32 h-32">
                                    <svg class="w-full h-full" viewBox="0 0 120 120"><circle cx="60" cy="60" r="50" fill="none" stroke="#dcfce7" stroke-width="16"></circle><circle cx="60" cy="60" r="50" fill="none" stroke="#22c55e" stroke-width="16" stroke-linecap="round" stroke-dasharray="314" stroke-dashoffset="15" transform="rotate(-90 60 60)"></circle></svg>
                                    <div class="absolute inset-0 flex items-center justify-center"><span class="text-xl font-bold text-gray-800">等级1</span></div>
                                </div>
                                <div class="flex flex-col space-y-2 text-xs">
                                    <div class="flex items-center"><span class="w-6 h-4 bg-green-500 mr-2 rounded-sm"></span><span>等级1 涂层完好</span></div>
                                    <div class="flex items-center"><span class="w-6 h-4 bg-yellow-400 mr-2 rounded-sm"></span><span>等级2 基本完好</span></div>
                                    <div class="flex items-center"><span class="w-6 h-4 bg-cyan-400 mr-2 rounded-sm"></span><span>等级3 部分破损</span></div>
                                    <div class="flex items-center"><span class="w-6 h-4 bg-red-500 mr-2 rounded-sm"></span><span>等级4 严重破损</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 倾角监测 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <div class="flex justify-between items-center mb-2">
                                 <h3 class="font-semibold text-gray-700">倾角监测 - 刚性平台</h3>
                                 <div class="text-sm font-mono"><span>X: <span class="text-blue-600 font-bold">-0.179</span></span><span class="ml-4">Y: <span class="text-blue-600 font-bold">-0.270</span></span></div>
                            </div>
                            <div class="h-48"><canvas id="tiltChartRigid"></canvas></div>
                        </div>
                         <div class="bg-white p-4 rounded-lg shadow-md">
                            <div class="flex justify-between items-center mb-2">
                                 <h3 class="font-semibold text-gray-700">倾角监测 - 柔性平台</h3>
                                 <div class="text-sm font-mono"><span>X: <span class="text-blue-600 font-bold">-0.139</span></span><span class="ml-4">Y: <span class="text-blue-600 font-bold">-0.192</span></span></div>
                            </div>
                            <div class="h-48"><canvas id="tiltChartFlexible"></canvas></div>
                        </div>
                    </div>
                    <!-- 听诊监测 & 索力 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-700 mb-2">听诊监测 - 刚性平台</h3>
                            <div class="h-48"><canvas id="auscultationChart"></canvas></div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-700 mb-2">索力(Kn) - 柔性平台</h3>
                            <div class="h-48"><canvas id="stressChart"></canvas></div>
                        </div>
                    </div>
                </main>

                <!-- 视图: 系统布设 -->
                <main id="layout-view" class="page-view hidden">
                     <div class="card bg-white p-6 rounded-lg shadow-md">
                        <!-- Tab Navigation -->
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                <a href="#" id="rigid-tab" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">
                                    刚性平台
                                </a>
                                <a href="#" id="flexible-tab" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                    柔性平台
                                </a>
                            </nav>
                        </div>

                        <div class="pt-6">
                            <!-- Rigid Platform Content -->
                            <div id="rigid-layout-content" class="tab-content">
                                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-4">
                                    <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">应力应变</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 8</p>
                                        <p class="text-sm text-gray-500">测点数量: 8</p>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">动态响应</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 4</p>
                                        <p class="text-sm text-gray-500">测点数量: 4</p>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">倾角监测</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 4</p>
                                        <p class="text-sm text-gray-500">测点数量: 4</p>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">涂层监测</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 1</p>
                                        <p class="text-sm text-gray-500">测点数量: 1</p>
                                    </div>
                                     <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">听诊监测</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 10</p>
                                        <p class="text-sm text-gray-500">测点数量: 10</p>
                                    </div>
                                </div>
                                <div class="bg-gray-800 p-2 rounded-lg shadow-md">
                                    <svg class="w-full h-auto rounded" viewBox="0 0 1200 600" xmlns="http://www.w3.org/2000/svg">
                            <rect width="1200" height="600" fill="#1a202c"/>
                            <text x="600" y="300" text-anchor="middle" dominant-baseline="middle" fill="white" font-size="24" font-family="Arial, sans-serif">刚性平台三维模型</text>
                        </svg>
                                </div>
                            </div>

                            <!-- Flexible Platform Content -->
                            <div id="flexible-layout-content" class="tab-content hidden">
                               <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-4">
                                    <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">应力应变</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 8</p>
                                        <p class="text-sm text-gray-500">测点数量: 8</p>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">动态响应</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 4</p>
                                        <p class="text-sm text-gray-500">测点数量: 4</p>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">倾角监测</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 4</p>
                                        <p class="text-sm text-gray-500">测点数量: 4</p>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">涂层监测</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 1</p>
                                        <p class="text-sm text-gray-500">测点数量: 1</p>
                                    </div>
                                     <div class="bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200">
                                        <h4 class="font-bold text-blue-600">索力监测</h4>
                                        <p class="text-sm text-gray-500">传感器数量: 8</p>
                                        <p class="text-sm text-gray-500">测点数量: 8</p>
                                    </div>
                                </div>
                                <div class="bg-gray-800 p-2 rounded-lg shadow-md">
                                    <svg class="w-full h-auto rounded" viewBox="0 0 1200 600" xmlns="http://www.w3.org/2000/svg">
                            <rect width="1200" height="600" fill="#1a202c"/>
                            <text x="600" y="300" text-anchor="middle" dominant-baseline="middle" fill="white" font-size="24" font-family="Arial, sans-serif">柔性平台三维模型</text>
                        </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- 视图: 实时监测 - 动态响应 -->
                <main id="dynamic-response-view" class="page-view hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <!-- Tab Navigation -->
                        <div class="flex justify-between items-center border-b border-gray-200">
                            <nav class="flex space-x-8" aria-label="Tabs" id="dynamic-response-tabs">
                                <a href="#" data-content="dynamic-response-data-content" class="dynamic-response-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">
                                    监测数据
                                </a>
                                <a href="#" data-content="dynamic-response-chart-content" class="dynamic-response-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                    传感器-图表
                                </a>
                            </nav>
                            <button class="text-blue-500">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>
                            </button>
                        </div>
                        
                        <!-- Tab Content -->
                        <div class="mt-6">
                            <!-- Data Table Content -->
                            <div id="dynamic-response-data-content" class="dynamic-response-content">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div>
                                        <h3 class="font-semibold text-gray-800 mb-2">刚性平台</h3>
                                        <table class="min-w-full divide-y divide-gray-200 border">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">传感器名称</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">X方向加速度 (g)</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Y方向加速度 (g)</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">采集时间</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200" id="dynamic-response-table-rigid">
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS1</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001167</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001722</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 10:00:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS2</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001258</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.000660</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 10:00:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS3</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001682</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.000339</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 10:00:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS4</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.001668</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.000626</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 10:00:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS1</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.000105</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.000078</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 09:59:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS2</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.000645</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.000919</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 09:59:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS3</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001146</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.001265</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 09:59:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS4</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.000836</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.001010</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 09:59:41</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-800 mb-2">柔性平台</h3>
                                        <table class="min-w-full divide-y divide-gray-200 border">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">传感器名称</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">X方向加速度 (g)</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Y方向加速度 (g)</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">采集时间</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200" id="dynamic-response-table-flexible">
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS5</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.000676</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001300</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 10:00:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS6</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001299</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001415</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 10:00:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS7</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.001024</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.001372</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 10:00:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS8</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.000862</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001216</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 10:00:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS5</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001961</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.001365</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 09:59:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS6</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001894</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.001848</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 09:59:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS7</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001323</td><td class="px-6 py-4 whitespace-nowrap text-sm">0.001908</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 09:59:41</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">AS8</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.001355</td><td class="px-6 py-4 whitespace-nowrap text-sm">-0.000773</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-25 09:59:41</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!-- Chart Content -->
                            <div id="dynamic-response-chart-content" class="dynamic-response-content hidden">
                                <!-- Nested Tab Navigation -->
                                <div class="border-b border-gray-200">
                                    <nav class="-mb-px flex space-x-6" id="dynamic-response-chart-tabs">
                                        <a href="#" data-content="rigid-dynamic-response-charts" class="dynamic-response-chart-tab whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">刚性平台</a>
                                        <a href="#" data-content="flexible-dynamic-response-charts" class="dynamic-response-chart-tab whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">柔性平台</a>
                                    </nav>
                                </div>
                                
                                <div class="mt-4">
                                    <!-- Rigid Platform Charts -->
                                    <div id="rigid-dynamic-response-charts" class="dynamic-response-chart-container">
                                        <div class="flex">
                                            <div class="w-48 border-r pr-4">
                                                <button class="flex items-center text-blue-600 mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>刷新</button>
                                                <div class="space-y-2" id="dynamic-response-chart-controls-rigid">
                                                    <label class="flex items-center"><input type="checkbox" data-index="0" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">AS1</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="1" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">AS2</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="2" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">AS3</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="3" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">AS4</span></label>
                                                </div>
                                            </div>
                                            <div class="flex-1 pl-4">
                                                <div class="mb-4"><h4 class="font-semibold text-gray-700 mb-2">X方向加速度 (g)</h4><div class="h-64"><canvas id="dynamicResponseLineChartX_rigid"></canvas></div></div>
                                                <div><h4 class="font-semibold text-gray-700 mb-2">Y方向加速度 (g)</h4><div class="h-64"><canvas id="dynamicResponseLineChartY_rigid"></canvas></div></div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Flexible Platform Charts -->
                                    <div id="flexible-dynamic-response-charts" class="dynamic-response-chart-container hidden">
                                        <div class="flex">
                                             <div class="w-48 border-r pr-4">
                                                <button class="flex items-center text-blue-600 mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>刷新</button>
                                                <div class="space-y-2" id="dynamic-response-chart-controls-flexible">
                                                    <label class="flex items-center"><input type="checkbox" data-index="0" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">AS5</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="1" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">AS6</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="2" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">AS7</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="3" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">AS8</span></label>
                                                </div>
                                            </div>
                                            <div class="flex-1 pl-4">
                                                <div class="mb-4"><h4 class="font-semibold text-gray-700 mb-2">X方向加速度 (g)</h4><div class="h-64"><canvas id="dynamicResponseLineChartX_flexible"></canvas></div></div>
                                                <div><h4 class="font-semibold text-gray-700 mb-2">Y方向加速度 (g)</h4><div class="h-64"><canvas id="dynamicResponseLineChartY_flexible"></canvas></div></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                 <!-- 视图: 应力应变 -->
                <main id="strain-view" class="page-view hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <!-- Tab Navigation -->
                        <div class="flex justify-between items-center border-b border-gray-200">
                            <nav class="flex space-x-8" aria-label="Tabs" id="strain-tabs">
                                <a href="#" data-content="strain-data-content" class="strain-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">
                                    监测数据
                                </a>
                                <a href="#" data-content="strain-chart-content" class="strain-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                    传感器-图表
                                </a>
                            </nav>
                            <button class="text-blue-500">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>
                            </button>
                        </div>
                        
                        <!-- Tab Content -->
                        <div class="mt-6">
                            <!-- Data Table Content -->
                            <div id="strain-data-content" class="strain-content">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div>
                                        <h3 class="font-semibold text-gray-800 mb-2">刚性平台</h3>
                                        <table class="min-w-full divide-y divide-gray-200 border">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">传感器名称</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">应变值 (μɛ)</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">采集时间</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200">
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS1</td><td class="px-6 py-4 whitespace-nowrap text-sm">-26.419</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS2</td><td class="px-6 py-4 whitespace-nowrap text-sm">-26.419</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS3</td><td class="px-6 py-4 whitespace-nowrap text-sm">-26.419</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS4</td><td class="px-6 py-4 whitespace-nowrap text-sm">-26.419</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS5</td><td class="px-6 py-4 whitespace-nowrap text-sm">-26.419</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS6</td><td class="px-6 py-4 whitespace-nowrap text-sm">-26.419</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS7</td><td class="px-6 py-4 whitespace-nowrap text-sm">-26.419</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS8</td><td class="px-6 py-4 whitespace-nowrap text-sm">-26.419</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-800 mb-2">柔性平台</h3>
                                        <table class="min-w-full divide-y divide-gray-200 border">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">传感器名称</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">应变值 (μɛ)</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">采集时间</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200">
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS1</td><td class="px-6 py-4 whitespace-nowrap text-sm">-25.112</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS2</td><td class="px-6 py-4 whitespace-nowrap text-sm">-25.112</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS3</td><td class="px-6 py-4 whitespace-nowrap text-sm">-25.112</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS4</td><td class="px-6 py-4 whitespace-nowrap text-sm">-25.112</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS5</td><td class="px-6 py-4 whitespace-nowrap text-sm">-25.112</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS6</td><td class="px-6 py-4 whitespace-nowrap text-sm">-25.112</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS7</td><td class="px-6 py-4 whitespace-nowrap text-sm">-25.112</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm">SS8</td><td class="px-6 py-4 whitespace-nowrap text-sm">-25.112</td><td class="px-6 py-4 whitespace-nowrap text-sm">2025-09-23 10:00</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!-- Chart Content -->
                            <div id="strain-chart-content" class="strain-content hidden">
                                <!-- Nested Tab Navigation -->
                                <div class="border-b border-gray-200">
                                    <nav class="-mb-px flex space-x-6" id="strain-chart-tabs">
                                        <a href="#" data-content="rigid-strain-charts" class="strain-chart-tab whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">刚性平台</a>
                                        <a href="#" data-content="flexible-strain-charts" class="strain-chart-tab whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">柔性平台</a>
                                    </nav>
                                </div>
                                
                                <div class="mt-4">
                                    <!-- Rigid Platform Charts -->
                                    <div id="rigid-strain-charts" class="strain-chart-container">
                                        <div class="flex">
                                            <div class="w-48 border-r pr-4">
                                                <button class="flex items-center text-blue-600 mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>刷新</button>
                                                <div class="space-y-2" id="strain-chart-controls-rigid">
                                                    <label class="flex items-center"><input type="checkbox" data-index="0" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS1</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="1" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS2</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="2" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS3</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="3" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS4</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="4" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS5</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="5" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS6</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="6" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS7</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="7" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS8</span></label>
                                                </div>
                                            </div>
                                            <div class="flex-1 pl-4">
                                                <div class="mb-4"><h4 class="font-semibold text-gray-700 mb-2">应变值 (μɛ)</h4><div class="h-64"><canvas id="strainLineChart1_rigid"></canvas></div></div>
                                                <div><div class="h-64"><canvas id="strainLineChart2_rigid"></canvas></div></div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Flexible Platform Charts -->
                                    <div id="flexible-strain-charts" class="strain-chart-container hidden">
                                        <div class="flex">
                                             <div class="w-48 border-r pr-4">
                                                <button class="flex items-center text-blue-600 mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>刷新</button>
                                                <div class="space-y-2" id="strain-chart-controls-flexible">
                                                    <label class="flex items-center"><input type="checkbox" data-index="0" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS1</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="1" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS2</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="2" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS3</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="3" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS4</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="4" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS5</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="5" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS6</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="6" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS7</span></label>
                                                    <label class="flex items-center"><input type="checkbox" data-index="7" class="form-checkbox h-4 w-4 text-blue-600" checked> <span class="ml-2">SS8</span></label>
                                                </div>
                                            </div>
                                            <div class="flex-1 pl-4">
                                                <div class="mb-4"><h4 class="font-semibold text-gray-700 mb-2">应变值 (μɛ)</h4><div class="h-64"><canvas id="strainLineChart1_flexible"></canvas></div></div>
                                                <div><div class="h-64"><canvas id="strainLineChart2_flexible"></canvas></div></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
                <!-- 视图: 倾角监测 -->
                <main id="tilt-view" class="page-view hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <!-- Main Tab Navigation for platforms -->
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex space-x-8" id="tilt-platform-tabs">
                                <a href="#" data-content="rigid-tilt-content" class="tilt-platform-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">刚性平台</a>
                                <a href="#" data-content="flexible-tilt-content" class="tilt-platform-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">柔性平台</a>
                            </nav>
                        </div>

                        <div class="mt-6">
                            <!-- Rigid Platform Content -->
                            <div id="rigid-tilt-content" class="tilt-platform-content">
                                <table class="min-w-full divide-y divide-gray-200 border mb-6">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">选择</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">传感器名称</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">位置</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">X方向倾角值(°)</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Y方向倾角值(°)</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">采集时间</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tilt-table-body-rigid" class="bg-white divide-y divide-gray-200">
                                        <!-- Rows will be generated by JS -->
                                    </tbody>
                                </table>
                                <div class="flex flex-wrap lg:flex-nowrap gap-6 items-center">
                                    <div class="flex-grow w-full lg:w-2/3 bg-gray-100 rounded-lg p-2 relative">
                                        <svg class="w-full h-auto rounded" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                                            <rect width="400" height="300" fill="#f3f4f6"/>
                                            <text x="200" y="150" text-anchor="middle" fill="#6b7280" font-family="Arial, sans-serif" font-size="16">三维模型占位符</text>
                                        </svg>
                                        <div id="tooltip-rigid" class="absolute bg-white p-3 rounded-lg shadow-lg text-sm transition-all duration-300 opacity-0 pointer-events-none">
                                            <!-- Tooltip content will be set by JS -->
                                        </div>
                                    </div>
                                    <div class="w-full lg:w-1/3 h-80">
                                        <canvas id="tiltChart_rigid"></canvas>
                                    </div>
                                </div>
                            </div>
                            <!-- Flexible Platform Content -->
                            <div id="flexible-tilt-content" class="tilt-platform-content hidden">
                                <table class="min-w-full divide-y divide-gray-200 border mb-6">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">选择</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">传感器名称</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">位置</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">X方向倾角值(°)</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Y方向倾角值(°)</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">采集时间</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tilt-table-body-flexible" class="bg-white divide-y divide-gray-200">
                                        <!-- Rows will be generated by JS -->
                                    </tbody>
                                </table>
                                <div class="flex flex-wrap lg:flex-nowrap gap-6 items-center">
                                    <div class="flex-grow w-full lg:w-2/3 bg-gray-100 rounded-lg p-2 relative">
                                         <svg class="w-full h-auto rounded" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                                             <rect width="400" height="300" fill="#f3f4f6"/>
                                             <text x="200" y="150" text-anchor="middle" fill="#6b7280" font-family="Arial, sans-serif" font-size="16">三维模型占位符</text>
                                         </svg>
                                         <div id="tooltip-flexible" class="absolute bg-white p-3 rounded-lg shadow-lg text-sm transition-all duration-300 opacity-0 pointer-events-none">
                                            <!-- Tooltip content will be set by JS -->
                                         </div>
                                    </div>
                                    <div class="w-full lg:w-1/3 h-80">
                                        <canvas id="tiltChart_flexible"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                 <!-- 视图: 索力监测 -->
                <main id="stress-view" class="page-view hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md card">
                        <!-- Tab Navigation -->
                        <div class="flex justify-between items-center border-b border-gray-200">
                            <nav class="flex space-x-8" aria-label="Tabs" id="stress-tabs">
                                <a href="#" data-content="stress-data-content" class="stress-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">
                                    监测数据
                                </a>
                                <a href="#" data-content="stress-chart-content" class="stress-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                    索力监测-图表
                                </a>
                            </nav>
                            <button class="text-blue-500">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>
                            </button>
                        </div>
                        
                        <!-- Tab Content -->
                        <div class="mt-6">
                            <!-- Data Table Content -->
                            <div id="stress-data-content" class="stress-content">
                                <div class="space-y-4">
                                    <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                        <div class="border-b border-gray-100 p-3">
                                            <h3 class="font-semibold text-gray-800 mb-3">柔性平台 - 实时索力监测数据</h3>
                                        </div>
                                        <div class="overflow-x-auto">
                                            <table class="min-w-full divide-y divide-gray-200">
                                                <thead class="bg-gray-50">
                                                    <tr>
                                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">传感器名称</th>
                                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">位置</th>
                                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">索力值(kN)</th>
                                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">频率(Hz)</th>
                                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">采集时间</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="stress-table-data" class="bg-white divide-y divide-gray-200 text-sm text-gray-700">
                                                    <tr><td class="px-6 py-4">CF1</td><td class="px-6 py-4 text-gray-500">柔性平台-东南</td><td class="px-6 py-4">1250.5</td><td class="px-6 py-4">1.12</td><td class="px-6 py-4"><span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">正常</span></td><td class="px-6 py-4 text-gray-500">2025-09-29 10:00:00</td></tr>
                                                    <tr><td class="px-6 py-4">CF2</td><td class="px-6 py-4 text-gray-500">柔性平台-西南</td><td class="px-6 py-4">1248.3</td><td class="px-6 py-4">1.08</td><td class="px-6 py-4"><span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">正常</span></td><td class="px-6 py-4 text-gray-500">2025-09-29 10:00:00</td></tr>
                                                    <tr><td class="px-6 py-4">CF3</td><td class="px-6 py-4 text-gray-500">柔性平台-东北</td><td class="px-6 py-4">1252.7</td><td class="px-6 py-4">1.15</td><td class="px-6 py-4"><span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">正常</span></td><td class="px-6 py-4 text-gray-500">2025-09-29 10:00:00</td></tr>
                                                    <tr><td class="px-6 py-4">CF4</td><td class="px-6 py-4 text-gray-500">柔性平台-西北</td><td class="px-6 py-4">1249.8</td><td class="px-6 py-4">1.09</td><td class="px-6 py-4"><span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">正常</span></td><td class="px-6 py-4 text-gray-500">2025-09-29 10:00:00</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Chart Content -->
                            <div id="stress-chart-content" class="stress-content hidden">
                                <div class="mt-4 grid grid-cols-1 lg:grid-cols-[220px_1fr] gap-4">
                                    <aside class="bg-white border border-gray-200 rounded-lg p-4 max-h-96 overflow-y-auto">
                                        <div class="flex items-center justify-between mb-3">
                                            <h3 class="text-sm font-semibold text-gray-700">传感器列表</h3>
                                            <button type="button" class="rounded-md p-1 text-blue-500 hover:text-blue-600 btn" id="stress-refresh-btn">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.23 7.75A6 6 0 0 0 6.3 9.7m.32-3.71L6.3 9.7m0 0h3.75m7.65 4.55A6 6 0 0 1 10.9 18l-.18-.01M17.7 14.3l.35 3.71m0 0h-3.75"></path>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="space-y-2 text-sm text-gray-600" id="stress-sensor-list">
                                            <label class="flex items-center gap-2">
                                                <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="0" checked>
                                                CF1
                                            </label>
                                            <label class="flex items-center gap-2">
                                                <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="1" checked>
                                                CF2
                                            </label>
                                            <label class="flex items-center gap-2">
                                                <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="2" checked>
                                                CF3
                                            </label>
                                            <label class="flex items-center gap-2">
                                                <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="3" checked>
                                                CF4
                                            </label>
                                        </div>
                                        
                                        <div class="mt-4 pt-3 border-t">
                                            <h4 class="text-sm font-medium text-gray-700 mb-2">频谱传感器选择</h4>
                                            <div class="space-y-2" id="spectrum-chart-controls">
                                                <label class="flex items-center">
                                                    <input type="radio" name="spectrum-sensor" value="0" class="form-radio h-4 w-4 text-blue-600" checked> 
                                                    <span class="ml-2">CF1</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="radio" name="spectrum-sensor" value="1" class="form-radio h-4 w-4 text-blue-600"> 
                                                    <span class="ml-2">CF2</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="radio" name="spectrum-sensor" value="2" class="form-radio h-4 w-4 text-blue-600"> 
                                                    <span class="ml-2">CF3</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="radio" name="spectrum-sensor" value="3" class="form-radio h-4 w-4 text-blue-600"> 
                                                    <span class="ml-2">CF4</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="mt-4 pt-3 border-t">
                                            <h4 class="text-sm font-medium text-gray-700 mb-2">当前传感器</h4>
                                            <div class="space-y-2 text-xs text-gray-600" id="current-sensor-info">
                                                <div class="flex justify-between">
                                                    <span>传感器:</span>
                                                    <span id="current-sensor-display" class="font-medium">CF1</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>索力值:</span>
                                                    <span id="current-tension-value" class="font-medium">1250.5 kN</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>基频:</span>
                                                    <span id="current-frequency" class="font-medium">1.12 Hz</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>状态:</span>
                                                    <span id="current-status" class="font-medium text-green-600">正常</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="mt-4 pt-3 border-t">
                                            <h4 class="text-sm font-medium text-gray-700 mb-2">频谱特征</h4>
                                            <div class="space-y-2 text-xs text-gray-600" id="spectrum-features">
                                                <div class="flex justify-between">
                                                    <span>基频:</span>
                                                    <span id="fundamental-freq" class="font-medium">1.2 Hz</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>最大幅值:</span>
                                                    <span id="max-amplitude" class="font-medium">0.006 m/s²</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>主要谐波:</span>
                                                    <span id="main-harmonics" class="font-medium">2.4, 3.6 Hz</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>振动等级:</span>
                                                    <span id="vibration-level" class="font-medium text-green-600">正常</span>
                                                </div>
                                            </div>
                                        </div>
                                    </aside>
                                    <div class="space-y-4">
                                        <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                            <h3 class="mb-2 font-semibold text-gray-700">索力值(kN) - 实时监测</h3>
                                            <div class="h-64"><canvas id="stress-chart-tension"></canvas></div>
                                        </div>
                                        <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                                            <div class="flex items-center justify-between mb-2">
                                                <h3 id="spectrum-chart-title" class="font-semibold text-gray-700">频谱图 - CF1</h3>
                                                <div class="flex items-center gap-3">
                                                    <div class="flex items-center gap-2 text-sm text-gray-600">
                                                        <label for="time-range-select" class="text-xs">时间范围:</label>
                                                        <select id="time-range-select" class="text-xs border border-gray-300 rounded px-2 py-1">
                                                            <option value="30">最近30分钟</option>
                                                            <option value="60">最近1小时</option>
                                                            <option value="180">最近3小时</option>
                                                            <option value="360">最近6小时</option>
                                                        </select>
                                                    </div>
                                                    <div class="flex items-center gap-2 text-sm text-gray-600">
                                                        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                                        <span class="text-xs">每5分钟更新</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="h-56"><canvas id="stress-chart-spectrum"></canvas></div>
                                            <div class="mt-2 text-xs text-gray-500 text-center">
                                                历史频谱分析 | 选择左侧传感器查看不同位置的频谱特征 | 支持缩放和平移操作
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
                <!-- 视图: 涂层监测 -->
                <main id="coating-view" class="page-view hidden">
                     <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex space-x-8" id="coating-platform-tabs">
                                <a href="#" data-content="rigid-coating-content" class="coating-platform-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">刚性平台</a>
                                <a href="#" data-content="flexible-coating-content" class="coating-platform-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">柔性平台</a>
                            </nav>
                        </div>
                        <div class="mt-6">
                            <!-- Rigid Platform Content -->
                            <div id="rigid-coating-content" class="coating-platform-content">
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                                    <!-- Stat Cards -->
                                    <div class="bg-blue-50 p-4 rounded-lg flex justify-between items-center"><div class="text-gray-600"><span>电流密度最大值</span><p class="text-2xl font-bold text-black">12.78</p><span class="text-xs">pA/cm²</span></div><div class="bg-blue-200 rounded-full p-2"><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div></div>
                                    <div class="bg-green-50 p-4 rounded-lg flex justify-between items-center"><div class="text-gray-600"><span>电流密度最小值</span><p class="text-2xl font-bold text-black">2.09</p><span class="text-xs">pA/cm²</span></div><div class="bg-green-200 rounded-full p-2"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 17l-4.5-4.5L2 14m12-4l-4.5-4.5L8 7m8 4H4"></path></svg></div></div>
                                    <div class="bg-yellow-50 p-4 rounded-lg flex justify-between items-center"><div class="text-gray-600"><span>电流密度平均值</span><p class="text-2xl font-bold text-black">7.30</p><span class="text-xs">pA/cm²</span></div><div class="bg-yellow-200 rounded-full p-2"><svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg></div></div>
                                    <div class="bg-red-50 p-4 rounded-lg flex justify-between items-center"><div class="text-gray-600"><span>腐蚀速率</span><p class="text-2xl font-bold text-black">0.077</p><span class="text-xs">um/Y</span></div><div class="bg-red-200 rounded-full p-2"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div></div>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">涂层评价等级</h3>
                                <div class="flex items-center justify-around py-4">
                                    <div class="relative w-40 h-40"><svg class="w-full h-full" viewBox="0 0 120 120"><circle cx="60" cy="60" r="50" fill="none" stroke="#dcfce7" stroke-width="16"></circle><circle cx="60" cy="60" r="50" fill="none" stroke="#22c55e" stroke-width="16" stroke-linecap="round" stroke-dasharray="314" stroke-dashoffset="15" transform="rotate(-90 60 60)"></circle></svg><div class="absolute inset-0 flex items-center justify-center"><span class="text-2xl font-bold text-gray-800">等级1</span></div></div>
                                    <div class="flex flex-col space-y-3 text-sm">
                                        <div class="flex items-center"><span class="w-8 h-5 bg-green-500 mr-3 rounded-sm"></span><span>等级1 涂层完好</span></div>
                                        <div class="flex items-center"><span class="w-8 h-5 bg-yellow-400 mr-3 rounded-sm"></span><span>等级2 基本完好</span></div>
                                        <div class="flex items-center"><span class="w-8 h-5 bg-cyan-400 mr-3 rounded-sm"></span><span>等级3 部分破损</span></div>
                                        <div class="flex items-center"><span class="w-8 h-5 bg-red-500 mr-3 rounded-sm"></span><span>等级4 严重破损</span></div>
                                    </div>
                                </div>
                            </div>
                             <!-- Flexible Platform Content -->
                            <div id="flexible-coating-content" class="coating-platform-content hidden">
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                                    <!-- Stat Cards -->
                                    <div class="bg-blue-50 p-4 rounded-lg flex justify-between items-center"><div class="text-gray-600"><span>电流密度最大值</span><p class="text-2xl font-bold text-black">11.92</p><span class="text-xs">pA/cm²</span></div><div class="bg-blue-200 rounded-full p-2"><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div></div>
                                    <div class="bg-green-50 p-4 rounded-lg flex justify-between items-center"><div class="text-gray-600"><span>电流密度最小值</span><p class="text-2xl font-bold text-black">1.88</p><span class="text-xs">pA/cm²</span></div><div class="bg-green-200 rounded-full p-2"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 17l-4.5-4.5L2 14m12-4l-4.5-4.5L8 7m8 4H4"></path></svg></div></div>
                                    <div class="bg-yellow-50 p-4 rounded-lg flex justify-between items-center"><div class="text-gray-600"><span>电流密度平均值</span><p class="text-2xl font-bold text-black">6.95</p><span class="text-xs">pA/cm²</span></div><div class="bg-yellow-200 rounded-full p-2"><svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg></div></div>
                                    <div class="bg-red-50 p-4 rounded-lg flex justify-between items-center"><div class="text-gray-600"><span>腐蚀速率</span><p class="text-2xl font-bold text-black">0.072</p><span class="text-xs">um/Y</span></div><div class="bg-red-200 rounded-full p-2"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div></div>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">涂层评价等级</h3>
                                <div class="flex items-center justify-around py-4">
                                    <div class="relative w-40 h-40"><svg class="w-full h-full" viewBox="0 0 120 120"><circle cx="60" cy="60" r="50" fill="none" stroke="#dcfce7" stroke-width="16"></circle><circle cx="60" cy="60" r="50" fill="none" stroke="#22c55e" stroke-width="16" stroke-linecap="round" stroke-dasharray="314" stroke-dashoffset="15" transform="rotate(-90 60 60)"></circle></svg><div class="absolute inset-0 flex items-center justify-center"><span class="text-2xl font-bold text-gray-800">等级1</span></div></div>
                                    <div class="flex flex-col space-y-3 text-sm">
                                        <div class="flex items-center"><span class="w-8 h-5 bg-green-500 mr-3 rounded-sm"></span><span>等级1 涂层完好</span></div>
                                        <div class="flex items-center"><span class="w-8 h-5 bg-yellow-400 mr-3 rounded-sm"></span><span>等级2 基本完好</span></div>
                                        <div class="flex items-center"><span class="w-8 h-5 bg-cyan-400 mr-3 rounded-sm"></span><span>等级3 部分破损</span></div>
                                        <div class="flex items-center"><span class="w-8 h-5 bg-red-500 mr-3 rounded-sm"></span><span>等级4 严重破损</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
                 <!-- 视图: 听诊监测 -->
                <main id="auscultation-view" class="page-view hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h2 class="text-xl font-bold">听诊监测</h2>
                        <p class="mt-4">此页面内容待定。</p>
                    </div>
                </main>
                <!-- 视图: 历史查询 - 应力应变 -->
                <main id="history-strain-view" class="page-view hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md card">
                        <div class="flex justify-between items-center border-b border-gray-200">
                            <nav class="flex space-x-8" aria-label="Tabs" id="history-strain-tabs">
                                <a href="#" data-content="history-strain-rigid-data" class="history-strain-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600">历史数据-刚性平台</a>
                                <a href="#" data-content="history-strain-rigid-chart" class="history-strain-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">传感器图表-刚性平台</a>
                                <a href="#" data-content="history-strain-flexible-data" class="history-strain-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">历史数据-柔性平台</a>
                                <a href="#" data-content="history-strain-flexible-chart" class="history-strain-tab whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">传感器图表-柔性平台</a>
                            </nav>
                        </div>

                        <!-- 历史数据-刚性平台 -->
                        <div id="history-strain-rigid-data" class="history-strain-content mt-6">
                            <div class="space-y-3">
                                <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                    <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                        <select id="history-strain-sensor-select-rigid" class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="">传感器名称</option>
                                            <option>SS1</option>
                                            <option>SS2</option>
                                            <option>SS3</option>
                                            <option>SS4</option>
                                            <option>SS5</option>
                                            <option>SS6</option>
                                            <option>SS7</option>
                                            <option>SS8</option>
                                        </select>
                                        <div class="flex items-center gap-2">
                                            <input id="history-strain-range-min-rigid" type="number" placeholder="应变值(下限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <span class="text-gray-300">~</span>
                                            <input id="history-strain-range-max-rigid" type="number" placeholder="应变值(上限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        </div>
                                        <div class="flex flex-wrap items-center gap-2">
                                            <input id="history-strain-start-rigid" type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                            <span class="text-gray-300">~</span>
                                            <input id="history-strain-end-rigid" type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                            <div class="flex items-center gap-2 md:ml-2">
                                                <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                                <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                                    <button class="history-strain-quick bg-blue-500 px-3 py-1.5 text-white btn" data-platform="rigid" data-context="table" data-range="hour">1小时</button>
                                                    <button class="history-strain-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="rigid" data-context="table" data-range="half">半天</button>
                                                    <button class="history-strain-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="rigid" data-context="table" data-range="day">1天</button>
                                                    <button class="history-strain-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="rigid" data-context="table" data-range="week">1周</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ml-auto flex items-center gap-2">
                                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                            <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                        </div>
                                    </div>
                                    <div class="mt-4 overflow-hidden rounded-lg border border-gray-200">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">传感器名称</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">位置</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">应变值 (μɛ)</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">采集时间</th>
                                                </tr>
                                            </thead>
                                            <tbody id="history-strain-table-rigid" class="divide-y divide-gray-200 bg-white text-sm text-gray-700">
                                            </tbody>
                                        </table>
                                        <div class="flex flex-col gap-2 border-t border-gray-200 px-6 py-3 text-xs text-gray-500 md:flex-row md:items-center md:justify-between">
                                            <span>共 <span id="history-strain-total-rigid">85</span> 条记录</span>
                                            <div class="flex items-center gap-2">
                                                <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&lt;</button>
                                                <div class="flex items-center gap-1">
                                                    <button class="h-7 w-7 rounded border border-blue-500 bg-blue-50 text-blue-500 btn">1</button>
                                                    <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">2</button>
                                                    <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">3</button>
                                                    <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">4</button>
                                                    <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">5</button>
                                                </div>
                                                <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&gt;</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 传感器图表-刚性平台 -->
                        <div id="history-strain-rigid-chart" class="history-strain-content hidden mt-6">
                            <div class="flex flex-col gap-6 lg:flex-row">
                                <aside class="w-full space-y-4 rounded-lg border border-gray-200 bg-gray-50 p-4 lg:w-60">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm font-medium text-gray-700">传感器列表</span>
                                        <button id="history-strain-refresh-rigid" class="rounded-md p-1 text-blue-500 hover:text-blue-600 btn">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M16.23 7.75A6 6 0 0 0 6.3 9.7m.32-3.71L6.3 9.7m0 0h3.75m7.65 4.55A6 6 0 0 1 10.9 18l-.18-.01M17.7 14.3l.35 3.71m0 0h-3.75"></path>
                                            </svg>
                                        </button>
                                    </div>
                                    <div id="history-strain-chart-sensors-rigid" class="space-y-2 text-sm text-gray-600">
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="0" checked="">
                                            SS1
                                        </label>
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="1" checked="">
                                            SS2
                                        </label>
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="2" checked="">
                                            SS3
                                        </label>
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="3" checked="">
                                            SS4
                                        </label>
                                    </div>
                                </aside>
                                <div class="flex-1 space-y-4">
                                    <div class="rounded-lg border border-gray-200 bg-gray-50 p-3">
                                        <div class="flex flex-wrap items-center gap-2 md:gap-3">
                                            <div class="flex items-center gap-2">
                                                <input id="history-strain-chart-start-rigid" type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                                <span class="text-gray-400">-</span>
                                                <input id="history-strain-chart-end-rigid" type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                            </div>
                                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                            <button class="inline-flex h-9 items-center rounded-md border border-blue-500 px-4 text-sm font-medium text-blue-500 hover:bg-blue-50 btn">重置</button>
                                            <div class="ml-auto flex items-center gap-2">
                                                <button class="history-strain-quick h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn" data-platform="rigid" data-context="chart" data-range="hour">小时</button>
                                                <button class="history-strain-quick h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn" data-platform="rigid" data-context="chart" data-range="half">半天</button>
                                                <button class="history-strain-quick h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn" data-platform="rigid" data-context="chart" data-range="day">1天</button>
                                                <button class="history-strain-quick h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn" data-platform="rigid" data-context="chart" data-range="week">1周</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-lg bg-white p-4 shadow-sm">
                                        <h3 class="mb-2 font-semibold text-gray-700">应变值 (μɛ)</h3>
                                        <div class="h-64"><canvas id="history-strain-chart1-rigid"></canvas></div>
                                    </div>
                                    <div class="rounded-lg bg-white p-4 shadow-sm">
                                        <h3 class="mb-2 font-semibold text-gray-700">应变值 (μɛ)</h3>
                                        <div class="h-64"><canvas id="history-strain-chart2-rigid"></canvas></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 历史数据-柔性平台 -->
                        <div id="history-strain-flexible-data" class="history-strain-content hidden mt-6">
                            <div class="space-y-3">
                                <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
                                    <div class="flex flex-wrap items-center gap-2 md:gap-3 border-b border-gray-100 p-3">
                                        <select id="history-strain-sensor-select-flexible" class="h-9 w-36 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="">传感器名称</option>
                                            <option>FS1</option>
                                            <option>FS2</option>
                                            <option>FS3</option>
                                            <option>FS4</option>
                                            <option>FS5</option>
                                            <option>FS6</option>
                                            <option>FS7</option>
                                            <option>FS8</option>
                                        </select>
                                        <div class="flex items-center gap-2">
                                            <input id="history-strain-range-min-flexible" type="number" placeholder="应变值(下限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <span class="text-gray-300">~</span>
                                            <input id="history-strain-range-max-flexible" type="number" placeholder="应变值(上限)" class="h-9 w-32 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        </div>
                                        <div class="flex flex-wrap items-center gap-2">
                                            <input id="history-strain-start-flexible" type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                            <span class="text-gray-300">~</span>
                                            <input id="history-strain-end-flexible" type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                            <div class="flex items-center gap-2 md:ml-2">
                                                <span class="text-sm text-gray-600 whitespace-nowrap">快捷:</span>
                                                <div class="inline-flex overflow-hidden rounded-md border border-gray-200">
                                                    <button class="history-strain-quick bg-blue-500 px-3 py-1.5 text-white btn" data-platform="flexible" data-context="table" data-range="hour">1小时</button>
                                                    <button class="history-strain-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="flexible" data-context="table" data-range="half">半天</button>
                                                    <button class="history-strain-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="flexible" data-context="table" data-range="day">1天</button>
                                                    <button class="history-strain-quick px-3 py-1.5 text-gray-600 hover:bg-gray-50 btn" data-platform="flexible" data-context="table" data-range="week">1周</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="ml-auto flex items-center gap-2">
                                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                            <button class="inline-flex h-9 items-center rounded-md border border-gray-300 px-4 text-sm font-medium text-gray-600 hover:bg-gray-50 btn">重置</button>
                                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500/10 px-4 text-sm font-medium text-blue-500 hover:bg-blue-100 btn">导出</button>
                                        </div>
                                    </div>
                                    <div class="mt-4 overflow-hidden rounded-lg border border-gray-200">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">传感器名称</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">位置</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">应变值 (μɛ)</th>
                                                    <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">采集时间</th>
                                                </tr>
                                            </thead>
                                            <tbody id="history-strain-table-flexible" class="divide-y divide-gray-200 bg-white text-sm text-gray-700">
                                            </tbody>
                                        </table>
                                        <div class="flex flex-col gap-2 border-t border-gray-200 px-6 py-3 text-xs text-gray-500 md:flex-row md:items-center md:justify-between">
                                            <span>共 <span id="history-strain-total-flexible">92</span> 条记录</span>
                                            <div class="flex items-center gap-2">
                                                <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&lt;</button>
                                                <div class="flex items-center gap-1">
                                                    <button class="h-7 w-7 rounded border border-blue-500 bg-blue-50 text-blue-500 btn">1</button>
                                                    <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">2</button>
                                                    <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">3</button>
                                                    <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">4</button>
                                                    <button class="h-7 w-7 rounded border border-transparent text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">5</button>
                                                </div>
                                                <button class="h-7 w-7 rounded border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600 btn">&gt;</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 传感器图表-柔性平台 -->
                        <div id="history-strain-flexible-chart" class="history-strain-content hidden mt-6">
                            <div class="flex flex-col gap-6 lg:flex-row">
                                <aside class="w-full space-y-4 rounded-lg border border-gray-200 bg-gray-50 p-4 lg:w-60">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm font-medium text-gray-700">传感器列表</span>
                                        <button id="history-strain-refresh-flexible" class="rounded-md p-1 text-blue-500 hover:text-blue-600 btn">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-4 w-4">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M16.23 7.75A6 6 0 0 0 6.3 9.7m.32-3.71L6.3 9.7m0 0h3.75m7.65 4.55A6 6 0 0 1 10.9 18l-.18-.01M17.7 14.3l.35 3.71m0 0h-3.75"></path>
                                            </svg>
                                        </button>
                                    </div>
                                    <div id="history-strain-chart-sensors-flexible" class="space-y-2 text-sm text-gray-600">
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="0" checked="">
                                            FS1
                                        </label>
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="1" checked="">
                                            FS2
                                        </label>
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="2" checked="">
                                            FS3
                                        </label>
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" class="h-4 w-4 text-blue-600" data-index="3" checked="">
                                            FS4
                                        </label>
                                    </div>
                                </aside>
                                <div class="flex-1 space-y-4">
                                    <div class="rounded-lg border border-gray-200 bg-gray-50 p-3">
                                        <div class="flex flex-wrap items-center gap-2 md:gap-3">
                                            <div class="flex items-center gap-2">
                                                <input id="history-strain-chart-start-flexible" type="text" placeholder="开始时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                                <span class="text-gray-400">-</span>
                                                <input id="history-strain-chart-end-flexible" type="text" placeholder="结束时间" class="datepicker h-9 w-44 rounded-md border border-gray-300 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 flatpickr-input" readonly="readonly">
                                            </div>
                                            <button class="inline-flex h-9 items-center rounded-md bg-blue-500 px-4 text-sm font-medium text-white hover:bg-blue-600 btn">搜索</button>
                                            <button class="inline-flex h-9 items-center rounded-md border border-blue-500 px-4 text-sm font-medium text-blue-500 hover:bg-blue-50 btn">重置</button>
                                            <div class="ml-auto flex items-center gap-2">
                                                <button class="history-strain-quick h-9 rounded-md border border-blue-500 bg-blue-50 px-3 text-sm font-medium text-blue-500 btn" data-platform="flexible" data-context="chart" data-range="hour">小时</button>
                                                <button class="history-strain-quick h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn" data-platform="flexible" data-context="chart" data-range="half">半天</button>
                                                <button class="history-strain-quick h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn" data-platform="flexible" data-context="chart" data-range="day">1天</button>
                                                <button class="history-strain-quick h-9 rounded-md border border-transparent px-3 text-sm font-medium text-gray-500 hover:border-blue-500 hover:text-blue-600 btn" data-platform="flexible" data-context="chart" data-range="week">1周</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-lg bg-white p-4 shadow-sm">
                                        <h3 class="mb-2 font-semibold text-gray-700">应变值 (μɛ)</h3>
                                        <div class="h-64"><canvas id="history-strain-chart1-flexible"></canvas></div>
                                    </div>
                                    <div class="rounded-lg bg-white p-4 shadow-sm">
                                        <h3 class="mb-2 font-semibold text-gray-700">应变值 (μɛ)</h3>
                                        <div class="h-64"><canvas id="history-strain-chart2-flexible"></canvas></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- 页面导航逻辑 ---
            const pageViews = document.querySelectorAll('.page-view');
            const menuLinks = document.querySelectorAll('.menu-link');
            const breadcrumb = document.getElementById('breadcrumb');
            let dataChartsInitialized = false;
            let strainChartsInitialized = false;
            let dynamicResponseChartsInitialized = false;
            let tiltChartsInitialized = false;
            let stressChartsInitialized = false;
            let coatingChartsInitialized = false;
            let auscultationChartsInitialized = false;
            let historyStrainChartsInitialized = false;
            let historyDynamicChartsInitialized = false;
            let historyInclinationChartsInitialized = false;
            let historyCoatingChartsInitialized = false;
            let historyCableForceChartsInitialized = false;
            let historyAcousticChartsInitialized = false;

            function renderBreadcrumb(text) {
                if (!breadcrumb) {
                    return;
                }
                const parts = (text || '').split('/').map(part => part.trim()).filter(Boolean);
                if (!parts.length) {
                    breadcrumb.textContent = '';
                    return;
                }

                breadcrumb.innerHTML = '';
                parts.forEach((part, index) => {
                    const item = document.createElement('span');
                    item.className = 'crumb-item';
                    item.textContent = part || '';
                    breadcrumb.appendChild(item);
                    if (index < parts.length - 1) {
                        const separator = document.createElement('span');
                        separator.className = 'crumb-separator';
                        separator.textContent = '/';
                        breadcrumb.appendChild(separator);
                    }
                });
            }
            function navigateTo(viewId, breadcrumbText, clickedLink) {
                pageViews.forEach(view => view.classList.add('hidden'));
                const targetView = document.getElementById(viewId);
                if (targetView) targetView.classList.remove('hidden');

                renderBreadcrumb(breadcrumbText);
                
                document.querySelectorAll('.menu-link.active').forEach(el => el.classList.remove('active'));
                if (clickedLink) {
                    clickedLink.classList.add('active');
                    const parentDetails = clickedLink.closest('details');
                    if (parentDetails) {
                        parentDetails.setAttribute('open', 'true');
                    }
                }

                if (viewId === 'data-view' && !dataChartsInitialized) {
                    initializeDataCharts();
                    dataChartsInitialized = true;
                    loadWarningData(); // 加载预警信息数据
                }
                if (viewId === 'strain-view' && !strainChartsInitialized) {
                    initializeStrainCharts();
                    strainChartsInitialized = true;
                }
                if (viewId === 'dynamic-response-view' && !dynamicResponseChartsInitialized) {
                    initializeDynamicResponseCharts();
                    dynamicResponseChartsInitialized = true;
                }
                if (viewId === 'tilt-view' && !tiltChartsInitialized) {
                    initializeTiltCharts();
                    tiltChartsInitialized = true;
                }
                if (viewId === 'stress-view' && !stressChartsInitialized) {
                    initializeStressCharts();
                    stressChartsInitialized = true;
                }
                 if (viewId === 'coating-view' && !coatingChartsInitialized) {
                    coatingChartsInitialized = true;
                }
                if (viewId === 'auscultation-view' && !auscultationChartsInitialized) {
                    auscultationChartsInitialized = true;
                }
                if (viewId === 'history-strain-view' && !historyStrainChartsInitialized) {
                    initializeHistoryStrainView();
                    historyStrainChartsInitialized = true;
                }
                if (viewId === 'history-dynamic-view' && !historyDynamicChartsInitialized) {
                    initializeHistoryDynamicView();
                    historyDynamicChartsInitialized = true;
                }
                if (viewId === 'history-inclination-view' && !historyInclinationChartsInitialized) {
                    initializeHistoryInclinationView();
                    historyInclinationChartsInitialized = true;
                }
                if (viewId === 'history-coating-view' && !historyCoatingChartsInitialized) {
                    initializeHistoryCoatingView();
                    historyCoatingChartsInitialized = true;
                }
                if (viewId === 'history-cable-force-view' && !historyCableForceChartsInitialized) {
                    initializeHistoryCableForceView();
                    historyCableForceChartsInitialized = true;
                }
                if (viewId === 'history-acoustic-view' && !historyAcousticChartsInitialized) {
                    initializeHistoryAcousticView();
                    historyAcousticChartsInitialized = true;
                }
            }

            menuLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateTo(link.dataset.view, link.dataset.breadcrumb, link);
                });
            });

            // --- Tab切换通用逻辑 ---
            function setupTabSwitching(tabSelector, contentSelector) {
                const tabs = document.querySelectorAll(tabSelector);
                const contents = document.querySelectorAll(contentSelector);
                tabs.forEach(tab => {
                    tab.addEventListener('click', e => {
                        e.preventDefault();
                        tabs.forEach(item => {
                            item.classList.remove('border-blue-500', 'text-blue-600');
                            item.classList.add('border-transparent', 'text-gray-500');
                        });
                        tab.classList.remove('border-transparent', 'text-gray-500');
                        tab.classList.add('border-blue-500', 'text-blue-600');
                        contents.forEach(content => content.classList.add('hidden'));
                        const targetContent = document.getElementById(tab.dataset.content);
                        if (targetContent) targetContent.classList.remove('hidden');
                    });
                });
            }

            setupTabSwitching('.strain-tab', '.strain-content');
            setupTabSwitching('.strain-chart-tab', '.strain-chart-container');
            setupTabSwitching('.dynamic-response-tab', '.dynamic-response-content');
            setupTabSwitching('.dynamic-response-chart-tab', '.dynamic-response-chart-container');
            setupTabSwitching('.stress-tab', '.stress-content');
            setupTabSwitching('.history-dynamic-tab', '.history-dynamic-section');
            setupTabSwitching('.tilt-platform-tab', '.tilt-platform-content');
            setupTabSwitching('.stress-platform-tab', '.stress-platform-content');
            setupTabSwitching('.coating-platform-tab', '.coating-platform-content');
            setupTabSwitching('.history-strain-platform-tab', '.history-strain-platform-content');
            
            // --- 系统布设页面Tab逻辑 ---
            const rigidTab = document.getElementById('rigid-tab');
            const flexibleTab = document.getElementById('flexible-tab');
            const rigidLayoutContent = document.getElementById('rigid-layout-content');
            const flexibleLayoutContent = document.getElementById('flexible-layout-content');
            if (rigidTab) {
                rigidTab.addEventListener('click', (e) => {
                    e.preventDefault();
                    rigidTab.classList.add('border-blue-500', 'text-blue-600');
                    rigidTab.classList.remove('border-transparent', 'text-gray-500');
                    flexibleTab.classList.remove('border-blue-500', 'text-blue-600');
                    flexibleTab.classList.add('border-transparent', 'text-gray-500');
                    rigidLayoutContent.classList.remove('hidden');
                    flexibleLayoutContent.classList.add('hidden');
                });
            }
            if (flexibleTab) {
                flexibleTab.addEventListener('click', (e) => {
                    e.preventDefault();
                    flexibleTab.classList.add('border-blue-500', 'text-blue-600');
                    flexibleTab.classList.remove('border-transparent', 'text-gray-500');
                    rigidTab.classList.remove('border-blue-500', 'text-blue-600');
                    rigidTab.classList.add('border-transparent', 'text-gray-500');
                    flexibleLayoutContent.classList.remove('hidden');
                    rigidLayoutContent.classList.add('hidden');
                });
            }
            function initializeDataCharts() {
                 // 图表通用配置
                const commonChartOptions = {
                    maintainAspectRatio: false,
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                boxWidth: 12,
                                font: {
                                    size: 10
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#e5e7eb'
                            },
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        }
                    }
                };
                // 1. 应变值(μɛ)图表
                const strainCtx = document.getElementById('strainChart').getContext('2d');
                new Chart(strainCtx, {
                    type: 'bar',
                    data: {
                        labels: ['SS1', 'SS2', 'SS3', 'SS4', 'SS5', 'SS6', 'SS7', 'SS8'],
                        datasets: [
                            {
                                label: '刚性平台',
                                data: [450, 850, 400, 600, 750, 500, 300, 400],
                                backgroundColor: '#3b82f6',
                                borderColor: '#3b82f6',
                                borderWidth: 1
                            },
                            {
                                label: '柔性平台',
                                data: [450, 850, 400, 600, 750, 500, 300, 400],
                                backgroundColor: '#f97316',
                                borderColor: '#f97316',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        ...commonChartOptions,
                        scales: {
                            ...commonChartOptions.scales,
                            y: {
                                ...commonChartOptions.scales.y,
                                max: 1500
                            }
                        }
                    }
                });

                // 2. 动态响应(g)图表
                const dynamicResponseCtx = document.getElementById('dynamicResponseChart').getContext('2d');
                new Chart(dynamicResponseCtx, {
                    type: 'bar',
                    data: {
                        labels: ['AS1', 'AS2', 'AS3', 'AS4'],
                        datasets: [
                            {
                                label: '刚性平台 - X方向',
                                data: [1.8, 1.2, 1.6, 1.5],
                                backgroundColor: '#3b82f6',
                            },
                            {
                                label: '刚性平台 - Y方向',
                                data: [1.5, 1.8, 1.2, 1.8],
                                backgroundColor: '#60a5fa',
                            },
                            {
                                label: '柔性平台 - X方向',
                                data: [1.8, 1.2, 1.6, 1.5],
                                backgroundColor: '#f97316',
                            },
                            {
                                label: '柔性平台 - Y方向',
                                data: [1.5, 1.8, 1.2, 1.8],
                                backgroundColor: '#fb923c',
                            }
                        ]
                    },
                    options: {
                        ...commonChartOptions,
                        scales: {
                           ...commonChartOptions.scales,
                           y: {
                                ...commonChartOptions.scales.y,
                                max: 2.5,
                            }
                        }
                    }
                });
                
                // 3. 索力(Kn)图表 - 与实时监测模块数据同步
                const stressCtx = document.getElementById('stressChart').getContext('2d');
                const stressChart = new Chart(stressCtx, {
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'CF1',
                                data: [],
                                borderColor: '#8B4513',
                                backgroundColor: 'rgba(139, 69, 19, 0.1)',
                                fill: false,
                                tension: 0.4,
                                pointRadius: 2,
                                pointHoverRadius: 4,
                                borderWidth: 2
                            },
                            {
                                label: 'CF2',
                                data: [],
                                borderColor: '#D2691E',
                                backgroundColor: 'rgba(210, 105, 30, 0.1)',
                                fill: false,
                                tension: 0.4,
                                pointRadius: 2,
                                pointHoverRadius: 4,
                                borderWidth: 2
                            },
                            {
                                label: 'CF3',
                                data: [],
                                borderColor: '#A0522D',
                                backgroundColor: 'rgba(160, 82, 45, 0.1)',
                                fill: false,
                                tension: 0.4,
                                pointRadius: 2,
                                pointHoverRadius: 4,
                                borderWidth: 2
                            },
                            {
                                label: 'CF4',
                                data: [],
                                borderColor: '#CD853F',
                                backgroundColor: 'rgba(205, 133, 63, 0.1)',
                                fill: false,
                                tension: 0.4,
                                pointRadius: 2,
                                pointHoverRadius: 4,
                                borderWidth: 2
                            }
                        ]
                    },
                    options: {
                        maintainAspectRatio: false,
                        responsive: true,
                        scales: {
                             x: { 
                                 type: 'time', 
                                 time: { 
                                     unit: 'second', 
                                     displayFormats: { second: 'HH:mm:ss' } 
                                 }, 
                                 ticks: { 
                                     source: 'auto', 
                                     maxRotation: 0, 
                                     autoSkip: true,
                                     maxTicksLimit: 4,
                                     font: { size: 10 }
                                 },
                                 grid: { display: false }
                             },
                             y: {
                                 min: 1200,
                                 max: 1400,
                                 beginAtZero: false,
                                 ticks: { 
                                     callback: function(value) {
                                         return value + ' kN';
                                     },
                                     font: { size: 10 },
                                     maxTicksLimit: 5
                                 },
                                 grid: { color: '#e5e7eb' }
                             }
                         },
                        plugins: { 
                             legend: { 
                                 display: true,
                                 position: 'bottom',
                                 labels: {
                                     boxWidth: 12,
                                     usePointStyle: true,
                                     padding: 10,
                                     font: { size: 10 }
                                 }
                             },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#ffffff',
                                bodyColor: '#ffffff',
                                borderColor: '#f97316',
                                borderWidth: 1,
                                cornerRadius: 6,
                                displayColors: true,
                                callbacks: {
                                    title: function(context) {
                                        const date = new Date(context[0].parsed.x);
                                        return `时间: ${date.toLocaleTimeString('zh-CN')}`;
                                    },
                                    label: function(context) {
                                        const sensorName = context.dataset.label;
                                        const value = context.parsed.y.toFixed(1);
                                        return `${sensorName}: ${value} kN`;
                                    },
                                    afterBody: function(context) {
                                        return '柔性平台索力监测';
                                    }
                                }
                            }
                        }
                    }
                });

                // 初始化首页索力图表数据
                function initializeHomeStressData() {
                    const now = new Date().getTime();
                    const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                    
                    sensors.forEach((sensor, index) => {
                        const baseValue = 1250;
                        const data = [];
                        for (let i = 0; i < 10; i++) {
                            data.push({
                                x: now + i * 5000,
                                y: baseValue + (Math.random() * 10 - 5)
                            });
                        }
                        stressChart.data.datasets[index].data = data;
                    });
                    stressChart.update();
                }

                // 更新首页索力图表数据
                function updateHomeStressData() {
                    const now = new Date().getTime();
                    
                    stressChart.data.datasets.forEach((dataset, index) => {
                        // 移除最旧的数据点
                        if (dataset.data.length >= 10) {
                            dataset.data.shift();
                        }
                        
                        // 添加新的数据点
                        const baseValue = 1250;
                        const newValue = baseValue + (Math.random() * 10 - 5);
                        dataset.data.push({
                            x: now,
                            y: newValue
                        });
                    });
                    
                    stressChart.update('none');
                }

                // 初始化数据
                initializeHomeStressData();

                // 将更新函数添加到全局，以便其他地方调用
                window.updateHomeStressData = updateHomeStressData;
                // 倾角图表背景插件
                const tiltChartBackground = {
                    id: 'tiltChartBackground',
                    beforeDraw: (chart) => {
                        const ctx = chart.ctx;
                        const {top, left, width, height} = chart.chartArea;
                        const xCenter = left + width / 2;
                        const yCenter = top + height / 2;
                        const scale = (width / 2.5);

                        ctx.save();
                        // Draw circles
                        const radii = [0.49, 0.3675, 0.196];
                        const colors = ['#fcd34d', '#86efac', '#60a5fa'];
                        
                        radii.forEach((radius, index) => {
                            ctx.beginPath();
                            ctx.strokeStyle = colors[index];
                            ctx.lineWidth = 2;
                            ctx.arc(xCenter, yCenter, radius * scale, 0, 2 * Math.PI);
                            ctx.stroke();
                        });

                        // Draw axes
                        ctx.beginPath();
                        ctx.strokeStyle = '#d1d5db';
                        ctx.lineWidth = 1;
                        // X-axis
                        ctx.moveTo(left, yCenter);
                        ctx.lineTo(left + width, yCenter);
                        // Y-axis
                        ctx.moveTo(xCenter, top);
                        ctx.lineTo(xCenter, top + height);
                        ctx.stroke();
                        
                        ctx.restore();
                    }
                };
                const tiltChartOptions = {
                    maintainAspectRatio: false,
                    responsive: true,
                    aspectRatio: 1,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `(X: ${context.parsed.x}, Y: ${context.parsed.y})`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            min: -1.2,
                            max: 1.2,
                            grid: { display: false },
                            ticks: {
                                 stepSize: 0.5,
                                 font: { size: 12 }
                            }
                        },
                        y: {
                            min: -1.2,
                            max: 1.2,
                            grid: { display: false },
                             ticks: {
                                 stepSize: 0.5,
                                 font: { size: 12 }
                            }
                        }
                    }
                };
                
                // 4. 倾角监测 - 刚性平台
                const tiltCtxRigid = document.getElementById('tiltChartRigid').getContext('2d');
                new Chart(tiltCtxRigid, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            data: [{x: -0.1792, y: -0.2695}],
                            backgroundColor: '#ef4444',
                            pointRadius: 8,
                            pointHoverRadius: 10
                        }]
                    },
                    options: tiltChartOptions,
                    plugins: [tiltChartBackground]
                });
                // 5. 倾角监测 - 柔性平台
                const tiltCtxFlexible = document.getElementById('tiltChartFlexible').getContext('2d');
                new Chart(tiltCtxFlexible, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            data: [{x: -0.1386, y: -0.1918}],
                            backgroundColor: '#ef4444',
                            pointRadius: 8,
                            pointHoverRadius: 10
                        }]
                    },
                    options: tiltChartOptions,
                    plugins: [tiltChartBackground]
                });
                
                // 6. 听诊监测 - 刚性平台
                const auscultationCtx = document.getElementById('auscultationChart').getContext('2d');
                const auscultationData = [];
                const auscultationLabels = [];
                for (let i = 0; i < 2000; i++) {
                    auscultationLabels.push(i);
                    let value = (Math.random() - 0.5) * 0.2;
                    if (Math.random() < 0.01) {
                        value = (Math.random() > 0.5 ? 1 : -1) * (0.5 + Math.random() * 0.5);
                    }
                    auscultationData.push(value);
                }

                new Chart(auscultationCtx, {
                    type: 'line',
                    data: {
                        labels: auscultationLabels,
                        datasets: [{
                            data: auscultationData,
                            borderColor: '#0284c7',
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.1
                        }]
                    },
                    options: {
                        ...commonChartOptions,
                         plugins: { ...commonChartOptions.plugins, legend: { display: false }},
                         scales: {
                            x: {
                                grid: {
                                    color: '#e5e7eb'
                                },
                                 ticks: {
                                    maxTicksLimit: 10
                                }
                            },
                            y: {
                               ...commonChartOptions.scales.y,
                               min: -1,
                               max: 1
                            }
                        }
                    }
                });
            }

            function initializeStrainCharts() {
                // --- Helper function to create a set of charts and controls ---
                const createStrainChartSet = (platform) => {
                    const colors = ['#a855f7', '#8b5cf6', '#6366f1', '#3b82f6', '#0ea5e9', '#06b6d4', '#14b8a6', '#10b981'];
                    const lineChartOptions = {
                        maintainAspectRatio: false,
                        responsive: true,
                        scales: {
                            x: { type: 'time', time: { unit: 'second', displayFormats: { second: 'HH:mm:ss' } }, ticks: { source: 'auto', maxRotation: 0, autoSkip: true, } },
                            y: { min: -90, max: 60, }
                        },
                        plugins: { 
                            legend: { position: 'right' },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#ffffff',
                                bodyColor: '#ffffff',
                                borderColor: '#3b82f6',
                                borderWidth: 1,
                                cornerRadius: 6,
                                displayColors: true,
                                callbacks: {
                                    title: function(context) {
                                        const date = new Date(context[0].parsed.x);
                                        return `时间: ${date.toLocaleTimeString('zh-CN')}`;
                                    },
                                    label: function(context) {
                                        const sensorName = context.dataset.label;
                                        const value = context.parsed.y.toFixed(2);
                                        return `${sensorName}: ${value} μɛ`;
                                    },
                                    afterBody: function(context) {
                                        return `平台: ${platform === 'rigid' ? '刚性平台' : '柔性平台'}`;
                                    }
                                }
                            }
                        }
                    };

                    function generateChartData() {
                        let data = [];
                        let time = new Date().getTime();
                        let baseValue = platform === 'rigid' ? -30 : -20;
                        for (let i = 0; i < 10; i++) {
                            data.push({ x: time + i * 5000, y: baseValue + Math.random() * 15 - 7.5 });
                        }
                        return data;
                    }

                    const datasets1 = [];
                    const datasets2 = [];

                    for (let i = 0; i < 8; i++) {
                        const dataset = {
                            label: `SS${i + 1}`,
                            data: generateChartData(),
                            borderColor: colors[i],
                            borderWidth: 2,
                            fill: false,
                            pointRadius: 0,
                            tension: 0.4
                        };
                        if (i < 4) {
                            datasets1.push(dataset);
                        } else {
                            datasets2.push(JSON.parse(JSON.stringify(dataset)));
                        }
                    }

                    const chart1 = new Chart(document.getElementById(`strainLineChart1_${platform}`).getContext('2d'), {
                        type: 'line',
                        data: { datasets: datasets1 },
                        options: lineChartOptions
                    });
                    const chart2 = new Chart(document.getElementById(`strainLineChart2_${platform}`).getContext('2d'), {
                        type: 'line',
                        data: { datasets: datasets2 },
                        options: lineChartOptions
                    });

                    const controls = document.getElementById(`strain-chart-controls-${platform}`);
                    controls.addEventListener('change', (e) => {
                        if (e.target.type === 'checkbox') {
                            const index = parseInt(e.target.dataset.index);
                            const isVisible = e.target.checked;
                            if (index < 4) {
                                chart1.setDatasetVisibility(index, isVisible);
                                chart1.update();
                            } else {
                                chart2.setDatasetVisibility(index - 4, isVisible);
                                chart2.update();
                            }
                        }
                    });

                     document.querySelectorAll(`#strain-chart-controls-${platform} input[type="checkbox"]`).forEach(checkbox => {
                        const index = parseInt(checkbox.dataset.index);
                        const isVisible = checkbox.checked;
                        if (index < 4) {
                            chart1.setDatasetVisibility(index, isVisible);
                        } else {
                            chart2.setDatasetVisibility(index - 4, isVisible);
                        }
                     });
                     chart1.update();
                     chart2.update();
                };

                // Initialize for both platforms
                createStrainChartSet('rigid');
                createStrainChartSet('flexible');
            }
            function initializeHistoryDynamicView() {
                document.querySelectorAll('#history-dynamic-view .datepicker').forEach(el => {
                    flatpickr(el, {
                        enableTime: true,
                        dateFormat: "Y-m-d H:i"
                    });
                });

                const SENSOR_MAP = {
                    rigid: ['AS1', 'AS2', 'AS3', 'AS4'],
                    flexible: ['AS5', 'AS6', 'AS7', 'AS8']
                };

                const BASE_VALUES = {
                    rigid: {
                        x: [-0.0013, -0.0011, -0.0010, -0.0009],
                        y: [-0.0016, -0.0014, -0.0012, -0.0013]
                    },
                    flexible: {
                        x: [0.0009, 0.0011, 0.0010, 0.0012],
                        y: [0.0012, 0.0010, 0.0013, 0.0011]
                    }
                };

                const VARIANCE = {
                    rigid: 0.0006,
                    flexible: 0.0005
                };

                const palette = ['#2563eb', '#10b981', '#f97316', '#a855f7'];

                const platformState = {};

                const createTimestamps = () => {
                    const now = Date.now();
                    return Array.from({ length: 24 }, (_, idx) => now - (23 - idx) * 30 * 60 * 1000);
                };

                const generateAxisSeries = (platform, axis, timestamps) => {
                    const sensors = SENSOR_MAP[platform];
                    const base = BASE_VALUES[platform][axis];
                    const variance = VARIANCE[platform];
                    return sensors.map((_, sensorIdx) => (
                        timestamps.map((ts) => {
                            const delta = (Math.random() - 0.5) * variance;
                            return {
                                x: ts,
                                y: +(base[sensorIdx] + delta).toFixed(6)
                            };
                        })
                    ));
                };

                const computeYScale = (series) => {
                    let min = Infinity;
                    let max = -Infinity;
                    series.forEach(dataset => {
                        dataset.forEach(point => {
                            if (point.y < min) min = point.y;
                            if (point.y > max) max = point.y;
                        });
                    });
                    if (!isFinite(min) || !isFinite(max)) {
                        return { min: -1, max: 1 };
                    }
                    const padding = (max - min) * 0.25 || 0.0005;
                    return {
                        min: min - padding,
                        max: max + padding
                    };
                };
                const createChartOptions = () => ({
                    maintainAspectRatio: false,
                    responsive: true,
                    interaction: { intersect: false, mode: 'index' },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                boxWidth: 12,
                                usePointStyle: true,
                                pointStyle: 'line'
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'hour',
                                displayFormats: {
                                    hour: 'MM-dd HH:mm'
                                }
                            },
                            ticks: {
                                maxRotation: 0
                            },
                            grid: {
                                color: '#e5e7eb'
                            }
                        },
                        y: {
                            grid: {
                                color: '#f1f5f9'
                            },
                            ticks: {
                                callback: (value) => value.toFixed ? value.toFixed(4) : value
                            }
                        }
                    }
                });

                const buildDatasets = (platform, axisSeries) => (
                    axisSeries.map((series, idx) => ({
                        label: SENSOR_MAP[platform][idx],
                        data: series,
                        borderColor: palette[idx % palette.length],
                        backgroundColor: palette[idx % palette.length],
                        borderWidth: 2,
                        pointRadius: 0,
                        tension: 0.35,
                        fill: false
                    }))
                );

                const updateChartData = (platform, axis, newSeries) => {
                    const chart = platformState[platform].charts[axis];
                    chart.data.datasets.forEach((dataset, idx) => {
                        dataset.data = newSeries[idx];
                    });
                    const range = computeYScale(newSeries);
                    chart.options.scales.y.min = range.min;
                    chart.options.scales.y.max = range.max;
                    chart.update();
                };
                ['rigid', 'flexible'].forEach(platform => {
                    const timestamps = createTimestamps();
                    const xSeries = generateAxisSeries(platform, 'x', timestamps);
                    const ySeries = generateAxisSeries(platform, 'y', timestamps);

                    const optionsX = createChartOptions();
                    const rangeX = computeYScale(xSeries);
                    optionsX.scales.y.min = rangeX.min;
                    optionsX.scales.y.max = rangeX.max;

                    const chartX = new Chart(document.getElementById(`history-dynamic-chart-${platform}-x`).getContext('2d'), {
                        type: 'line',
                        data: { datasets: buildDatasets(platform, xSeries) },
                        options: optionsX
                    });
                    
                    const optionsY = createChartOptions();
                    const rangeY = computeYScale(ySeries);
                    optionsY.scales.y.min = rangeY.min;
                    optionsY.scales.y.max = rangeY.max;
                    const chartY = new Chart(document.getElementById(`history-dynamic-chart-${platform}-y`).getContext('2d'), {
                        type: 'line',
                        data: { datasets: buildDatasets(platform, ySeries) },
                        options: optionsY
                    });

                    platformState[platform] = {
                        charts: { x: chartX, y: chartY }
                    };

                    const checkboxGroup = document.querySelectorAll(`#history-dynamic-chart-sensors-${platform} input[type="checkbox"]`);
                    checkboxGroup.forEach(checkbox => {
                        checkbox.addEventListener('change', () => {
                            const index = Number(checkbox.dataset.index);
                            ['x', 'y'].forEach(axis => {
                                const targetChart = platformState[platform].charts[axis];
                                targetChart.setDatasetVisibility(index, checkbox.checked);
                                targetChart.update();
                            });
                        });
                    });

                    const refreshButton = document.querySelector(`[data-dynamic-refresh="${platform}"]`);
                    if (refreshButton) {
                        refreshButton.addEventListener('click', () => {
                            const nextTimestamps = createTimestamps();
                            const nextX = generateAxisSeries(platform, 'x', nextTimestamps);
                            const nextY = generateAxisSeries(platform, 'y', nextTimestamps);
                            updateChartData(platform, 'x', nextX);
                            updateChartData(platform, 'y', nextY);
                        });
                    }

                    const totalEl = document.getElementById(`history-dynamic-total-${platform}`);
                    const tableRows = document.querySelectorAll(`#history-dynamic-table-${platform} tr`).length;
                    if (totalEl && tableRows) {
                        totalEl.textContent = tableRows;
                    }
                });

                document.querySelectorAll('#history-dynamic-view .history-dynamic-axis').forEach(button => {
                    button.addEventListener('click', () => {
                        const platform = button.dataset.platform;
                        const axis = button.dataset.axis;
                        const container = button.parentElement;
                        if (container) {
                            container.querySelectorAll('.history-dynamic-axis').forEach(btn => {
                                btn.classList.remove('bg-blue-500', 'text-white');
                                btn.classList.add('text-gray-600');
                            });
                        }
                        button.classList.add('bg-blue-500', 'text-white');
                        button.classList.remove('text-gray-600');
                        if (platformState[platform]) {
                            platformState[platform].activeAxis = axis;
                        }
                    });
                });
            }
            function initializeDynamicResponseCharts() {
                const createDynamicResponseChartSet = (platform) => {
                    const colors = ['#8b5cf6', '#3b82f6', '#10b981', '#f97316'];
                    const lineChartOptions = {
                        maintainAspectRatio: false,
                        responsive: true,
                        scales: {
                            x: { type: 'time', time: { unit: 'second', displayFormats: { second: 'HH:mm:ss' } }, ticks: { source: 'auto', maxRotation: 0, autoSkip: true } },
                            y: { min: -0.01, max: 0.01 }
                        },
                        plugins: { 
                            legend: { position: 'right' },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#ffffff',
                                bodyColor: '#ffffff',
                                borderColor: '#10b981',
                                borderWidth: 1,
                                cornerRadius: 6,
                                displayColors: true,
                                callbacks: {
                                    title: function(context) {
                                        const date = new Date(context[0].parsed.x);
                                        return `时间: ${date.toLocaleTimeString('zh-CN')}`;
                                    },
                                    label: function(context) {
                                        const sensorName = context.dataset.label;
                                        const value = context.parsed.y.toFixed(6);
                                        const axis = context.chart.canvas.id.includes('X') ? 'X方向' : 'Y方向';
                                        return `${sensorName} (${axis}): ${value} g`;
                                    },
                                    afterBody: function(context) {
                                        return `平台: ${platform === 'rigid' ? '刚性平台' : '柔性平台'}`;
                                    }
                                }
                            }
                        }
                    };

                    function generateDynamicData() {
                        let data = [];
                        let time = new Date("2023-01-01T23:59:00").getTime();
                         let baseValue = platform === 'rigid' ? -0.006 : -0.005;
                        for(let i=0; i<10; i++) {
                            data.push({x: time + i * 5000, y: baseValue + (Math.random() * 0.004) - 0.002});
                        }
                        return data;
                    }

                    const datasetsX = [];
                    const datasetsY = [];

                    for (let i = 0; i < 4; i++) {
                        datasetsX.push({
                            label: `AS${i + 1}`,
                            data: generateDynamicData(),
                            borderColor: colors[i],
                            borderWidth: 2,
                            fill: false,
                            pointRadius: 0,
                            tension: 0.4
                        });
                        datasetsY.push({
                            label: `AS${i + 1}`,
                            data: generateDynamicData(),
                            borderColor: colors[i],
                            borderWidth: 2,
                            fill: false,
                            pointRadius: 0,
                            tension: 0.4
                        });
                    }
                    
                    const chartX = new Chart(document.getElementById(`dynamicResponseLineChartX_${platform}`).getContext('2d'), {
                        type: 'line',
                        data: { datasets: datasetsX },
                        options: lineChartOptions
                    });
                    const chartY = new Chart(document.getElementById(`dynamicResponseLineChartY_${platform}`).getContext('2d'), {
                        type: 'line',
                        data: { datasets: datasetsY },
                        options: lineChartOptions
                    });

                    const controls = document.getElementById(`dynamic-response-chart-controls-${platform}`);
                    controls.addEventListener('change', e => {
                        if (e.target.type === 'checkbox') {
                            const index = parseInt(e.target.dataset.index);
                            const isVisible = e.target.checked;
                            chartX.setDatasetVisibility(index, isVisible);
                            chartY.setDatasetVisibility(index, isVisible);
                            chartX.update();
                            chartY.update();
                        }
                    });
                };
                
                createDynamicResponseChartSet('rigid');
                createDynamicResponseChartSet('flexible');
            }
            function initializeTiltCharts() {
                 const tiltChartBackground = {
                    id: 'tiltChartBackground',
                    beforeDraw: (chart) => {
                        const ctx = chart.ctx;
                        const {top, left, width, height} = chart.chartArea;
                        const xCenter = left + width / 2;
                        const yCenter = top + height / 2;
                        const maxRadius = Math.min(width, height) / 2;
                        
                        ctx.save();
                        // Draw circles
                        const radii = [1.0, 0.75, 0.4];
                        const colors = ['#fca5a5', '#fdba74', '#86efac'];
                        
                        radii.forEach((radius, index) => {
                            ctx.beginPath();
                            ctx.strokeStyle = colors[index];
                            ctx.lineWidth = 2;
                            ctx.arc(xCenter, yCenter, radius * maxRadius, 0, 2 * Math.PI);
                            ctx.stroke();
                        });

                        // Draw axes
                        ctx.beginPath();
                        ctx.strokeStyle = '#d1d5db';
                        ctx.lineWidth = 1;
                        ctx.moveTo(left, yCenter);
                        ctx.lineTo(left + width, yCenter);
                        ctx.moveTo(xCenter, top);
                        ctx.lineTo(xCenter, top + height);
                        ctx.stroke();
                        
                        ctx.restore();
                    }
                };

                const createTiltChartSet = (platform) => {
                    const rigidData = [
                        { name: 'GRY1', location: 'A1', x: -0.179, y: 0.101, time: '15:38:21', tooltipPos: {top: '30%', left: '25%'} },
                        { name: 'GRY2', location: 'A2', x: -0.274, y: 0.080, time: '15:38:21', tooltipPos: {top: '30%', left: '70%'} },
                        { name: 'GRY3', location: 'A3', x: 0.063, y: -0.353, time: '15:38:21', tooltipPos: {top: '65%', left: '25%'} },
                        { name: 'GRY4', location: 'A4', x: 0.109, y: 0.159, time: '15:38:21', tooltipPos: {top: '65%', left: '70%'} }
                    ];
                     const flexibleData = [
                        { name: 'GRY1', location: 'A1', x: -0.152, y: 0.095, time: '15:38:21', tooltipPos: {top: '30%', left: '25%'} },
                        { name: 'GRY2', location: 'A2', x: -0.251, y: 0.071, time: '15:38:21', tooltipPos: {top: '30%', left: '70%'} },
                        { name: 'GRY3', location: 'A3', x: 0.059, y: -0.320, time: '15:38:21', tooltipPos: {top: '65%', left: '25%'} },
                        { name: 'GRY4', location: 'A4', x: 0.095, y: 0.143, time: '15:38:21', tooltipPos: {top: '65%', left: '70%'} }
                    ];
                    const platformData = platform === 'rigid' ? rigidData : flexibleData;
                    
                    const tableBody = document.getElementById(`tilt-table-body-${platform}`);
                    const tooltip = document.getElementById(`tooltip-${platform}`);
                    tableBody.innerHTML = ''; // Clear previous content

                    const chart = new Chart(document.getElementById(`tiltChart_${platform}`).getContext('2d'), {
                        type: 'scatter',
                        data: {
                            datasets: [{
                                data: [ {x: platformData[2].x, y: platformData[2].y} ],
                                backgroundColor: '#3b82f6',
                                pointRadius: 8,
                                pointHoverRadius: 10
                            }]
                        },
                        options: {
                            maintainAspectRatio: false,
                            responsive: true,
                            plugins: { 
                                legend: { display: false },
                                tooltip: {
                                    mode: 'nearest',
                                    intersect: true,
                                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                    titleColor: '#ffffff',
                                    bodyColor: '#ffffff',
                                    borderColor: '#3b82f6',
                                    borderWidth: 1,
                                    cornerRadius: 6,
                                    displayColors: false,
                                    callbacks: {
                                        title: function(context) {
                                            const selectedSensor = platformData[parseInt(document.querySelector(`input[name="tilt-sensor-${platform}"]:checked`).value)];
                                            return `传感器: ${selectedSensor.name} (${selectedSensor.location})`;
                                        },
                                        label: function(context) {
                                            const x = context.parsed.x.toFixed(3);
                                            const y = context.parsed.y.toFixed(3);
                                            return [`X方向倾角: ${x}°`, `Y方向倾角: ${y}°`];
                                        },
                                        afterBody: function(context) {
                                            return `平台: ${platform === 'rigid' ? '刚性平台' : '柔性平台'}`;
                                        }
                                    }
                                }
                            },
                            scales: {
                                x: { min: -1, max: 1, grid: { display: false } },
                                y: { min: -1, max: 1, grid: { display: false } }
                            }
                        },
                        plugins: [tiltChartBackground]
                    });

                    platformData.forEach((sensor, index) => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td class="px-4 py-4"><input type="radio" name="tilt-sensor-${platform}" value="${index}" ${index === 2 ? 'checked' : ''}></td>
                            <td class="px-6 py-4 text-sm">${sensor.name}</td>
                            <td class="px-6 py-4 text-sm">${sensor.location}</td>
                            <td class="px-6 py-4 text-sm">${sensor.x}</td>
                            <td class="px-6 py-4 text-sm">${sensor.y}</td>
                            <td class="px-6 py-4 text-sm">2024-04-07 ${sensor.time}</td>
                        `;
                        tableBody.appendChild(row);
                    });

                    tableBody.addEventListener('change', e => {
                        if (e.target.name === `tilt-sensor-${platform}`) {
                            const selectedIndex = parseInt(e.target.value);
                            const selectedSensor = platformData[selectedIndex];
                            
                            // Update chart
                            chart.data.datasets[0].data = [{ x: selectedSensor.x, y: selectedSensor.y }];
                            chart.update();

                            // Update tooltip
                            tooltip.innerHTML = `
                                <strong>传感器名称:</strong> ${selectedSensor.name}<br>
                                <strong>位置:</strong> ${selectedSensor.location}<br>
                                <strong>X方向倾角值(°):</strong> ${selectedSensor.x}<br>
                                <strong>Y方向倾角值(°):</strong> ${selectedSensor.y}
                            `;
                            tooltip.style.top = selectedSensor.tooltipPos.top;
                            tooltip.style.left = selectedSensor.tooltipPos.left;
                            tooltip.classList.remove('opacity-0');
                        }
                    });
                     // Trigger change for default selection
                    tableBody.querySelector('input[type="radio"]:checked').dispatchEvent(new Event('change', { bubbles: true }));
                };

                createTiltChartSet('rigid');
                createTiltChartSet('flexible');
            }
            function initializeStressCharts() {
                const createStressChartSet = () => {
                    const colors = ['#8B4513', '#D2691E', '#A0522D', '#CD853F', '#F4A460', '#B8860B', '#DAA520', '#FFD700'];
                    const lineChartOptions = {
                        maintainAspectRatio: false, responsive: true,
                        scales: {
                            x: { type: 'time', time: { unit: 'second', displayFormats: { second: 'HH:mm:ss' } }, ticks: { source: 'auto', maxRotation: 0, autoSkip: true } },
                            y: { min: 1200, max: 1400 }
                        },
                        plugins: { 
                            legend: { position: 'right' },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#ffffff',
                                bodyColor: '#ffffff',
                                borderColor: '#f97316',
                                borderWidth: 1,
                                cornerRadius: 6,
                                displayColors: true,
                                callbacks: {
                                    title: function(context) {
                                        const date = new Date(context[0].parsed.x);
                                        return `时间: ${date.toLocaleTimeString('zh-CN')}`;
                                    },
                                    label: function(context) {
                                        const sensorName = context.dataset.label;
                                        const value = context.parsed.y.toFixed(1);
                                        return `${sensorName}: ${value} kN`;
                                    },
                                    afterBody: function(context) {
                                        return '平台: 柔性平台';
                                    }
                                }
                            }
                        }
                    };

                    function generateData(base) {
                        let data = [];
                        let time = new Date().getTime();
                        for (let i = 0; i < 10; i++) {
                            data.push({ x: time + i * 5000, y: base + (Math.random() * 50) - 25 });
                        }
                        return data;
                    }

                    const datasets = [];
                    const sensorPrefix = 'CF';
                    const controlId = `stress-chart-controls`;
                    const chartId = `stressLineChart`;
                    const baseValue = 1250;

                    // 创建CF1-CF4的数据集
                    for (let i = 0; i < 4; i++) {
                        const dataset = {
                            label: `${sensorPrefix}${i + 1}`,
                            data: generateData(baseValue),
                            borderColor: colors[i],
                            borderWidth: 2, 
                            fill: false, 
                            pointRadius: 0, 
                            tension: 0.4
                        };
                        datasets.push(dataset);
                    }

                    // 创建单个统一的图表
                    const chart = new Chart(document.getElementById('stress-chart-tension').getContext('2d'), { 
                        type: 'line', 
                        data: { datasets: datasets }, 
                        options: lineChartOptions 
                    });
                    
                    // 处理传感器复选框变化事件
                    document.getElementById('stress-sensor-list').addEventListener('change', (e) => {
                        if (e.target.type === 'checkbox') {
                            const index = parseInt(e.target.dataset.index);
                            const isVisible = e.target.checked;
                            chart.setDatasetVisibility(index, isVisible);
                            chart.update();
                        }
                    });
                };
                const createSpectrumChartSet = () => {
                     const spectrumOptions = {
                        maintainAspectRatio: false, 
                        responsive: true,
                        plugins: { 
                            legend: { display: false },
                            zoom: {
                                zoom: {
                                    wheel: {
                                        enabled: true,
                                    },
                                    pinch: {
                                        enabled: true
                                    },
                                    mode: 'xy',
                                },
                                pan: {
                                    enabled: true,
                                    mode: 'xy',
                                }
                            },
                            tooltip: {
                                mode: 'nearest',
                                intersect: false,
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#ffffff',
                                bodyColor: '#ffffff',
                                borderColor: '#f97316',
                                borderWidth: 1,
                                cornerRadius: 6,
                                displayColors: false,
                                callbacks: {
                                    title: function(context) {
                                        return `频率: ${context[0].parsed.x.toFixed(3)} Hz`;
                                    },
                                    label: function(context) {
                                        const freq = context.parsed.x;
                                        const amp = context.parsed.y;
                                        return `振幅: ${amp.toFixed(5)}`;
                                    },
                                    afterBody: function(context) {
                                        const currentSensor = document.querySelector('input[name="spectrum-sensor"]:checked');
                                        const sensorName = currentSensor ? `CF${parseInt(currentSensor.value) + 1}` : 'CF1';
                                        return `传感器: ${sensorName} | 柔性平台索力频谱`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: { 
                                title: { display: true, text: 'Hz' }, 
                                grid: { color: '#e5e7eb' }
                            },
                            y: { 
                                grid: { color: '#e5e7eb' }
                            }
                        },
                                                 plugins: { 
                             legend: { display: false },
                             tooltip: {
                                 mode: 'nearest',
                                 intersect: false,
                                 backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                 titleColor: '#ffffff',
                                 bodyColor: '#ffffff',
                                 borderColor: '#f97316',
                                 borderWidth: 1,
                                 cornerRadius: 6,
                                 displayColors: false,
                                 callbacks: {
                                     title: function(context) {
                                         return `频率: ${context[0].parsed.x.toFixed(3)} Hz`;
                                     },
                                     label: function(context) {
                                         const freq = context.parsed.x;
                                         const amp = context.parsed.y;
                                         let label = `振幅: ${amp.toFixed(1)} dB`;
                                         
                                         // 添加频率类型标注
                                         if (freq >= 0 && freq <= 2) {
                                             label += ' (基频响应)';
                                         } else if (freq > 2 && freq <= 5) {
                                             label += ' (谐波成分)';
                                         } else if (freq > 5 && freq <= 10) {
                                             label += ' (结构振动)';
                                         } else {
                                             label += ' (高频成分)';
                                         }
                                         
                                         return label;
                                     },
                                     afterBody: function(context) {
                                         const currentSensor = document.querySelector('input[name="spectrum-sensor"]:checked');
                                         const sensorName = currentSensor ? `CF${parseInt(currentSensor.value) + 1}` : 'CF1';
                                         return `传感器: ${sensorName} | 柔性平台索力频谱`;
                                     }
                                 }
                             }
                         }
                    };

                                         // 生成符合真实索力监测的频谱数据
                     function generateRealisticSpectrumData(sensorIndex) {
                         const data = [];
                         const numPoints = 800; // 增加数据点数量到800
                         const maxFreq = 25; // 增加最大频率到25Hz
                         
                         // 不同传感器的特征频率（模拟不同位置的索力传感器）
                         const sensorCharacteristics = [
                             { // CF1 - 主频在1.2Hz，较强的低频响应
                                 fundamentalFreq: 1.2,
                                 fundamentalAmp: 0.006,
                                 harmonics: [2.4, 3.6, 4.8, 6.0, 7.2, 8.4, 9.6, 12.0, 14.4, 16.8],
                                 harmonicAmps: [0.003, 0.0015, 0.0008, 0.0004, 0.0003, 0.0002, 0.00015, 0.0001, 0.00008, 0.00005],
                                 structuralFreqs: [0.8, 6.2, 8.5, 11.3, 13.7, 15.9, 18.2, 20.1, 22.4, 24.6],
                                 structuralAmps: [0.002, 0.001, 0.0005, 0.0003, 0.0002, 0.00015, 0.0001, 0.00008, 0.00006, 0.00004],
                                 noiseLevel: 0.0002
                             },
                             { // CF2 - 主频在1.5Hz，中等响应
                                 fundamentalFreq: 1.5,
                                 fundamentalAmp: 0.0055,
                                 harmonics: [3.0, 4.5, 6.0, 7.5, 9.0, 10.5, 12.0, 15.0, 18.0, 21.0],
                                 harmonicAmps: [0.0028, 0.0012, 0.0006, 0.0004, 0.0003, 0.0002, 0.00015, 0.0001, 0.00008, 0.00006],
                                 structuralFreqs: [0.9, 5.8, 7.2, 10.1, 12.6, 15.3, 17.8, 19.5, 21.7, 23.9],
                                 structuralAmps: [0.0018, 0.0009, 0.0004, 0.0003, 0.0002, 0.00015, 0.0001, 0.00008, 0.00006, 0.00004],
                                 noiseLevel: 0.00018
                             },
                             { // CF3 - 主频在1.8Hz，高频成分较多
                                 fundamentalFreq: 1.8,
                                 fundamentalAmp: 0.0048,
                                 harmonics: [3.6, 5.4, 7.2, 9.0, 10.8, 12.6, 14.4, 18.0, 21.6, 25.2],
                                 harmonicAmps: [0.0025, 0.0018, 0.001, 0.0006, 0.0004, 0.0003, 0.0002, 0.00015, 0.0001, 0.00008],
                                 structuralFreqs: [1.1, 4.2, 8.8, 11.6, 14.3, 16.9, 19.4, 21.8, 23.7, 25.0],
                                 structuralAmps: [0.0015, 0.0012, 0.0008, 0.0005, 0.0003, 0.0002, 0.00015, 0.0001, 0.00008, 0.00006],
                                 noiseLevel: 0.0003
                             },
                             { // CF4 - 主频在1.1Hz，较平稳的响应
                                 fundamentalFreq: 1.1,
                                 fundamentalAmp: 0.0052,
                                 harmonics: [2.2, 3.3, 4.4, 5.5, 6.6, 7.7, 8.8, 11.0, 13.2, 15.4],
                                 harmonicAmps: [0.0026, 0.0013, 0.0007, 0.0004, 0.0003, 0.0002, 0.00015, 0.0001, 0.00008, 0.00006],
                                 structuralFreqs: [0.7, 5.5, 9.1, 12.3, 15.7, 18.9, 21.2, 23.5, 24.8, 25.0],
                                 structuralAmps: [0.002, 0.0008, 0.0003, 0.0002, 0.00015, 0.0001, 0.00008, 0.00006, 0.00004, 0.00003],
                                 noiseLevel: 0.00015
                             }
                         ];
                         
                         const characteristics = sensorCharacteristics[sensorIndex];
                         
                         for (let i = 0; i < numPoints; i++) {
                             const freq = (i / (numPoints - 1)) * maxFreq; // 修正频率计算
                             let amplitude = 0;
                             
                             // 基频响应（高斯分布）
                             const fundamentalResponse = characteristics.fundamentalAmp * 
                                 Math.exp(-Math.pow(freq - characteristics.fundamentalFreq, 2) / (2 * Math.pow(0.1, 2)));
                             amplitude += fundamentalResponse;
                             
                             // 谐波响应
                             characteristics.harmonics.forEach((harmFreq, idx) => {
                                 if (idx < characteristics.harmonicAmps.length) {
                                     const harmonicResponse = characteristics.harmonicAmps[idx] * 
                                         Math.exp(-Math.pow(freq - harmFreq, 2) / (2 * Math.pow(0.08, 2)));
                                     amplitude += harmonicResponse;
                                 }
                             });
                             
                             // 结构振动频率
                             characteristics.structuralFreqs.forEach((structFreq, idx) => {
                                 if (idx < characteristics.structuralAmps.length) {
                                     const structuralResponse = characteristics.structuralAmps[idx] * 
                                         Math.exp(-Math.pow(freq - structFreq, 2) / (2 * Math.pow(0.15, 2)));
                                     amplitude += structuralResponse;
                                 }
                             });
                             
                             // 添加白噪声
                             amplitude += characteristics.noiseLevel * Math.random();
                             
                             // 添加1/f噪声（低频更强）
                             if (freq > 0.1) {
                                 amplitude += (characteristics.noiseLevel * 0.3) / Math.sqrt(freq) * Math.random();
                             }
                             
                             // 确保幅值为正且在合理范围内
                             amplitude = Math.max(1e-8, Math.min(amplitude, 0.008));
                             
                             // 转换为dB格式：20 * log10(amplitude / reference)
                             // 使用参考值1e-6作为0dB基准（常用于振动分析）
                             const referenceAmplitude = 1e-6;
                             const amplitudeDB = 20 * Math.log10(amplitude / referenceAmplitude);
                             
                             // 限制dB范围在-60到20之间
                             const clampedDB = Math.max(-60, Math.min(amplitudeDB, 20));
                             
                             data.push({ x: parseFloat(freq.toFixed(3)), y: parseFloat(clampedDB.toFixed(2)) });
                         }
                         
                         return data;
                     }
                    
                                         // 为4个传感器生成数据
                     const allSpectrumData = [
                         generateRealisticSpectrumData(0), // CF1
                         generateRealisticSpectrumData(1), // CF2
                         generateRealisticSpectrumData(2), // CF3
                         generateRealisticSpectrumData(3)  // CF4
                     ];
                     
                     // 数据验证和调试输出
                     function validateSpectrumData(data, sensorName) {
                         if (!data || data.length === 0) {
                             console.error(`No data generated for ${sensorName}`);
                             return false;
                         }
                         
                         const hasValidPoints = data.every(point => 
                             typeof point.x === 'number' && 
                             typeof point.y === 'number' && 
                             !isNaN(point.x) && 
                             !isNaN(point.y)
                         );
                         
                         if (!hasValidPoints) {
                             console.error(`Invalid data points found in ${sensorName}`);
                             return false;
                         }
                         
                         console.log(`${sensorName}: ${data.length} valid points, range: ${data[0].x.toFixed(2)}-${data[data.length-1].x.toFixed(2)} Hz, max amplitude: ${Math.max(...data.map(p => p.y)).toFixed(6)}`);
                         return true;
                     }
                     
                     // 验证所有数据
                     const sensorNames = ['CF1', 'CF2', 'CF3', 'CF4'];
                     allSpectrumData.forEach((data, index) => {
                         validateSpectrumData(data, sensorNames[index]);
                     });

                                         // 生成历史查询模式的频谱数据（0-5Hz范围，与历史查询一致）
                     const generateHistoryModeSpectrumData = (sensorIndex) => {
                         const spectrumLabels = Array.from({ length: 100 }, (_, i) => +(i * 0.05).toFixed(2));
                         return spectrumLabels.map((label) => {
                             const peak = Math.exp(-Math.pow(label - (0.8 + sensorIndex * 0.12), 2) / 0.22) * 0.002;
                             const noise = (Math.random() - 0.5) * 0.0006;
                             return +(peak + noise).toFixed(5);
                         });
                     };

                     // 为所有传感器生成历史模式频谱数据
                     const historySpectrumData = [];
                     for (let i = 0; i < 4; i++) {
                         historySpectrumData.push(generateHistoryModeSpectrumData(i));
                     }

                     const chart = new Chart(document.getElementById('stress-chart-spectrum').getContext('2d'), {
                         type: 'line',
                         data: {
                             labels: Array.from({ length: 100 }, (_, i) => +(i * 0.05).toFixed(2)),
                             datasets: [{
                                 data: historySpectrumData[0],
                                 borderColor: '#f97316',
                                 backgroundColor: 'rgba(249, 115, 22, 0.15)',
                                 tension: 0.25,
                                 pointRadius: 0,
                                 fill: true
                             }]
                         },
                         options: spectrumOptions
                     });
                     
                     console.log('Spectrum chart initialized with data points:', allSpectrumData[0].length);

                                         // 更新频谱特征信息显示
                     function updateSpectrumInfo(sensorIndex) {
                         const sensorNames = ['CF1', 'CF2', 'CF3', 'CF4'];
                         const sensorCharacteristics = [
                             { 
                                 fundamentalFreq: 1.2, 
                                 maxAmp: 0.006, 
                                 harmonics: '2.4, 3.6 Hz',
                                 level: '正常',
                                 levelColor: 'text-green-600'
                             },
                             { 
                                 fundamentalFreq: 1.5, 
                                 maxAmp: 0.0055, 
                                 harmonics: '3.0, 4.5 Hz',
                                 level: '正常',
                                 levelColor: 'text-green-600'
                             },
                             { 
                                 fundamentalFreq: 1.8, 
                                 maxAmp: 0.0048, 
                                 harmonics: '3.6, 5.4 Hz',
                                 level: '轻微异常',
                                 levelColor: 'text-yellow-600'
                             },
                             { 
                                 fundamentalFreq: 1.1, 
                                 maxAmp: 0.0052, 
                                 harmonics: '2.2, 3.3 Hz',
                                 level: '正常',
                                 levelColor: 'text-green-600'
                             }
                         ];
                         
                         const info = sensorCharacteristics[sensorIndex];
                         const sensorColors = ['bg-orange-500', 'bg-blue-500', 'bg-green-500', 'bg-purple-500'];
                         
                         // 更新传感器名称和颜色指示器
                         document.getElementById('spectrum-sensor-name').textContent = sensorNames[sensorIndex];
                         document.querySelector('#spectrum-sensor-name').parentElement.previousElementSibling.className = 
                             `w-3 h-3 ${sensorColors[sensorIndex]} rounded-full`;
                         
                         // 更新频谱特征信息
                         document.getElementById('fundamental-freq').textContent = `${info.fundamentalFreq} Hz`;
                         document.getElementById('max-amplitude').textContent = `${info.maxAmp.toFixed(4)} m/s²`;
                         document.getElementById('main-harmonics').textContent = info.harmonics;
                         
                         const levelElement = document.getElementById('vibration-level');
                         levelElement.textContent = info.level;
                         levelElement.className = `font-medium ${info.levelColor}`;
                     }
                     
                     // 历史查询模式的传感器样式配置
                     const sensorStyles = [
                         { line: '#f97316', fill: 'rgba(249, 115, 22, 0.15)' }, // CF1 - 橙色
                         { line: '#3b82f6', fill: 'rgba(59, 130, 246, 0.15)' }, // CF2 - 蓝色
                         { line: '#10b981', fill: 'rgba(16, 185, 129, 0.15)' }, // CF3 - 绿色
                         { line: '#8b5cf6', fill: 'rgba(139, 92, 246, 0.15)' }  // CF4 - 紫色
                     ];

                     // 传感器切换事件处理（历史查询模式）
                     document.getElementById('spectrum-chart-controls').addEventListener('change', e => {
                         if (e.target.name === 'spectrum-sensor') {
                             const sensorIndex = parseInt(e.target.value);
                             const sensorNames = ['CF1', 'CF2', 'CF3', 'CF4'];
                             
                             console.log(`Switching to sensor ${sensorNames[sensorIndex]} (History Mode)`);
                             
                             // 使用历史查询模式的样式和数据
                             chart.data.datasets[0].data = historySpectrumData[sensorIndex];
                             chart.data.datasets[0].borderColor = sensorStyles[sensorIndex].line;
                             chart.data.datasets[0].backgroundColor = sensorStyles[sensorIndex].fill;
                             chart.data.datasets[0].label = sensorNames[sensorIndex];
                             chart.update('active');
                             
                             // 更新频谱标题（历史查询模式）
                             const spectrumTitle = document.getElementById('spectrum-chart-title');
                             if (spectrumTitle) {
                                 spectrumTitle.textContent = `频谱图 - ${sensorNames[sensorIndex]}`;
                             }
                             
                             // 高亮显示选中的传感器（历史查询模式）
                             highlightSelectedSensor(sensorIndex);
                             
                             // 更新频谱信息显示
                             updateSpectrumInfo(sensorIndex);
                         }
                     });

                     // 高亮显示选中传感器（历史查询模式）
                     function highlightSelectedSensor(activeIndex) {
                         const sensorRows = document.querySelectorAll('#stress-sensor-list .flex');
                         sensorRows.forEach((row, index) => {
                             row.classList.remove('bg-blue-50', 'border', 'border-blue-200', 'rounded-md');
                             if (index === activeIndex) {
                                 row.classList.add('bg-blue-50', 'border', 'border-blue-200', 'rounded-md');
                             }
                         });
                     }
                    
                                         // 时间范围选择功能
                     const timeRangeSelect = document.getElementById('time-range-select');
                     if (timeRangeSelect) {
                         timeRangeSelect.addEventListener('change', () => {
                             const selectedMinutes = parseInt(timeRangeSelect.value);
                             refreshHistorySpectrumData(selectedMinutes);
                         });
                     }

                     // 刷新历史频谱数据
                     function refreshHistorySpectrumData(timeRangeMinutes = 30) {
                         // 重新生成指定时间范围的频谱数据
                         for (let i = 0; i < 4; i++) {
                             historySpectrumData[i] = generateHistoryModeSpectrumData(i);
                         }
                         
                         // 更新当前显示的数据
                         const currentSensor = document.querySelector('input[name="spectrum-sensor"]:checked');
                         if (currentSensor) {
                             const sensorIndex = parseInt(currentSensor.value);
                             chart.data.datasets[0].data = historySpectrumData[sensorIndex];
                             chart.update('active'); // 平滑过渡更新
                             
                             // 更新频谱信息显示
                             updateSpectrumInfo(sensorIndex);
                         }
                         
                         console.log(`历史频谱数据已刷新 - 时间范围: ${timeRangeMinutes}分钟`);
                     }

                     // 5分钟自动刷新功能
                     setInterval(() => {
                         const selectedRange = timeRangeSelect ? parseInt(timeRangeSelect.value) : 30;
                         refreshHistorySpectrumData(selectedRange);
                     }, 5 * 60 * 1000); // 5分钟

                     // 手动刷新功能
                     const refreshButton = document.getElementById('stress-refresh-btn');
                     if (refreshButton) {
                         refreshButton.addEventListener('click', () => {
                             const selectedRange = timeRangeSelect ? parseInt(timeRangeSelect.value) : 30;
                             refreshHistorySpectrumData(selectedRange);
                         });
                     }
                     // 初始化频谱信息显示
                     updateSpectrumInfo(0);
                };

                createStressChartSet();
                createSpectrumChartSet();
            }

            // 时间序列频谱趋势图表功能
            function initializeSpectrumTrendChart() {
                // 存储最近半小时的频谱数据
                window.spectrumTrendData = {
                    timePoints: [],
                    sensorData: {
                        CF1: [],
                        CF2: [],
                        CF3: [],
                        CF4: []
                    },
                    maxDataPoints: 6, // 半小时，每5分钟一个点
                    updateInterval: 5 * 60 * 1000, // 5分钟
                    lastUpdateTime: null
                };

                // 创建时间序列频谱图表
                const trendCtx = document.getElementById('spectrum-trend-chart').getContext('2d');
                window.spectrumTrendChart = new Chart(trendCtx, {
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'CF1 - 基频幅值',
                                data: [],
                                borderColor: '#8B4513',
                                backgroundColor: 'rgba(139, 69, 19, 0.1)',
                                fill: false,
                                tension: 0.4,
                                pointRadius: 4,
                                pointHoverRadius: 6,
                                borderWidth: 2
                            },
                            {
                                label: 'CF2 - 基频幅值',
                                data: [],
                                borderColor: '#D2691E',
                                backgroundColor: 'rgba(210, 105, 30, 0.1)',
                                fill: false,
                                tension: 0.4,
                                pointRadius: 4,
                                pointHoverRadius: 6,
                                borderWidth: 2
                            },
                            {
                                label: 'CF3 - 基频幅值',
                                data: [],
                                borderColor: '#A0522D',
                                backgroundColor: 'rgba(160, 82, 45, 0.1)',
                                fill: false,
                                tension: 0.4,
                                pointRadius: 4,
                                pointHoverRadius: 6,
                                borderWidth: 2
                            },
                            {
                                label: 'CF4 - 基频幅值',
                                data: [],
                                borderColor: '#CD853F',
                                backgroundColor: 'rgba(205, 133, 63, 0.1)',
                                fill: false,
                                tension: 0.4,
                                pointRadius: 4,
                                pointHoverRadius: 6,
                                borderWidth: 2
                            }
                        ]
                    },
                    options: {
                        maintainAspectRatio: false,
                        responsive: true,
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'minute',
                                    displayFormats: {
                                        minute: 'HH:mm'
                                    },
                                    tooltipFormat: 'YYYY-MM-DD HH:mm:ss'
                                },
                                title: {
                                    display: true,
                                    text: '时间',
                                    font: { size: 12, weight: 'bold' },
                                    color: '#374151'
                                },
                                ticks: {
                                    maxTicksLimit: 7,
                                    font: { size: 10 },
                                    color: '#6b7280'
                                },
                                grid: { color: '#e5e7eb' }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: '基频幅值 (dB)',
                                    font: { size: 12, weight: 'bold' },
                                    color: '#374151'
                                },
                                ticks: {
                                    font: { size: 10 },
                                    color: '#6b7280',
                                    callback: function(value) {
                                        return value.toFixed(1) + ' dB';
                                    }
                                },
                                grid: { color: '#e5e7eb' }
                            }
                        },
                        plugins: {
                            legend: {
                                display: true,
                                position: 'bottom',
                                labels: {
                                    boxWidth: 12,
                                    usePointStyle: true,
                                    padding: 15,
                                    font: { size: 11 }
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#ffffff',
                                bodyColor: '#ffffff',
                                borderColor: '#f97316',
                                borderWidth: 1,
                                cornerRadius: 6,
                                displayColors: true,
                                callbacks: {
                                    title: function(context) {
                                        const date = new Date(context[0].parsed.x);
                                        return `时间: ${date.toLocaleString('zh-CN')}`;
                                    },
                                    label: function(context) {
                                        const sensorName = context.dataset.label.split(' - ')[0];
                                        const value = context.parsed.y.toFixed(1);
                                        return `${sensorName}: ${value} dB`;
                                    },
                                    afterBody: function(context) {
                                        return '柔性平台频谱趋势监测';
                                    }
                                }
                            }
                        }
                    }
                });

                // 初始化历史数据（模拟最近半小时的数据）
                initializeSpectrumTrendData();

                // 启动5分钟自动更新
                startSpectrumTrendUpdates();
                
                // 与30分钟连续监测数据同步
                setupDataSynchronization();
            }

            // 设置数据同步机制
            function setupDataSynchronization() {
                // 监听30分钟连续监测的数据更新
                if (window.continuousMonitoring) {
                    const originalCollectData = window.continuousMonitoring.collectData;
                    
                    window.continuousMonitoring.collectData = function() {
                        // 调用原始数据采集方法
                        originalCollectData.call(this);
                        
                        // 同步更新频谱趋势图（如果需要）
                        const now = new Date();
                        const lastTrendUpdate = window.spectrumTrendData.lastUpdateTime;
                        
                        if (!lastTrendUpdate || (now - lastTrendUpdate) >= window.spectrumTrendData.updateInterval) {
                            updateSpectrumTrendData();
                        }
                    };
                }
                
                // 设置数据一致性检查
                setInterval(() => {
                    checkDataConsistency();
                }, 60000); // 每分钟检查一次
            }

            // 数据一致性检查
            function checkDataConsistency() {
                const trendData = window.spectrumTrendData;
                const now = new Date();
                
                // 检查最后更新时间
                if (trendData.lastUpdateTime) {
                    const timeSinceUpdate = now - trendData.lastUpdateTime;
                    const maxAllowedGap = trendData.updateInterval + 60000; // 允许1分钟延迟
                    
                    if (timeSinceUpdate > maxAllowedGap) {
                        console.warn(`频谱趋势数据更新延迟: ${(timeSinceUpdate/1000).toFixed(0)}秒`);
                        
                        // 强制更新数据
                        updateSpectrumTrendData();
                    }
                }
                
                // 检查数据完整性
                const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                sensors.forEach(sensor => {
                    const sensorData = trendData.sensorData[sensor];
                    if (sensorData.length === 0) {
                        console.warn(`${sensor}传感器数据缺失，重新初始化`);
                        initializeSpectrumTrendData();
                        return;
                    }
                });
            }

            // 初始化频谱趋势历史数据
            function initializeSpectrumTrendData() {
                const now = new Date();
                const data = window.spectrumTrendData;
                
                // 生成最近半小时的6个数据点（每5分钟一个）
                for (let i = 5; i >= 0; i--) {
                    const timePoint = new Date(now.getTime() - i * 5 * 60 * 1000);
                    data.timePoints.push(timePoint);
                    
                    // 为每个传感器生成基频幅值数据
                    const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                    sensors.forEach((sensor, index) => {
                        // 基于时间和传感器生成变化趋势
                        const baseAmplitude = -10 + index * 2; // 不同传感器的基准幅值
                        const timeVariation = Math.sin((i / 6) * Math.PI * 2) * 3; // 周期性变化
                        const randomVariation = (Math.random() - 0.5) * 2; // 随机变化
                        const amplitude = baseAmplitude + timeVariation + randomVariation;
                        
                        data.sensorData[sensor].push({
                            x: timePoint.getTime(),
                            y: parseFloat(amplitude.toFixed(1))
                        });
                    });
                }
                
                // 更新图表数据
                updateSpectrumTrendChart();
            }

            // 更新频谱趋势图表
            function updateSpectrumTrendChart() {
                if (!window.spectrumTrendChart) return;
                
                const data = window.spectrumTrendData;
                const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                
                sensors.forEach((sensor, index) => {
                    window.spectrumTrendChart.data.datasets[index].data = data.sensorData[sensor];
                });
                
                window.spectrumTrendChart.update('none');
            }

            // 启动5分钟自动更新
            function startSpectrumTrendUpdates() {
                // 立即执行一次更新
                updateSpectrumTrendData();
                
                // 设置5分钟定时更新
                setInterval(() => {
                    updateSpectrumTrendData();
                }, window.spectrumTrendData.updateInterval);
                
                console.log('频谱趋势图表5分钟自动更新已启动');
            }

            // 更新频谱趋势数据
            function updateSpectrumTrendData() {
                const now = new Date();
                const data = window.spectrumTrendData;
                
                // 添加新的时间点
                data.timePoints.push(now);
                
                // 为每个传感器添加新的数据点
                const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                sensors.forEach((sensor, index) => {
                    // 生成当前时刻的基频幅值
                    const currentSpectrumData = generateRealisticSpectrumData(index);
                    
                    // 找到基频附近的最大幅值
                    const fundamentalFreqs = [1.2, 1.5, 1.8, 1.1];
                    const fundamentalFreq = fundamentalFreqs[index];
                    
                    let maxAmplitude = -60;
                    currentSpectrumData.forEach(point => {
                        if (Math.abs(point.x - fundamentalFreq) <= 0.2) { // 基频附近±0.2Hz
                            maxAmplitude = Math.max(maxAmplitude, point.y);
                        }
                    });
                    
                    data.sensorData[sensor].push({
                        x: now.getTime(),
                        y: parseFloat(maxAmplitude.toFixed(1))
                    });
                    
                    // 保持最多6个数据点（半小时）
                    if (data.sensorData[sensor].length > data.maxDataPoints) {
                        data.sensorData[sensor].shift();
                    }
                });
                
                // 保持时间点数组同步
                if (data.timePoints.length > data.maxDataPoints) {
                    data.timePoints.shift();
                }
                
                // 更新图表
                updateSpectrumTrendChart();
                
                // 更新统计信息显示
                updateTrendStatsDisplay();
                
                // 记录更新时间
                data.lastUpdateTime = now;
                
                // 分析趋势变化
                analyzeTrendChanges();
                
                // 数据质量检查
                validateTrendDataQuality();
                
                console.log(`频谱趋势数据更新: ${now.toLocaleTimeString('zh-CN')}, 数据点数: ${data.sensorData.CF1.length}`);
            }

            // 分析频谱趋势变化
            function analyzeTrendChanges() {
                const data = window.spectrumTrendData;
                const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                
                sensors.forEach((sensor, index) => {
                    const sensorData = data.sensorData[sensor];
                    if (sensorData.length >= 2) {
                        const latest = sensorData[sensorData.length - 1];
                        const previous = sensorData[sensorData.length - 2];
                        const change = latest.y - previous.y;
                        const changePercent = ((change / Math.abs(previous.y)) * 100).toFixed(1);
                        
                        // 更新图表样式以反映趋势
                        const dataset = window.spectrumTrendChart.data.datasets[index];
                        
                        if (Math.abs(change) > 1) { // 显著变化
                            dataset.borderWidth = 3;
                            dataset.pointRadius = 5;
                            
                            if (change > 0) {
                                // 上升趋势 - 增强显示
                                dataset.pointBackgroundColor = '#ef4444';
                                dataset.pointBorderColor = '#dc2626';
                            } else {
                                // 下降趋势 - 蓝色显示
                                dataset.pointBackgroundColor = '#3b82f6';
                                dataset.pointBorderColor = '#2563eb';
                            }
                        } else {
                            // 稳定状态
                            dataset.borderWidth = 2;
                            dataset.pointRadius = 4;
                            dataset.pointBackgroundColor = dataset.borderColor;
                            dataset.pointBorderColor = dataset.borderColor;
                        }
                        
                        console.log(`${sensor} 趋势变化: ${change.toFixed(1)} dB (${changePercent}%)`);
                    }
                });
            }

            // 数据质量检查
            function validateTrendDataQuality() {
                const data = window.spectrumTrendData;
                const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                let qualityIssues = [];
                
                sensors.forEach(sensor => {
                    const sensorData = data.sensorData[sensor];
                    if (sensorData.length > 0) {
                        const latest = sensorData[sensorData.length - 1];
                        
                        // 检查数值范围
                        if (latest.y < -30 || latest.y > 10) {
                            qualityIssues.push(`${sensor}幅值异常: ${latest.y} dB`);
                        }
                        
                        // 检查时间连续性
                        if (sensorData.length >= 2) {
                            const timeDiff = latest.x - sensorData[sensorData.length - 2].x;
                            const expectedDiff = data.updateInterval;
                            
                            if (Math.abs(timeDiff - expectedDiff) > 30000) { // 允许±30秒误差
                                qualityIssues.push(`${sensor}时间间隔异常: ${(timeDiff/1000).toFixed(0)}秒`);
                            }
                        }
                    }
                });
                
                if (qualityIssues.length > 0) {
                    console.warn('频谱趋势数据质量问题:', qualityIssues);
                }
                
                return qualityIssues.length === 0;
            }

            // 获取频谱趋势统计信息
            function getSpectrumTrendStats() {
                const data = window.spectrumTrendData;
                const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                const stats = {};
                
                sensors.forEach(sensor => {
                    const sensorData = data.sensorData[sensor];
                    if (sensorData.length > 0) {
                        const values = sensorData.map(point => point.y);
                        const min = Math.min(...values);
                        const max = Math.max(...values);
                        const avg = values.reduce((sum, val) => sum + val, 0) / values.length;
                        const latest = values[values.length - 1];
                        
                        // 计算趋势方向
                        let trend = '稳定';
                        if (sensorData.length >= 3) {
                            const recent = values.slice(-3);
                            const slope = (recent[2] - recent[0]) / 2; // 简单线性趋势
                            if (slope > 0.5) trend = '上升';
                            else if (slope < -0.5) trend = '下降';
                        }
                        
                        stats[sensor] = {
                            min: min.toFixed(1),
                            max: max.toFixed(1),
                            avg: avg.toFixed(1),
                            latest: latest.toFixed(1),
                            trend: trend,
                            range: (max - min).toFixed(1)
                        };
                    }
                });
                
                return stats;
            }

            // 更新趋势统计信息显示
            function updateTrendStatsDisplay() {
                const stats = getSpectrumTrendStats();
                const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                
                sensors.forEach(sensor => {
                    const sensorStats = stats[sensor];
                    if (sensorStats) {
                        const sensorLower = sensor.toLowerCase();
                        
                        // 更新数值显示
                        const latestEl = document.getElementById(`${sensorLower}-latest`);
                        const trendEl = document.getElementById(`${sensorLower}-trend`);
                        const rangeEl = document.getElementById(`${sensorLower}-range`);
                        
                        if (latestEl) latestEl.textContent = `${sensorStats.latest} dB`;
                        if (rangeEl) rangeEl.textContent = `${sensorStats.range} dB`;
                        
                        if (trendEl) {
                            trendEl.textContent = sensorStats.trend;
                            
                            // 根据趋势设置颜色
                            trendEl.className = 'font-medium';
                            if (sensorStats.trend === '上升') {
                                trendEl.classList.add('text-red-600');
                            } else if (sensorStats.trend === '下降') {
                                trendEl.classList.add('text-blue-600');
                            } else {
                                trendEl.classList.add('text-green-600');
                            }
                        }
                    }
                });
                
                // 更新最后更新时间
                const lastUpdateEl = document.getElementById('trend-last-update');
                if (lastUpdateEl && window.spectrumTrendData.lastUpdateTime) {
                    lastUpdateEl.textContent = window.spectrumTrendData.lastUpdateTime.toLocaleTimeString('zh-CN');
                }
            }

            function initializeHistoryStrainView() {
                setupTabSwitching('.history-strain-tab', '.history-strain-content');

                document.querySelectorAll('#history-strain-view .datepicker').forEach(el => {
                    flatpickr(el, {
                        enableTime: true,
                        dateFormat: "Y-m-d H:i",
                    });
                });

                const STRAIN_SENSOR_CONFIG = {
                    rigid: [
                        { id: 'SS1', group: 0, base: -26.4 },
                        { id: 'SS2', group: 0, base: -25.9 },
                        { id: 'SS3', group: 0, base: -27.1 },
                        { id: 'SS4', group: 0, base: -23.8 },
                        { id: 'SS5', group: 1, base: -29.6 },
                        { id: 'SS6', group: 1, base: -28.4 },
                        { id: 'SS7', group: 1, base: -24.7 },
                        { id: 'SS8', group: 1, base: -27.5 }
                    ],
                    flexible: [
                        { id: 'FS1', group: 0, base: -18.2 },
                        { id: 'FS2', group: 0, base: -19.1 },
                        { id: 'FS3', group: 0, base: -17.4 },
                        { id: 'FS4', group: 0, base: -20.5 },
                        { id: 'FS5', group: 1, base: -21.3 },
                        { id: 'FS6', group: 1, base: -19.8 },
                        { id: 'FS7', group: 1, base: -18.6 },
                        { id: 'FS8', group: 1, base: -22.1 }
                    ]
                };

                const SENSOR_STYLES = [
                    { line: '#2563eb', fill: 'rgba(37, 99, 235, 0.15)' },
                    { line: '#0ea5e9', fill: 'rgba(14, 165, 233, 0.15)' },
                    { line: '#f97316', fill: 'rgba(249, 115, 22, 0.15)' },
                    { line: '#f59e0b', fill: 'rgba(245, 158, 11, 0.15)' },
                    { line: '#22c55e', fill: 'rgba(34, 197, 94, 0.15)' },
                    { line: '#a855f7', fill: 'rgba(168, 85, 247, 0.15)' },
                    { line: '#ef4444', fill: 'rgba(239, 68, 68, 0.15)' },
                    { line: '#0f172a', fill: 'rgba(15, 23, 42, 0.12)' }
                ];

                const TABLE_TOTAL = { rigid: 85, flexible: 92 };

                const quickGroups = {};
                document.querySelectorAll('#history-strain-view .history-strain-quick').forEach(button => {
                    const key = `${button.dataset.platform}-${button.dataset.context}`;
                    if (!quickGroups[key]) {
                        quickGroups[key] = [];
                    }
                    quickGroups[key].push(button);
                    button.addEventListener('click', () => {
                        quickGroups[key].forEach(btn => {
                            btn.classList.remove('bg-blue-500', 'text-white');
                            btn.classList.add('text-gray-600');
                        });
                        button.classList.add('bg-blue-500', 'text-white');
                        button.classList.remove('text-gray-600');
                    });
                });
                Object.values(quickGroups).forEach(group => {
                    if (!group.length) return;
                    group.forEach(btn => {
                        btn.classList.remove('bg-blue-500', 'text-white');
                        btn.classList.add('text-gray-600');
                    });
                    group[0].classList.add('bg-blue-500', 'text-white');
                    group[0].classList.remove('text-gray-600');
                });

                const strainState = {
                    rigid: null,
                    flexible: null
                };

                const generateTimeLabels = () => {
                    const now = Date.now();
                    return Array.from({ length: 20 }, (_, idx) => {
                        const timestamp = now - (19 - idx) * 5 * 60 * 1000;
                        const date = new Date(timestamp);
                        const h = String(date.getHours()).padStart(2, '0');
                        const m = String(date.getMinutes()).padStart(2, '0');
                        const s = String(date.getSeconds()).padStart(2, '0');
                        return `${h}:${m}:${s}`;
                    });
                };

                const createSeries = (base, sensorIndex, length) => {
                    return Array.from({ length }, (_, idx) => {
                        const wave = Math.sin(idx / 3 + sensorIndex * 0.45) * 4.2;
                        const sway = Math.cos(idx / 6 + sensorIndex * 0.3) * 1.6;
                        const noise = (Math.random() - 0.5) * 1.1;
                        return +(base + wave + sway + noise).toFixed(3);
                    });
                };

                const updateSensorRowHighlight = (platform, sensorId, isActive) => {
                    const state = strainState[platform];
                    if (!state || !state.elements.sensorList) return;
                    const row = state.elements.sensorList.querySelector(`[data-sensor-row="${sensorId}"]`);
                    if (!row) return;
                    row.classList.toggle('bg-blue-50', isActive);
                    row.classList.toggle('border-blue-200', isActive);
                    row.classList.toggle('border-transparent', !isActive);
                };

                const renderTable = (platform) => {
                    const state = strainState[platform];
                    if (!state || !state.elements.tableBody) return;
                    const rows = Array.from({ length: 12 }, (_, idx) => {
                        const sensor = state.sensors[idx % state.sensors.length];
                        const baseValue = state.series[sensor.id]?.slice(-1)[0] ?? sensor.base;
                        const reading = baseValue + (Math.random() - 0.5) * 1.0;
                        const formatted = reading.toFixed(3);
                        const timestamp = new Date(Date.now() - idx * 45 * 60 * 1000).toISOString().replace('T', ' ').slice(0, 16);
                        return `
                            <tr>
                                <td class="px-6 py-3 text-sm text-gray-700">${sensor.id}</td>
                                <td class="px-6 py-3 text-sm text-gray-700">${formatted}</td>
                                <td class="px-6 py-3 text-sm text-gray-500">${timestamp}</td>
                            </tr>
                        `;
                    }).join('');
                    state.elements.tableBody.innerHTML = rows;
                    if (state.elements.total) {
                        state.elements.total.textContent = TABLE_TOTAL[platform] ?? rows.length;
                    }
                };

                const renderSensorList = (platform) => {
                    const state = strainState[platform];
                    if (!state || !state.elements.sensorList) return;
                    state.elements.sensorList.innerHTML = state.sensors.map(sensor => `
                        <label class="flex items-center gap-2 rounded-md border border-transparent px-2 py-1.5 text-sm text-gray-700 hover:bg-blue-50" data-sensor-row="${sensor.id}">
                            <input type="checkbox" class="history-strain-chart-toggle h-4 w-4 text-blue-500" data-platform="${platform}" data-sensor="${sensor.id}" data-group="${sensor.group}" checked>
                            <span>${sensor.id}</span>
                        </label>
                    `).join('');
                    state.elements.sensorListCheckboxes = state.elements.sensorList.querySelectorAll('.history-strain-chart-toggle');
                };

                const initCharts = (platform) => {
                    const state = strainState[platform];
                    if (!state) return;
                    const baseOptions = {
                        maintainAspectRatio: false,
                        responsive: true,
                        interaction: { mode: 'index', intersect: false },
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: { usePointStyle: true, boxWidth: 10 }
                            }
                        },
                        scales: {
                            x: { grid: { color: '#f1f5f9' } },
                            y: {
                                grid: { color: '#e5e7eb' },
                                title: { display: true, text: '应变 (μɛ)' }
                            }
                        }
                    };

                    [0, 1].forEach(groupIndex => {
                        const canvas = document.getElementById(`history-strain-chart${groupIndex + 1}-${platform}`);
                        if (!canvas) return;
                        const groupSensors = state.sensors.filter(sensor => sensor.group === groupIndex);
                        const datasets = groupSensors.map((sensor, datasetIndex) => {
                            state.datasetMap[sensor.id] = { chartIndex: groupIndex, datasetIndex };
                            return {
                                label: sensor.id,
                                data: state.series[sensor.id],
                                borderColor: sensor.style.line,
                                backgroundColor: sensor.style.fill,
                                tension: 0.3,
                                pointRadius: 0,
                                borderWidth: 2,
                                fill: true
                            };
                        });
                        const chart = new Chart(canvas.getContext('2d'), {
                            type: 'line',
                            data: {
                                labels: state.labels,
                                datasets
                            },
                            options: baseOptions
                        });
                        state.charts[groupIndex] = chart;
                    });
                };
                const attachSensorToggle = (platform) => {
                    const state = strainState[platform];
                    if (!state || !state.elements.sensorListCheckboxes) return;
                    state.elements.sensorListCheckboxes.forEach(checkbox => {
                        checkbox.addEventListener('change', () => {
                            const group = checkbox.dataset.group;
                            const siblings = Array.from(state.elements.sensorListCheckboxes).filter(item => item.dataset.group === group);
                            const checkedCount = siblings.filter(item => item.checked).length;
                            if (!checkbox.checked && checkedCount === 0) {
                                checkbox.checked = true;
                                return;
                            }

                            const meta = state.datasetMap[checkbox.dataset.sensor];
                            if (!meta) return;
                            const chart = state.charts[meta.chartIndex];
                            const datasetMeta = chart.getDatasetMeta(meta.datasetIndex);
                            datasetMeta.hidden = !checkbox.checked;
                            chart.update();
                            updateSensorRowHighlight(platform, checkbox.dataset.sensor, checkbox.checked);
                        });
                    });
                };

                const refreshPlatform = (platform) => {
                    const state = strainState[platform];
                    if (!state) return;
                    state.labels = generateTimeLabels();
                    state.sensors.forEach((sensor, idx) => {
                        state.series[sensor.id] = createSeries(sensor.base, idx, state.labels.length);
                    });
                    state.charts.forEach(chart => {
                        if (!chart) return;
                        chart.data.labels = state.labels;
                        chart.data.datasets.forEach(dataset => {
                            dataset.data = state.series[dataset.label];
                        });
                        chart.update();
                    });
                    renderTable(platform);
                    if (state.elements.sensorListCheckboxes) {
                        state.elements.sensorListCheckboxes.forEach(checkbox => {
                            updateSensorRowHighlight(platform, checkbox.dataset.sensor, checkbox.checked);
                        });
                    }
                };

                ['rigid', 'flexible'].forEach(platform => {
                    const sensors = STRAIN_SENSOR_CONFIG[platform].map((sensor, index) => ({
                        ...sensor,
                        style: SENSOR_STYLES[index % SENSOR_STYLES.length]
                    }));

                    strainState[platform] = {
                        sensors,
                        labels: generateTimeLabels(),
                        series: {},
                        charts: [],
                        datasetMap: {},
                        elements: {
                            tableBody: document.getElementById(`history-strain-table-${platform}`),
                            total: document.getElementById(`history-strain-total-${platform}`),
                            sensorList: document.getElementById(`history-strain-chart-sensors-${platform}`),
                            sensorListCheckboxes: null
                        }
                    };

                    const state = strainState[platform];
                    state.sensors.forEach((sensor, idx) => {
                        state.series[sensor.id] = createSeries(sensor.base, idx, state.labels.length);
                    });

                    renderTable(platform);
                    renderSensorList(platform);
                    initCharts(platform);
                    attachSensorToggle(platform);
                    if (state.elements.sensorListCheckboxes) {
                        state.elements.sensorListCheckboxes.forEach(checkbox => {
                            updateSensorRowHighlight(platform, checkbox.dataset.sensor, checkbox.checked);
                        });
                    }

                    const refreshButton = document.getElementById(`history-strain-refresh-${platform}`);
                    if (refreshButton) {
                        refreshButton.addEventListener('click', () => refreshPlatform(platform));
                    }
                });
            }
            function initializeHistoryInclinationView() {
                // Setup tab switching for four-tab layout
                setupTabSwitching('.history-inclination-tab', '.history-inclination-section');

                // Initialize Flatpickr for date pickers within the view
                document.querySelectorAll('#history-inclination-view .datepicker').forEach(el => {
                    flatpickr(el, {
                        enableTime: true,
                        dateFormat: "Y-m-d H:i",
                    });
                });

                const SENSOR_META = {
                    rigid: ['GRY01', 'GRY02', 'GRY03', 'GRY04'],
                    flexible: ['QJ1', 'QJ2', 'QJ3', 'QJ4']
                };
                const SENSOR_LOCATIONS = ['A1', 'A2', 'A3', 'A4'];
                const SENSOR_COLORS = ['#2563eb', '#10b981', '#f97316', '#ef4444'];
                const chartInstances = {};

                const baseChartOptions = {
                    maintainAspectRatio: false,
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                boxWidth: 10
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'hour',
                                displayFormats: {
                                    hour: 'MM-dd HH:mm'
                                }
                            },
                            ticks: {
                                maxRotation: 0,
                                autoSkipPadding: 16
                            },
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            min: -1.2,
                            max: 1.2,
                            grid: {
                                color: '#e5e7eb'
                            },
                            ticks: {
                                stepSize: 0.3
                            }
                        }
                    }
                };
                const buildDatasets = (platform) => {
                    const sensors = SENSOR_META[platform];
                    const timeStart = Date.now() - 23 * 60 * 60 * 1000;
                    const timePoints = Array.from({ length: 24 }, (_, i) => timeStart + i * 60 * 60 * 1000);

                    const createSeries = (multiplier) => sensors.map((sensor, index) => ({
                        label: sensor,
                        borderColor: SENSOR_COLORS[index % SENSOR_COLORS.length],
                        borderWidth: 1.5,
                        fill: false,
                        tension: 0.35,
                        pointRadius: 0,
                        data: timePoints.map((timestamp) => ({
                            x: timestamp,
                            y: (Math.random() - 0.5) * multiplier
                        }))
                    }));

                    return {
                        x: createSeries(platform === 'rigid' ? 1.2 : 1.0),
                        y: createSeries(platform === 'rigid' ? 1.4 : 1.1)
                    };
                };

                const createCharts = (platform) => {
                    const xCanvas = document.getElementById(`history-inclination-chart-${platform}-x`);
                    const yCanvas = document.getElementById(`history-inclination-chart-${platform}-y`);
                    if (!xCanvas || !yCanvas) {
                        return;
                    }

                    const datasets = buildDatasets(platform);
                    chartInstances[platform] = {
                        x: new Chart(xCanvas.getContext('2d'), {
                            type: 'line',
                            data: { datasets: datasets.x },
                            options: baseChartOptions
                        }),
                        y: new Chart(yCanvas.getContext('2d'), {
                            type: 'line',
                            data: { datasets: datasets.y },
                            options: baseChartOptions
                        })
                    };

                    const axisButtons = document.querySelectorAll(`#history-inclination-view .history-inclination-axis[data-platform="${platform}"]`);
                    axisButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            axisButtons.forEach(btn => {
                                btn.classList.remove('bg-blue-500', 'text-white');
                                btn.classList.add('text-gray-600');
                            });
                            button.classList.add('bg-blue-500', 'text-white');
                            button.classList.remove('text-gray-600');
                            chartInstances[platform].activeAxis = button.dataset.axis;
                        });
                    });

                    if (axisButtons.length) {
                        axisButtons[0].dispatchEvent(new Event('click'));
                    }
                };

                const attachSensorToggles = (platform) => {
                    const container = document.querySelector(`[data-inclination-platform="${platform}"]`);
                    if (!container) {
                        return;
                    }

                    container.querySelectorAll('input[type="checkbox"]').forEach((checkbox, index) => {
                        checkbox.addEventListener('change', () => {
                            const charts = chartInstances[platform];
                            if (!charts) return;
                            charts.x.setDatasetVisibility(index, checkbox.checked);
                            charts.y.setDatasetVisibility(index, checkbox.checked);
                            charts.x.update();
                            charts.y.update();
                        });
                    });
                };
                const attachRefreshHandlers = () => {
                    document.querySelectorAll('[data-inclination-refresh]').forEach(button => {
                        button.addEventListener('click', () => {
                            const platform = button.dataset.inclinationRefresh;
                            const charts = chartInstances[platform];
                            if (!charts) return;

                            const datasets = buildDatasets(platform);
                            charts.x.data.datasets.forEach((dataset, idx) => {
                                dataset.data = datasets.x[idx].data;
                            });
                            charts.y.data.datasets.forEach((dataset, idx) => {
                                dataset.data = datasets.y[idx].data;
                            });
                            charts.x.update();
                            charts.y.update();
                        });
                    });
                };

                const populateTable = (platform) => {
                    const tbody = document.getElementById(`history-inclination-table-${platform}`);
                    if (!tbody) {
                        return;
                    }

                    const sensors = SENSOR_META[platform];
                    const rows = Array.from({ length: 12 }, (_, index) => {
                        const sensorIndex = index % sensors.length;
                        const sensor = sensors[sensorIndex];
                        const location = SENSOR_LOCATIONS[sensorIndex];
                        const xValue = (Math.random() * 0.02 - 0.01).toFixed(6);
                        const yValue = (Math.random() * 0.02 - 0.01).toFixed(6);
                        const time = new Date(Date.now() - index * 60 * 60 * 1000).toISOString().replace('T', ' ').slice(0, 19);

                        return `
                            <tr>
                                <td class="px-6 py-3 text-sm text-gray-700">${sensor}</td>
                                <td class="px-6 py-3 text-sm text-gray-500">${location}</td>
                                <td class="px-6 py-3 text-sm text-gray-700">${xValue}</td>
                                <td class="px-6 py-3 text-sm text-gray-700">${yValue}</td>
                                <td class="px-6 py-3 text-sm text-gray-500">${time}</td>
                            </tr>
                        `;
                    }).join('');

                    tbody.innerHTML = rows;
                };

                ['rigid', 'flexible'].forEach(platform => {
                    populateTable(platform);
                    createCharts(platform);
                    attachSensorToggles(platform);
                });

                attachRefreshHandlers();
            }
            // 初始化涂层监测历史查询视图
            function initializeHistoryCoatingView() {
                setupTabSwitching('.history-coating-tab', '.history-coating-section');

                document.querySelectorAll('#history-coating-view .datepicker').forEach(el => {
                    flatpickr(el, {
                        enableTime: true,
                        dateFormat: "Y-m-d H:i",
                    });
                });

                const SENSOR_META = {
                    rigid: ['CS1', 'CS2', 'CS3', 'CS4'],
                    flexible: ['CS5', 'CS6', 'CS7', 'CS8']
                };

                const chartInstances = {};
                const chartConfigs = [
                    { key: 'max', title: '电流密度最大值(pA/cm^2)', color: 'rgba(59, 130, 246, 1)', fill: 'rgba(59, 130, 246, 0.2)' },
                    { key: 'min', title: '电流密度最小值(pA/cm^2)', color: 'rgba(239, 68, 68, 1)', fill: 'rgba(239, 68, 68, 0.2)' },
                    { key: 'avg', title: '电流密度平均值(pA/cm^2)', color: 'rgba(34, 197, 94, 1)', fill: 'rgba(34, 197, 94, 0.2)' },
                    { key: 'rate', title: '腐蚀速率(um/Y)', color: 'rgba(249, 115, 22, 1)', fill: 'rgba(249, 115, 22, 0.2)' }
                ];

                const baseChartOptions = {
                    maintainAspectRatio: false,
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'day',
                                displayFormats: {
                                    day: 'MM-dd'
                                }
                            },
                            ticks: {
                                maxRotation: 0,
                                autoSkipPadding: 12
                            },
                            grid: {
                                color: '#e5e7eb'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#e5e7eb'
                            }
                        }
                    }
                };

                const buildSeries = (key) => {
                    const now = Date.now();
                    const points = Array.from({ length: 30 }, (_, i) => now - (29 - i) * 24 * 60 * 60 * 1000);
                    let base = 18;
                    let range = 6;

                    if (key === 'min') {
                        base = 8;
                        range = 4;
                    }
                    if (key === 'avg') {
                        base = 12;
                        range = 5;
                    }
                    if (key === 'rate') {
                        base = 1;
                        range = 0.5;
                    }

                    return points.map(timestamp => ({
                        x: timestamp,
                        y: +(base + (Math.random() - 0.5) * range).toFixed(2)
                    }));
                };

                const createCharts = (platform) => {
                    chartInstances[platform] = {};

                    chartConfigs.forEach(config => {
                        const canvas = document.getElementById(`history-coating-chart-${platform}-${config.key}`);
                        if (!canvas) return;

                        const options = JSON.parse(JSON.stringify(baseChartOptions));
                        if (config.key === 'rate') {
                            options.scales.y.suggestedMax = 2;
                        } else {
                            options.scales.y.suggestedMax = 30;
                        }

                        chartInstances[platform][config.key] = new Chart(canvas.getContext('2d'), {
                            type: 'line',
                            data: {
                                datasets: [{
                                    data: buildSeries(config.key),
                                    borderColor: config.color,
                                    backgroundColor: config.fill,
                                    tension: 0.3,
                                    fill: true,
                                    pointRadius: 0
                                }]
                            },
                            options
                        });
                    });
                };

                const populateTable = (platform) => {
                    const tbody = document.getElementById(`history-coating-table-${platform}`);
                    if (!tbody) {
                        return;
                    }

                    const sensors = SENSOR_META[platform];
                    const rows = Array.from({ length: 12 }, (_, index) => {
                        const sensor = sensors[index % sensors.length];
                        const currentMax = (Math.random() * 20 + 10).toFixed(2);
                        const currentMin = (Math.random() * 10 + 5).toFixed(2);
                        const currentAvg = (Math.random() * 15 + 8).toFixed(2);
                        const rate = (Math.random() * 0.8 + 0.4).toFixed(2);
                        const time = new Date(Date.now() - index * 6 * 60 * 60 * 1000).toISOString().replace('T', ' ').slice(0, 19);

                        return `
                            <tr>
                                <td class="px-6 py-3 text-sm text-gray-700">${sensor}</td>
                                <td class="px-6 py-3 text-sm text-gray-700">${currentMax}</td>
                                <td class="px-6 py-3 text-sm text-gray-700">${currentMin}</td>
                                <td class="px-6 py-3 text-sm text-gray-700">${currentAvg}</td>
                                <td class="px-6 py-3 text-sm text-gray-700">${rate}</td>
                                <td class="px-6 py-3 text-sm text-gray-500">${time}</td>
                            </tr>
                        `;
                    }).join('');

                    tbody.innerHTML = rows;
                };
                ['rigid', 'flexible'].forEach(platform => {
                    populateTable(platform);
                    createCharts(platform);
                });
            }
            // 初始化索力监测历史查询视图
            function initializeHistoryCableForceView() {
                setupTabSwitching('.history-cable-force-tab', '.history-cable-force-content');

                document.querySelectorAll('#history-cable-force-view .datepicker').forEach(el => {
                    flatpickr(el, {
                        enableTime: true,
                        dateFormat: "Y-m-d H:i",
                    });
                });

                const sensors = ['CF1', 'CF2', 'CF3', 'CF4'];
                const sensorStyles = [
                    { line: '#2563eb', fill: 'rgba(37, 99, 235, 0.15)' },
                    { line: '#0ea5e9', fill: 'rgba(14, 165, 233, 0.15)' },
                    { line: '#f97316', fill: 'rgba(249, 115, 22, 0.15)' },
                    { line: '#f59e0b', fill: 'rgba(245, 158, 11, 0.15)' },
                    { line: '#22c55e', fill: 'rgba(34, 197, 94, 0.15)' },
                    { line: '#a855f7', fill: 'rgba(168, 85, 247, 0.15)' },
                    { line: '#ef4444', fill: 'rgba(239, 68, 68, 0.15)' },
                    { line: '#64748b', fill: 'rgba(100, 116, 139, 0.15)' }
                ];
                const defaultVisibleCount = 4;

                const tableBody = document.getElementById('history-cable-force-table');
                const sensorList = document.getElementById('history-cable-force-sensor-list');
                const tensionCtx = document.getElementById('history-cable-force-chart-tension');
                const spectrumCtx = document.getElementById('history-cable-force-chart-spectrum');
                const spectrumTitle = document.getElementById('history-cable-force-spectrum-title');

                if (!tableBody || !sensorList || !tensionCtx || !spectrumCtx) {
                    return;
                }

                const timeLabels = Array.from({ length: 24 }, (_, hour) => `${hour.toString().padStart(2, '0')}:00`);
                const tensionSeries = sensors.map((_, sensorIdx) => (
                    timeLabels.map((_, pointIdx) => {
                        const base = 1265 + sensorIdx * 14;
                        const wave = Math.sin(pointIdx / 3 + sensorIdx * 0.4) * 18;
                        const noise = (Math.random() - 0.5) * 6;
                        return +(base + wave + noise).toFixed(1);
                    })
                ));

                const spectrumLabels = Array.from({ length: 100 }, (_, i) => +(i * 0.05).toFixed(2));
                const spectrumSeries = sensors.map((_, sensorIdx) => (
                    spectrumLabels.map((label) => {
                        const peak = Math.exp(-Math.pow(label - (0.8 + sensorIdx * 0.12), 2) / 0.22) * 0.002;
                        const noise = (Math.random() - 0.5) * 0.0006;
                        return +(peak + noise).toFixed(5);
                    })
                ));

                const buildTableRows = () => {
                    const rows = sensors.map((sensor, index) => {
                        const tension = (1275 + index * 6 + (Math.random() - 0.5) * 12).toFixed(1);
                        const time = new Date(Date.now() - index * 60 * 60 * 1000).toISOString().replace('T', ' ').slice(0, 19);
                        return `
                            <tr>
                                <td class=\"px-6 py-3 text-sm text-gray-700\">${sensor}</td>
                                <td class=\"px-6 py-3 text-sm text-gray-700\">${tension}</td>
                                <td class=\"px-6 py-3 text-sm text-gray-500\">${time}</td>
                            </tr>
                        `;
                    }).join('');
                    tableBody.innerHTML = rows;
                };
                const sensorRowsMarkup = sensors.map((sensor, index) => `
                    <div class=\"flex items-center justify-between py-2 text-sm text-gray-700 transition-colors\" data-role=\"sensor-row\" data-index=\"${index}\">
                        <span>${sensor}</span>
                        <span class=\"flex items-center gap-6\">
                            <input type=\"checkbox\" class=\"h-4 w-4 text-blue-500\" data-role=\"trend-toggle\" data-index=\"${index}\" ${index < defaultVisibleCount ? 'checked' : ''}>
                            <input type=\"radio\" class=\"h-4 w-4 text-blue-500\" data-role=\"spectrum-radio\" name=\"cable-spectrum\" value=\"${index}\" ${index === 0 ? 'checked' : ''}>
                        </span>
                    </div>
                `).join('');

                sensorList.innerHTML = `
                    <div class=\"text-xs font-semibold uppercase tracking-wide text-gray-500 pb-2 mb-2 border-b border-gray-200 flex items-center justify-between\">
                        <span>传感器</span>
                        <span class=\"flex items-center gap-6 text-[11px] text-gray-400 normal-case\">
                            <span>趋势</span>
                            <span>频谱</span>
                        </span>
                    </div>
                    <div class=\"divide-y divide-dashed divide-gray-200\" data-role=\"sensor-list\">${sensorRowsMarkup}</div>
                `;

                const tensionChart = new Chart(tensionCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: timeLabels,
                        datasets: sensors.map((sensor, index) => ({
                            label: sensor,
                            data: tensionSeries[index],
                            borderColor: sensorStyles[index % sensorStyles.length].line,
                            backgroundColor: sensorStyles[index % sensorStyles.length].fill,
                            tension: 0.25,
                            pointRadius: 0,
                            borderWidth: 2,
                            fill: true,
                            hidden: index >= defaultVisibleCount
                        }))
                    },
                    options: {
                        maintainAspectRatio: false,
                        responsive: true,
                        plugins: { legend: { display: false } },
                        interaction: { intersect: false, mode: 'index' },
                        scales: {
                            x: { grid: { color: '#f1f5f9' } },
                            y: {
                                grid: { color: '#e5e7eb' },
                                title: { display: true, text: '索力 (kN)' }
                            }
                        }
                    }
                });

                const trendCheckboxes = sensorList.querySelectorAll('input[data-role="trend-toggle"]');
                const spectrumRadios = sensorList.querySelectorAll('input[data-role="spectrum-radio"]');
                const sensorRows = sensorList.querySelectorAll('[data-role="sensor-row"]');

                const highlightSpectrumSensor = (activeIndex) => {
                    sensorRows.forEach(row => {
                        row.classList.remove('bg-blue-50', 'border', 'border-blue-200', 'rounded-md');
                    });
                    const activeRow = sensorList.querySelector(`[data-role="sensor-row"][data-index="${activeIndex}"]`);
                    if (activeRow) {
                        activeRow.classList.add('bg-blue-50', 'border', 'border-blue-200', 'rounded-md');
                    }
                };

                trendCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const currentChecked = Array.from(trendCheckboxes).filter(item => item.checked);
                        if (!checkbox.checked && currentChecked.length === 0) {
                            checkbox.checked = true;
                            return;
                        }

                        const datasetIndex = Number(checkbox.dataset.index);
                        const meta = tensionChart.getDatasetMeta(datasetIndex);
                        meta.hidden = !checkbox.checked;
                        tensionChart.update();
                    });
                });

                // 确保初始显示状态与复选框同步
                trendCheckboxes.forEach(checkbox => {
                    const datasetIndex = Number(checkbox.dataset.index);
                    const meta = tensionChart.getDatasetMeta(datasetIndex);
                    meta.hidden = !checkbox.checked;
                });
                tensionChart.update();

                const spectrumChart = new Chart(spectrumCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: spectrumLabels,
                        datasets: [{
                            data: spectrumSeries[0],
                            borderColor: '#f97316',
                            backgroundColor: 'rgba(249, 115, 22, 0.15)',
                            tension: 0.25,
                            pointRadius: 0,
                            fill: true
                        }]
                    },
                    options: {
                        maintainAspectRatio: false,
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: {
                            x: { title: { display: true, text: 'Hz' }, grid: { color: '#e5e7eb' } },
                            y: { grid: { color: '#e5e7eb' } }
                        }
                    }
                });

                spectrumRadios.forEach(radio => {
                    radio.addEventListener('change', () => {
                        const index = Number(radio.value);
                        spectrumChart.data.datasets[0].data = spectrumSeries[index];
                        spectrumChart.data.datasets[0].borderColor = sensorStyles[index % sensorStyles.length].line;
                        spectrumChart.data.datasets[0].backgroundColor = sensorStyles[index % sensorStyles.length].fill;
                        spectrumChart.data.datasets[0].label = sensors[index];
                        spectrumChart.update();
                        if (spectrumTitle) {
                            spectrumTitle.textContent = `频谱图 - ${sensors[index]}`;
                        }
                        highlightSpectrumSensor(index);
                    });
                });
                if (spectrumTitle) {
                    spectrumTitle.textContent = `频谱图 - ${sensors[0]}`;
                }

                highlightSpectrumSensor(0);
                buildTableRows();
            }

            function initializeHistoryAcousticView() {
                // 主Tab切换逻辑
                const mainTabs = document.querySelectorAll('#history-acoustic-view .main-tab');
                const mainContents = document.querySelectorAll('#history-acoustic-view .main-content');

                mainTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const targetTab = tab.dataset.tab;

                        mainTabs.forEach(t => {
                            t.classList.remove('border-blue-500', 'text-blue-600', 'bg-blue-100');
                            t.classList.add('border-transparent', 'text-gray-500');
                        });
                        tab.classList.remove('border-transparent', 'text-gray-500');
                        tab.classList.add('border-blue-500', 'text-blue-600', 'bg-blue-100');

                        mainContents.forEach(content => content.classList.add('hidden'));
                        document.getElementById(`history-acoustic-${targetTab}-content`).classList.remove('hidden');
                    });
                });

                // 日期选择器统一样式
                document.querySelectorAll('#history-acoustic-view .datepicker').forEach(input => {
                    input.type = 'datetime-local';
                });

                // 刚性平台声音强度图表
                const rigidIntensityCtx = document.getElementById('history-acoustic-chart-rigid-intensity');
                if (rigidIntensityCtx) {
                    new Chart(rigidIntensityCtx, {
                        type: 'line',
                        data: {
                            labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                            datasets: [
                                {
                                    label: 'AS1',
                                    data: [45, 47, 46, 48, 49, 47],
                                    borderColor: 'rgb(59, 130, 246)',
                                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                    tension: 0.1
                                },
                                {
                                    label: 'AS2',
                                    data: [42, 44, 43, 45, 46, 44],
                                    borderColor: 'rgb(239, 68, 68)',
                                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                    tension: 0.1
                                },
                                {
                                    label: 'AS3',
                                    data: [48, 50, 49, 51, 52, 50],
                                    borderColor: 'rgb(34, 197, 94)',
                                    backgroundColor: 'rgba(34, 197, 94, 0.1)',
                                    tension: 0.1
                                },
                                {
                                    label: 'AS4',
                                    data: [46, 48, 47, 49, 50, 48],
                                    borderColor: 'rgb(168, 85, 247)',
                                    backgroundColor: 'rgba(168, 85, 247, 0.1)',
                                    tension: 0.1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: '声音强度 (dB)'
                                    }
                                }
                            }
                        }
                    });
                }

                // 刚性平台频率图表
                const rigidFrequencyCtx = document.getElementById('history-acoustic-chart-rigid-frequency');
                if (rigidFrequencyCtx) {
                    new Chart(rigidFrequencyCtx, {
                        type: 'line',
                        data: {
                            labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                            datasets: [
                                {
                                    label: 'AS1',
                                    data: [1200, 1250, 1220, 1280, 1300, 1260],
                                    borderColor: 'rgb(59, 130, 246)',
                                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                    tension: 0.1
                                },
                                {
                                    label: 'AS2',
                                    data: [1150, 1200, 1170, 1230, 1250, 1210],
                                    borderColor: 'rgb(239, 68, 68)',
                                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                    tension: 0.1
                                },
                                {
                                    label: 'AS3',
                                    data: [1300, 1350, 1320, 1380, 1400, 1360],
                                    borderColor: 'rgb(34, 197, 94)',
                                    backgroundColor: 'rgba(34, 197, 94, 0.1)',
                                    tension: 0.1
                                },
                                {
                                    label: 'AS4',
                                    data: [1250, 1300, 1270, 1330, 1350, 1310],
                                    borderColor: 'rgb(168, 85, 247)',
                                    backgroundColor: 'rgba(168, 85, 247, 0.1)',
                                    tension: 0.1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: '频率 (Hz)'
                                    }
                                }
                            }
                        }
                    });
                }
                // 模拟表格数据（刚性平台）
                const tableBody = document.getElementById('history-acoustic-table-rigid');
                if (tableBody) {
                    const sensors = ['AS1', 'AS2', 'AS3', 'AS4'];
                    const sampleData = [];
                    for (let i = 0; i < 10; i++) {
                        const sensor = sensors[Math.floor(Math.random() * sensors.length)];
                        const intensity = (Math.random() * 20 + 30).toFixed(1);
                        const frequency = (Math.random() * 500 + 800).toFixed(0);
                        const time = new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toLocaleString();
                        sampleData.push({ sensor, intensity, frequency, time });
                    }
                    tableBody.innerHTML = sampleData.map(row => `
                        <tr>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">${row.sensor}</td>
                            <td class="px-6 py-4 text-sm">${row.intensity}</td>
                            <td class="px-6 py-4 text-sm">${row.frequency}</td>
                            <td class="px-6 py-4 text-sm">${row.time}</td>
                        </tr>
                    `).join('');
                }
            }


            // 动态响应页面数据更新功能
            function updateDynamicResponseData() {
                // 更新刚性平台表格数据
                const rigidTableBody = document.getElementById('dynamic-response-table-rigid');
                if (rigidTableBody) {
                    const sensors = ['AS1', 'AS2', 'AS3', 'AS4'];
                    const newData = sensors.map(sensor => {
                        const xAccel = (Math.random() * 0.004 - 0.002).toFixed(6);
                        const yAccel = (Math.random() * 0.004 - 0.002).toFixed(6);
                        const time = new Date().toLocaleString('zh-CN', {
                            year: 'numeric',
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit',
                            second: '2-digit'
                        });
                        return `<tr><td class="px-6 py-4 whitespace-nowrap text-sm">${sensor}</td><td class="px-6 py-4 whitespace-nowrap text-sm">${xAccel}</td><td class="px-6 py-4 whitespace-nowrap text-sm">${yAccel}</td><td class="px-6 py-4 whitespace-nowrap text-sm">${time}</td></tr>`;
                    });
                    rigidTableBody.innerHTML = newData.join('');
                }

                // 更新柔性平台表格数据
                const flexibleTableBody = document.getElementById('dynamic-response-table-flexible');
                if (flexibleTableBody) {
                    const sensors = ['AS5', 'AS6', 'AS7', 'AS8'];
                    const newData = sensors.map(sensor => {
                        const xAccel = (Math.random() * 0.004 - 0.002).toFixed(6);
                        const yAccel = (Math.random() * 0.004 - 0.002).toFixed(6);
                        const time = new Date().toLocaleString('zh-CN', {
                            year: 'numeric',
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit',
                            second: '2-digit'
                        });
                        return `<tr><td class="px-6 py-4 whitespace-nowrap text-sm">${sensor}</td><td class="px-6 py-4 whitespace-nowrap text-sm">${xAccel}</td><td class="px-6 py-4 whitespace-nowrap text-sm">${yAccel}</td><td class="px-6 py-4 whitespace-nowrap text-sm">${time}</td></tr>`;
                    });
                    flexibleTableBody.innerHTML = newData.join('');
                }
            }

            // 启动动态响应数据更新
            setInterval(updateDynamicResponseData, 5000);

            // 索力监测页面数据更新功能
            function updateStressData() {
                // 更新索力监测表格数据
                const stressTableBody = document.getElementById('stress-table-data');
                if (stressTableBody) {
                    const sensors = [
                        { name: 'CF1', position: '柔性平台-东南' },
                        { name: 'CF2', position: '柔性平台-西南' },
                        { name: 'CF3', position: '柔性平台-东北' },
                        { name: 'CF4', position: '柔性平台-西北' }
                    ];
                    
                    const newData = sensors.map(sensor => {
                        const tensionValue = (1250 + Math.random() * 10 - 5).toFixed(1);
                        const frequency = (1.1 + Math.random() * 0.1 - 0.05).toFixed(2);
                        const status = Math.random() > 0.1 ? '正常' : '预警';
                        const statusClass = status === '正常' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800';
                        const time = new Date().toLocaleString('zh-CN', {
                            year: 'numeric',
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit',
                            second: '2-digit'
                        });
                        return `<tr>
                            <td class="px-6 py-4">${sensor.name}</td>
                            <td class="px-6 py-4 text-gray-500">${sensor.position}</td>
                            <td class="px-6 py-4">${tensionValue}</td>
                            <td class="px-6 py-4">${frequency}</td>
                            <td class="px-6 py-4"><span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${statusClass}">${status}</span></td>
                            <td class="px-6 py-4 text-gray-500">${time}</td>
                        </tr>`;
                    });
                    stressTableBody.innerHTML = newData.join('');
                }

                // 更新当前传感器信息
                const currentTensionValue = document.getElementById('current-tension-value');
                const currentFrequency = document.getElementById('current-frequency');
                const currentStatus = document.getElementById('current-status');
                
                if (currentTensionValue) {
                    const newTension = (1250 + Math.random() * 10 - 5).toFixed(1);
                    currentTensionValue.textContent = `${newTension} kN`;
                }
                
                if (currentFrequency) {
                    const newFreq = (1.1 + Math.random() * 0.1 - 0.05).toFixed(2);
                    currentFrequency.textContent = `${newFreq} Hz`;
                }
                
                if (currentStatus) {
                    const status = Math.random() > 0.1 ? '正常' : '预警';
                    currentStatus.textContent = status;
                    currentStatus.className = status === '正常' ? 'font-medium text-green-600' : 'font-medium text-yellow-600';
                }
            }

            // 启动索力监测数据更新
            setInterval(updateStressData, 5000);

            // 启动首页索力图表数据更新
            setInterval(() => {
                if (window.updateHomeStressData) {
                    window.updateHomeStressData();
                }
            }, 5000);

            // 索力监测传感器选择交互功能
            function initializeStressInteractions() {
                // 传感器复选框控制图表显示
                const sensorCheckboxes = document.querySelectorAll('#stress-sensor-list input[type="checkbox"]');
                sensorCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        const sensorIndex = parseInt(this.dataset.index);
                        const sensorName = this.parentElement.textContent.trim();
                        
                        // 更新图表显示（这里可以添加图表控制逻辑）
                        console.log(`传感器 ${sensorName} ${this.checked ? '显示' : '隐藏'}`);
                        
                        // 如果是第一个被选中的传感器，更新频谱显示
                        if (this.checked) {
                            updateSpectrumDisplay(sensorName, sensorIndex);
                        }
                    });
                });

                // 刷新按钮功能
                const refreshBtn = document.getElementById('stress-refresh-btn');
                if (refreshBtn) {
                    refreshBtn.addEventListener('click', function() {
                        updateStressData();
                        // 添加刷新动画效果
                        this.style.transform = 'rotate(360deg)';
                        this.style.transition = 'transform 0.5s ease';
                        setTimeout(() => {
                            this.style.transform = '';
                            this.style.transition = '';
                        }, 500);
                    });
                }
            }

            // 更新频谱显示信息
            function updateSpectrumDisplay(sensorName, sensorIndex) {
                const spectrumSensorName = document.getElementById('spectrum-sensor-name');
                const currentSensorDisplay = document.getElementById('current-sensor-display');
                
                if (spectrumSensorName) {
                    spectrumSensorName.textContent = sensorName;
                }
                
                if (currentSensorDisplay) {
                    currentSensorDisplay.textContent = sensorName;
                }
            }

            // 预警信息相关函数
            function loadWarningData() {
                fetch('platform_warning_data.json')
                    .then(response => response.json())
                    .then(data => {
                        displayWarningData(data);
                    })
                    .catch(error => {
                        console.error('加载预警数据失败:', error);
                        displayDefaultWarningInfo();
                    });
            }

            function displayWarningData(data) {
                const container = document.getElementById('warning-info-container');
                if (!container) return;

                let html = `
                    <h3 class="font-semibold text-gray-700 mb-4">预警信息</h3>
                    <div class="flex items-start">
                        <div class="relative w-16 h-16 mr-4 flex-shrink-0">
                            <div class="absolute inset-0 bg-red-100 rounded-full animate-ping"></div>
                            <div class="relative w-16 h-16 bg-red-200 rounded-full flex items-center justify-center">
                                <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                            </div>
                        </div>
                        <div class="flex-grow text-sm space-y-3">
                `;

                // 处理新的数据格式 - 从platforms中提取预警数据
                let warningCount = 0;
                if (data.platforms && data.platforms.length > 0) {
                    data.platforms.forEach(platform => {
                        if (platform.warningData && platform.warningData.length > 0) {
                            platform.warningData.forEach(warning => {
                                // 只显示非正常的预警状态
                                if (warning.warningLevel !== 'normal') {
                                    warningCount++;
                                    const levelColor = getWarningLevelColorByStatus(warning.warningLevel);
                                    const platformType = platform.platformType === 'rigid' ? '刚性平台' : '柔性平台';
                                    const platformColor = platform.platformType === 'rigid' ? 'bg-blue-100 text-blue-800' : 'bg-orange-100 text-orange-800';
                                    const time = new Date(warning.timestamp).toLocaleString('zh-CN');
                                    
                                    html += `
                                        <div class="flex justify-between items-center">
                                            <div class="flex items-center flex-grow">
                                                <span class="inline-block w-4 h-4 ${levelColor} rounded-sm mr-2 align-middle"></span>
                                                <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full ${platformColor} mr-2">${platformType}</span>
                                                <p class="flex-grow">【${warning.sensorId}】${warning.sensorName} - ${warning.description}</p>
                                            </div>
                                            <span class="text-gray-500 text-xs whitespace-nowrap ml-4">${time}</span>
                                        </div>
                                    `;
                                }
                            });
                        }
                    });
                }
                
                if (warningCount === 0) {
                    html += '<div class="text-gray-500 text-center py-4">暂无预警信息</div>';
                }

                html += `
                        </div>
                    </div>
                `;
                
                container.innerHTML = html;
            }

            function displayDefaultWarningInfo() {
                const container = document.getElementById('warning-info-container');
                if (!container) return;

                container.innerHTML = `
                    <h3 class="font-semibold text-gray-700 mb-4">预警信息</h3>
                    <div class="flex items-start">
                        <div class="relative w-16 h-16 mr-4 flex-shrink-0">
                            <div class="absolute inset-0 bg-red-100 rounded-full animate-ping"></div>
                            <div class="relative w-16 h-16 bg-red-200 rounded-full flex items-center justify-center">
                                <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                            </div>
                        </div>
                        <div class="flex-grow text-sm space-y-3">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center flex-grow">
                                    <span class="inline-block w-4 h-4 bg-red-500 rounded-sm mr-2 align-middle"></span>
                                    <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 mr-2">刚性平台</span>
                                    <p class="flex-grow">【SS1】应力应变—应变值达到一级预警范围</p>
                                </div>
                                <span class="text-gray-500 text-xs whitespace-nowrap ml-4">2023-10-26 15:26</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="flex items-center flex-grow">
                                    <span class="inline-block w-4 h-4 bg-orange-500 rounded-sm mr-2 align-middle"></span>
                                    <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 mr-2">柔性平台</span>
                                    <p class="flex-grow">【SS2】应力应变—应变值达到二级预警范围</p>
                                </div>
                                <span class="text-gray-500 text-xs whitespace-nowrap ml-4">2023-10-26 15:26</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="flex items-center flex-grow">
                                    <span class="inline-block w-4 h-4 bg-yellow-400 rounded-sm mr-2 align-middle"></span>
                                    <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 mr-2">刚性平台</span>
                                    <p class="flex-grow">【SS3】应力应变—应变值达到三级预警范围</p>
                                </div>
                                <span class="text-gray-500 text-xs whitespace-nowrap ml-4">2023-10-26 15:26</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            function getWarningLevelColor(level) {
                switch (level) {
                    case 1: return 'bg-red-500';
                    case 2: return 'bg-orange-500';
                    case 3: return 'bg-yellow-400';
                    default: return 'bg-gray-400';
                }
            }

            function getWarningLevelColorByStatus(status) {
                switch (status) {
                    case 'warning': return 'bg-orange-500';
                    case 'critical': return 'bg-red-500';
                    case 'emergency': return 'bg-red-600';
                    default: return 'bg-gray-400';
                }
            }

            // 页面加载时初始化索力监测交互功能
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(initializeStressInteractions, 1000);
            });

            // 初始加载默认页面
            const initialLink = document.querySelector('.menu-link[data-view="data-view"]');
            if (initialLink) {
                 navigateTo(initialLink.dataset.view, initialLink.dataset.breadcrumb, initialLink);
            }
            
            // 侧边栏菜单切换
            const menuToggle = document.getElementById('menu-toggle');
            const layoutContainer = document.getElementById('layout-container');

            menuToggle.addEventListener('click', () => {
                layoutContainer.classList.toggle('sidebar-collapsed');
            });
            // 1024×768适配优化：为所有卡片添加统一class
            function optimizeFor1024() {
                // 添加card class到所有符合条件的div
                const cardElements = document.querySelectorAll('div.bg-white.p-6.rounded-lg.shadow-md');
                cardElements.forEach(el => {
                    if (!el.classList.contains('card')) {
                        el.classList.add('card');
                    }
                });

                // 为表格添加响应式class
                const tables = document.querySelectorAll('table');
                tables.forEach(table => {
                    if (!table.classList.contains('table-responsive')) {
                        const wrapper = document.createElement('div');
                        wrapper.classList.add('table-responsive');
                        table.parentNode.insertBefore(wrapper, table);
                        wrapper.appendChild(table);
                    }
                });

                // 为图表容器添加优化class
                const chartContainers = document.querySelectorAll('canvas');
                chartContainers.forEach(canvas => {
                    const parent = canvas.parentElement;
                    if (parent && !parent.classList.contains('chart-container')) {
                        parent.classList.add('chart-container');
                        // 根据高度添加不同的尺寸class
                        const height = parent.style.height || parent.clientHeight;
                        if (height && parseInt(height) <= 120) {
                            parent.classList.add('chart-small');
                        } else if (height && parseInt(height) <= 180) {
                            parent.classList.add('chart-medium');
                        } else {
                            parent.classList.add('chart-large');
                        }
                    }
                });

                // 为按钮添加统一样式
                const buttons = document.querySelectorAll('button');
                buttons.forEach(btn => {
                    if (!btn.classList.contains('btn') && !btn.classList.contains('btn-sm')) {
                        btn.classList.add('btn');
                    }
                });

                // 检查是否为1024×768分辨率
                if (window.innerWidth <= 1024 && window.innerHeight <= 768) {
                    document.body.classList.add('compact-mode');
                }
            }

            // 页面加载完成后执行优化
            optimizeFor1024();

            // 窗口大小改变时重新检查
            window.addEventListener('resize', () => {
                if (window.innerWidth <= 1024 && window.innerHeight <= 768) {
                    document.body.classList.add('compact-mode');
                } else {
                    document.body.classList.remove('compact-mode');
                }
            });
        });
    </script>
    <script src="js/responsive-1024.js"></script>

</body>
</html>